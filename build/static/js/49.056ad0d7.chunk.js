(this["webpackJsonplt-app"]=this["webpackJsonplt-app"]||[]).push([[49],{792:function(e,t,a){"use strict";a.r(t),a.d(t,"getFundPortfolioList",(function(){return p})),a.d(t,"getFullContactInfo",(function(){return u})),a.d(t,"getEquityQuoteById",(function(){return m})),a.d(t,"getEquityQuoteNotes",(function(){return d})),a.d(t,"saveEquityQuote",(function(){return f})),a.d(t,"createNewQuoteNote",(function(){return E})),a.d(t,"editQuoteNote",(function(){return _})),a.d(t,"deleteQuoteNote",(function(){return h})),a.d(t,"passEquityQuote",(function(){return g})),a.d(t,"closeToast",(function(){return y}));var n=a(10),o=a.n(n),s=a(3),c=a(19),r=a(1),l=a(7),i=a(2);function p(e){return function(){var t=Object(c.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:r.LOADING_FUND_PORTFOLIOS}),Object(i.i)({url:"".concat(l.a.BASE_URL,"funds/quotes"),applyAuthHeader:!0,data:Object(s.a)({},e),success:function(e){a({type:r.GET_FUND_PORTFOLIO_SUCCESS,data:e.data,nextPageUrl:e.next_page_url})},error:Object(i.v)(a,r.GET_FUND_PORTFOLIO_FAILED)});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function u(e){return function(t){t({type:r.LOADING_FULL_CONTACT}),Object(i.i)({url:"".concat(l.a.BASE_URL,"contact/").concat(e),applyAuthHeader:!0,success:function(e){e.data&&e.data.length>=1?t({type:r.LOAD_FULL_CONTACT,contact:e.data[0].contacts[0]}):t({type:r.NO_FULL_CONTACT})}})}}function m(e){return function(){var t=Object(c.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:r.LOADING_EQUITY_QUOTE}),t.next=3,Object(i.i)({url:"".concat(l.a.BASE_URL,"equity-quotes/").concat(e),applyAuthHeader:!0,success:function(t){a({type:r.GET_EQUITY_QUOTE_SUCCESS,data:t.data||{}}),a(d(e))},error:Object(i.v)(a,r.GET_EQUITY_QUOTE_FAILED)}).catch((function(e){}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function d(e){return function(t){Object(i.i)({url:"".concat(l.a.BASE_URL,"equity-quotes/").concat(e,"/notes"),applyAuthHeader:!0,success:function(e){t({type:r.GET_QUOTE_NOTE_SUCCESS,data:e.data.reverse()||[]})},error:Object(i.v)(t,r.GET_QUOTE_NOTE_FAILED)})}}function f(e,t,a,n,o,s,c,p,u,m,d,f,E,_,h,g,y){return function(v){Object(i.i)({url:"".concat(l.a.BASE_URL,"equity-quotes/").concat(e),applyAuthHeader:!0,data:{quoted_amount:t,term:a,ltv:n,ltc:o,minimum_payout:s,pref_rate:c,origination_fee:p,sponsor_acquisition_fee:u,sponsor_property_mgmt_fee:m,sponsor_asset_mgmt_fee:d,investor_asset_mgmt_fee:f,sponsor_construction_mgmt_fee:E,exit_fee:_,preferred_irr:h,minimum_expected_payout:g,waterfall_tiers:y},type:"PUT",success:function(e){v({type:r.SAVE_EQUITY_QUOTE,success:!0,message:e.message})},error:Object(i.v)(v,r.SAVE_EQUITY_QUOTE)})}}function E(e,t){return function(){var a=Object(c.a)(o.a.mark((function a(n){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(i.i)({url:"".concat(l.a.BASE_URL,"equity-quotes/").concat(e,"/notes"),applyAuthHeader:!0,data:{note:t},type:"POST",success:function(e){n({type:r.CREATE_QUOTE_NOTE_SUCCESS,data:e.data,message:e.message})},error:Object(i.v)(n,r.UPDATE_QUOTE_NOTE_FAILED)});case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}function _(e,t){return function(a){Object(i.i)({url:"".concat(l.a.BASE_URL,"equity-quotes/notes/").concat(e),applyAuthHeader:!0,data:{note:t},type:"PUT",success:function(e){a({type:r.EDIT_QUOTE_NOTE_SUCCESS,data:e.data,message:e.message})},error:Object(i.v)(a,r.UPDATE_QUOTE_NOTE_FAILED)})}}function h(e){return function(){var t=Object(c.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.i)({url:"".concat(l.a.BASE_URL,"equity-quotes/notes/").concat(e),applyAuthHeader:!0,type:"DELETE",success:function(){a({type:r.DELETE_QUOTE_NOTE_SUCCESS,note_id:e,message:"Note Deleted Successfully"})},error:Object(i.v)(a,r.UPDATE_QUOTE_NOTE_FAILED)}).catch((function(e){}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function g(e){return function(t){Object(i.i)({url:"".concat(l.a.BASE_URL,"equity-quotes/").concat(e),applyAuthHeader:!0,data:{status:2},type:"PUT",success:function(e){t({type:r.SAVE_EQUITY_QUOTE,success:!0,message:e.message})},error:Object(i.v)(t,r.SAVE_EQUITY_QUOTE)})}}function y(){return{type:r.CLOSE_FUND_PORTFOLIO_TOAST}}},967:function(e,t,a){"use strict";a.r(t);var n=a(9),o=a(8),s=a(12),c=a(11),r=a(0),l=a.n(r),i=a(6),p=a(792),u=a(23),m=a(72),d=a.n(m),f=a(34),E=a.n(f),_=a(88),h=a(258),g=a(27),y=a(26),v=a.n(y),O=a(87),N=a.n(O),b=a(210),C=a.n(b),T=a(2),P=a(80),A=function(e){var t=e.fundPortfolio,a=t.deal,n=a&&a.properties||[],o=n.length>1?n.length-1:0,s=0;n.forEach((function(e){return s+=e.no_of_units||0}));var c=n.length?Math.max.apply(Math,Object(g.a)(n.map((function(e){return e.square_footage})))):null,r=a&&a.brokers?a.brokers.filter((function(e){return e.broker_commission>0||1===e.Originator})):[],i=0;n.forEach((function(e){return i+=e.total_violations||0}));var p=0;return n.forEach((function(e){return p+=e.total_complaints||0})),l.a.createElement("div",{className:"panel"},l.a.createElement("div",{className:"panel-body"},l.a.createElement(v.a,null,l.a.createElement("p",{className:"non-qts"},a?a.deal_status_value:"")),l.a.createElement(v.a,{className:"mb-16"},l.a.createElement(N.a,{md:"4"},l.a.createElement("p",{className:"small-title no-padding-left"},"Address"),l.a.createElement("p",{className:"large-text panel-info-value"},n.length?Object(T.l)(n[0].property_address,null,n[0].property_city,n[0].property_state,n[0].property_zip):"-"),l.a.createElement("p",{className:"panel-info-value"},l.a.createElement("i",{className:"orange-text orange-text-hover pointer",onClick:function(){return e.dealClick(t.deal_id,i,o,"property-details")}},0===o?"":1===o?"1 other property":o+" other properties"))),l.a.createElement(N.a,{md:"2"},l.a.createElement("p",{className:"small-title no-padding-left"},"Client Name"),a&&a.primary_contact_id?l.a.createElement("p",{className:"large-text panel-info-value orange-text-hover"},l.a.createElement("i",{className:"orange-hover pointer",onClick:function(){return e.openContactModal(a.primary_contact_id,"".concat(a.primary_contact_first_name||""," ").concat(a.primary_contact_last_name||""))}},a.primary_contact_first_name||""," ",a.primary_contact_last_name||"")):l.a.createElement("p",{className:"large-text panel-info-value"},"-")),l.a.createElement(N.a,{md:"2"},l.a.createElement("p",{className:"small-title no-padding-left"},"Property Type"),l.a.createElement("p",{className:"large-text panel-info-value"},n.length?n[0].property_type_value:"-")),l.a.createElement(N.a,{md:"2"},l.a.createElement("p",{className:"small-title no-padding-left"},"Units / Square ft"),l.a.createElement("p",{className:"large-text panel-info-value"},s||"-"," / ",Object(T.r)(c,"-"))),a&&1===parseInt(a.deal_status,10)?l.a.createElement(N.a,{md:"2"},l.a.createElement("p",{className:"small-title no-padding-left"},"Expected IP Date"),l.a.createElement("p",{className:"large-text panel-info-value"},a?Object(T.n)(a.expected_ip_date):"-")):a&&2===parseInt(a.deal_status,10)?l.a.createElement(N.a,{md:"2"},l.a.createElement("p",{className:"small-title no-padding-left"},"Expected CL Date"),l.a.createElement("p",{className:"large-text panel-info-value"},a?Object(T.n)(a.expected_cl_date):"-")):l.a.createElement(N.a,{md:"2"},l.a.createElement("p",{className:"small-title no-padding-left"},"Closing Date"),l.a.createElement("p",{className:"large-text panel-info-value"},a?Object(T.n)(a.activity_date):"-"))),l.a.createElement(v.a,{className:"mb-16"},l.a.createElement(N.a,{md:"4"},l.a.createElement("p",{className:"small-title no-padding-left"},"Brokers"),l.a.createElement("div",{className:"flex flex-wrap"},r.length?r.map((function(t,a){return l.a.createElement("p",{key:a,className:"large-text panel-info-value orange-text-hover"},l.a.createElement("i",{className:"orange-hover pointer",onClick:function(){return e.openContactModal(t.contact_id,"".concat(t.first_name," ").concat(t.last_name))}},t.first_name," ",t.last_name),l.a.createElement("span",{style:{marginRight:"6px"}},r.length>a+1?", ":""))})):l.a.createElement("p",{className:"large-text panel-info-value"},"-"))),l.a.createElement(N.a,{md:"2"},l.a.createElement("p",{className:"small-title no-padding-left"},"Percentage Owned"),l.a.createElement("p",{className:"large-text panel-info-value"},a?"Pref/Mezz"===a.equity_type?"N/A":Object(T.o)(t.percent_of_ownership,"-"):"-")),a&&5===parseInt(a.deal_status,10)?l.a.createElement(N.a,{md:"2"},l.a.createElement("p",{className:"small-title no-padding-left"},"Invested Amount"),l.a.createElement("p",{className:"large-text panel-info-value"},Object(T.m)(t.quoted_amount,0,"N/A"))):l.a.createElement(N.a,{md:"2"},l.a.createElement("p",{className:"small-title no-padding-left"},"Total Equity Amount"),l.a.createElement("p",{className:"large-text panel-info-value"},Object(T.m)(t.quoted_amount,0,"N/A")))),n.length>0?l.a.createElement("div",null,l.a.createElement(C.a,{style:{marginTop:"0"}}),l.a.createElement(v.a,null,l.a.createElement(N.a,{md:"12",className:"flex",style:{justifyContent:"space-between",alignItems:"center"}},l.a.createElement(v.a,{className:"comps-row"},l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("div",{className:i||p?"border-right":"no-border"},l.a.createElement("a",{href:"/",onClick:function(t){t.preventDefault(),e.compsClick(n[0].in_nyc,n[0].property_address,"".concat(n[0].property_city,", ").concat(n[0].property_state),n[0].property_type_id)}},l.a.createElement("p",{className:"violation-value comps"},l.a.createElement("span",null,Object(T.q)(n.find((function(e){return null!==e.total_comps})).total_comps)," ","Comps")))))),l.a.createElement("div",{className:i>0||p>0?"comps-row-violations":"hidden"},l.a.createElement("div",{className:"comps-row-violations"},l.a.createElement("div",null,l.a.createElement("a",{href:"/",onClick:function(a){a.preventDefault(),e.dealClick(t.deal_id,i,o,"violations")}},l.a.createElement("p",{className:"violation-value"},l.a.createElement("span",null,i," Violations")))),l.a.createElement("div",null,l.a.createElement("a",{href:"/",onClick:function(a){a.preventDefault(),e.dealClick(t.deal_id,i,o,"violations")}},l.a.createElement("p",{className:"violation-value"},l.a.createElement("span",null,p," Complaints"))))))),l.a.createElement("div",{className:"add-note-buttons"},l.a.createElement(E.a,{variant:"flat",style:{margin:"0 0 0 24px"},onClick:function(){return T.f.go("/fund-portfolio/".concat(e.type,"/").concat(t.quote_id,"/quote?").concat(Object(P.a)({equity_type:a.equity_type})))}},"QUOTE"),l.a.createElement(E.a,{variant:"flat",style:{margin:"0 0 0 24px"},onClick:function(){return e.openPassModal(t.quote_id)}},"PASS"))))):""))},U=a(165),k=a(38),j=a.n(k),S=a(257),w=a.n(S),q=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={note:""},o}return Object(o.a)(a,[{key:"noteChange",value:function(e){this.setState({note:e.target.value})}},{key:"render",value:function(){var e=this;return l.a.createElement(d.a,{className:"note-modal",ariaHideApp:!1,isOpen:!0,contentLabel:"Modal",onAfterOpen:function(){},onRequestClose:this.props.closePassDialog.bind(this),shouldCloseOnOverlayClick:!0},l.a.createElement(j.a,{className:"modal-form"},l.a.createElement("p",{className:"add-note-modal"},"Reason for passing (optional)"),l.a.createElement(w.a,{rows:1,value:this.state.note?this.state.note:"",label:"Text",onChange:this.noteChange.bind(this),floatingLabel:!0,className:"add-note-textarea"}),l.a.createElement("div",{className:"add-note-buttons"},l.a.createElement(E.a,{variant:"flat",onClick:this.props.closePassDialog.bind(this)},"CANCEL"),l.a.createElement(E.a,{variant:"flat",onClick:function(){return e.props.submitPassDialog(e.state.note)},type:"submit",value:"submit"},"PASS"))))}}]),a}(l.a.Component),x=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={showContactModal:!1,contactName:"",contactId:null,quoteId:null,showPassModal:!1},o}return Object(o.a)(a,[{key:"openContactModal",value:function(e,t){this.props.getFullContactInfo(e),this.setState({showContactModal:!0,contactName:t,contactId:e})}},{key:"closeContactModal",value:function(){this.setState({showContactModal:!1})}},{key:"openPassModal",value:function(e){this.setState({quoteId:e,showPassModal:!0})}},{key:"closePassDialog",value:function(){this.setState({quoteId:null,showPassModal:!1})}},{key:"submitPassDialog",value:function(e){e.length>0&&this.props.createNewQuoteNote(this.state.quoteId,e),this.props.passEquityQuote(this.state.quoteId),this.closePassDialog()}},{key:"render",value:function(){var e=this,t=null;return this.props.toast&&this.props.toast.show&&(t=l.a.createElement(_.a,{closeToast:this.props.closeToast,delay:6e3},l.a.createElement("div",{className:"success-message"},l.a.createElement("p",null,this.props.toast.message),l.a.createElement(E.a,{variant:"flat",onClick:this.props.closeToast},this.props.toast.success?"Done":"Dismiss")))),l.a.createElement("div",null,t,this.props.deals.length>0?l.a.createElement("div",null,this.props.deals.map((function(t,a){return l.a.createElement(A,{key:a,fundPortfolio:t,compsClick:e.props.compsClick,dealClick:e.props.dealClick,type:e.props.type,openContactModal:e.openContactModal.bind(e),openPassModal:e.openPassModal.bind(e)})})),l.a.createElement(h.a,{currentPage:this.props.currentPage,nextPageUrl:this.props.nextPageUrl}),l.a.createElement(U.a,{key:this.state.contactId,isOpen:this.state.showContactModal,onRequestClose:this.closeContactModal.bind(this),onAfterOpen:function(){},name:this.state.contactName,loading:this.props.loadingContact,contact:this.props.contact,noContact:Object(T.w)(this.props.contact)}),this.state.showPassModal&&l.a.createElement(q,{closePassDialog:function(){return e.closePassDialog()},submitPassDialog:function(){return e.submitPassDialog()}})):l.a.createElement("div",null,l.a.createElement("div",{className:"grey-circle"},l.a.createElement("i",{className:"material-icons"},"warning")),l.a.createElement("h2",{className:"no-results"},"No Closed Deals From My Fund")))}}]),a}(l.a.Component),L=a(164),I=a(50),D=a(25),Q=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.navActions.updateNavTitle("My Fund Portfolio"),this.getFundPortfolioList(this.props.match.params.type)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.location.search===e.location.search&&this.props.match.params.type===e.match.params.type||this.getFundPortfolioList(e.match.params.type)}},{key:"getFundPortfolioList",value:function(e){var t=JSON.parse(localStorage.getItem("data")),a=Object(D.a)("page");"closed-deals"===e?this.props.actions.getFundPortfolioList({deal_status:5,is_awarded:1,include:["deal","deal/brokers","deal/properties"],sort:"quoted_date",page:a}):this.props.actions.getFundPortfolioList({investor_id:t.contact_id,include:["deal","deal/brokers","deal/properties"],sort:"deal_status",page:a})}},{key:"compsClick",value:function(e,t,a,n){sessionStorage.setItem("comps_inNYC",e),this.props.compsActions.setPageAndScrollPos(window.location.pathname,window.scrollY),this.props.compsActions.submitCompsSearch("".concat(t," ").concat(a),n)}},{key:"dealClick",value:function(e,t,a,n){(null!=t||a>0)&&(this.props.compsActions.setPageAndScrollPos(window.location.pathname,window.scrollY),T.f.go("/fund-portfolio/".concat(this.props.match.params.type,"/").concat(e,"/").concat(n,"?").concat(Object(P.a)({violations:t,additional_properties:a,previous_page:window.location.pathname+window.location.search}))))}},{key:"render",value:function(){return l.a.createElement("div",null,this.props.fundPortfolios.loading?l.a.createElement(d.a,{className:"loading-modal",isOpen:!0,ariaHideApp:!1,contentLabel:"Modal",shouldCloseOnOverlayClick:!1},l.a.createElement("div",{className:"centered-spinner"},l.a.createElement("img",{src:"/images/icons/spin.svg",className:"loading-spinner",alt:"loading spinner"}))):l.a.createElement(x,{deals:this.props.fundPortfolios.deals.data,contact:this.props.fundPortfolios.contact,loadingContact:this.props.fundPortfolios.loadingContact,currentPage:Object(D.a)("page")||1,nextPageUrl:this.props.fundPortfolios.deals.nextPageUrl,toast:this.props.fundPortfolios.toast,type:this.props.match.params.type,closeToast:this.props.actions.closeToast,compsClick:this.compsClick.bind(this),dealClick:this.dealClick.bind(this),getFullContactInfo:this.props.actions.getFullContactInfo,createNewQuoteNote:this.props.actions.createNewQuoteNote,passEquityQuote:this.props.actions.passEquityQuote}))}}]),a}(l.a.Component);t.default=Object(i.b)((function(e){return{fundPortfolios:e.fundPortfolios}}),(function(e){return{actions:Object(u.b)(p,e),compsActions:Object(u.b)(L,e),navActions:Object(u.b)(I,e)}}))(Q)}}]);
//# sourceMappingURL=49.056ad0d7.chunk.js.map