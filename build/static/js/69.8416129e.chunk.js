(this["webpackJsonplt-app"]=this["webpackJsonplt-app"]||[]).push([[69],{975:function(e,a,t){"use strict";t.r(a);var n={};t.r(n),t.d(n,"getDocsByType",(function(){return h}));var o=t(9),c=t(8),i=t(12),s=t(11),r=t(0),l=t.n(r),d=t(6),p=t(23),u=t(1),m=t(7),v=t(2),g=t(21);function h(e){return function(a){a({type:u.LOADING_DOCS_BY_TYPE}),Object(v.i)({url:"".concat(m.a.BASE_URL,"docs"),applyAuthHeader:!0,success:function(t){switch(t.status){case"E403":a(Object(g.tokenExpired)());break;case"200":a({type:u.GET_DOCS_BY_TYPE,data:t.data[e]});break;default:a({type:u.GET_DOCS_BY_TYPE,data:[]})}}})}}var w=t(50),f=t(72),y=t.n(f),b=t(10),E=t.n(b),O=t(19),k=t(189),N=function(e){Object(i.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={downloading:!1},e.downloadFile=function(){var a=Object(O.a)(E.a.mark((function a(t){var n,o,c,i,s,r,l,d,p;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!e.state.downloading){a.next=3;break}return a.abrupt("return");case 3:return e.setState({downloading:!0}),o=t.link,c=t.filename,i=void 0===c?"":c,s=t.documentitle,r=void 0===s?"":s,i=i.trim(),(r=r.trim())&&(i="".concat(r,"_").concat(i)),l=Object(k.b)(o),a.next=11,Object(v.i)({url:"".concat(l,"?getSignedUrl=1"),applyAuthHeader:!0});case 11:d=a.sent,p=(null===d||void 0===d||null===(n=d.data)||void 0===n?void 0:n.url)||"",window&&window.isNativeApp?window.ReactNativeWebView.postMessage(JSON.stringify({action:window.canShareUrl?"shareUrl":"openUrl",data:{url:p,fileName:i}})):(e.setState({downloading:!1}),window.open(p)),a.next=21;break;case 16:a.prev=16,a.t0=a.catch(0),console.error(a.t0),alert("Sorry! There was an error downloading that document."),e.setState({downloading:!1});case 21:case"end":return a.stop()}}),a,null,[[0,16]])})));return function(e){return a.apply(this,arguments)}}(),e.handleWindowMessage=function(a){var t=a.data;if(t&&"undefined"!==t){var n=t.action,o=t.error;n?"shareUrl"!==n||e.setState({downloading:!1}):o&&console.warn("ACTION_ERROR",n,o)}},e}return Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("message",this.handleWindowMessage,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleWindowMessage)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"docs-outer-container"},l.a.createElement("div",{className:"docs-list docs-container"},this.props.docs&&this.props.docs.length?this.props.docs.map((function(a,t){return l.a.createElement("div",{key:t,className:"docs-row"},l.a.createElement("div",{className:"docs-row-icon"},l.a.createElement("img",{src:"/images/icons/".concat(e.props.docType.icon),width:"16",height:"16",alt:"doc"})),l.a.createElement("div",{className:"docs-row-title"},a.documentitle),l.a.createElement("div",{className:"docs-row-download",onClick:function(){return e.downloadFile(a)}},l.a.createElement("i",{className:"material-icons doc-download-icon"},window&&window.canShareUrl?"share":"file_download")))})):l.a.createElement("div",null,l.a.createElement("div",{className:"grey-circle"},l.a.createElement("i",{className:"material-icons"},"warning")),l.a.createElement("h2",{className:"no-results"},"No Docs"))),l.a.createElement(y.a,{className:"loading-modal",isOpen:this.state.downloading,ariaHideApp:!1,contentLabel:"Modal",shouldCloseOnOverlayClick:!1},l.a.createElement("div",{className:"centered-spinner"},l.a.createElement("img",{src:"/images/icons/spin.svg",className:"loading-spinner",alt:"loading spinner"}))))}}]),t}(l.a.Component),j=[{id:2,value:"setup",icon:"docs-setup.png"},{id:3,value:"brokerage",icon:"docs-brokerage.png"},{id:4,value:"marketing",icon:"docs-marketing.png"},{id:5,value:"misc",icon:"docs-misc.png"},{id:8,value:"email-templates",icon:"docs-email.png"}],T=function(e){Object(i.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={docType:{}},e}return Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.navActions.updateNavTitle("Documents"),this.getDocs()}},{key:"componentDidUpdate",value:function(e,a){this.props.match.params.type!==e.match.params.type&&this.getDocs()}},{key:"getDocs",value:function(){var e=this,a=j.find((function(a){return a.value===e.props.match.params.type}));this.setState({docType:a},(function(){return e.props.actions.getDocsByType(a?a.id:null)}))}},{key:"render",value:function(){return l.a.createElement("div",null,this.props.docs.loading?l.a.createElement(y.a,{className:"loading-modal",isOpen:!0,ariaHideApp:!1,contentLabel:"Modal",shouldCloseOnOverlayClick:!1},l.a.createElement("div",{className:"centered-spinner"},l.a.createElement("img",{src:"/images/icons/spin.svg",className:"loading-spinner",alt:"loading spinner"}))):l.a.createElement(N,{docs:this.props.docs.data,docType:this.state.docType}))}}]),t}(l.a.Component);a.default=Object(d.b)((function(e){return{docs:e.docs}}),(function(e){return{actions:Object(p.b)(n,e),navActions:Object(p.b)(w,e)}}))(T)}}]);
//# sourceMappingURL=69.8416129e.chunk.js.map