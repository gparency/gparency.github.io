(this["webpackJsonplt-app"]=this["webpackJsonplt-app"]||[]).push([[81],{951:function(e,s,t){"use strict";t.r(s);var a=t(3),o=t(9),i=t(8),n=t(17),c=t(12),l=t(11),r=t(0),p=t.n(r),m=t(6),g=t(23),h=t(825),u=t(255),d=t(50),v=t(164),S=t(26),Q=t.n(S),b=t(87),k=t.n(b),E=t(841),f=t(72),D=t.n(f),T=t(34),N=t.n(T),M=t(88),B=t(2),y=function(e){Object(c.a)(t,e);var s=Object(l.a)(t);function t(e){var i;return Object(o.a)(this,t),(i=s.call(this,e)).toggleToggle=function(){i.setState({toggle:!i.state.toggle},(function(){if(this.state.toggle||sessionStorage.setItem("mq_broker_active_banker_id",0),sessionStorage.setItem("MQB_toggle",this.state.toggle),this.state.isSearchActive||this.state.search){var e=this.state.search.match(/\w+/g),s="";e.forEach((function(t,a){e.length-1===a?s+=t:s+=t+"+"})),this.props.actions.search(s,this.state.toggle?"bank":"deal")}else this.loadDeals()}))},i.searchChange=function(e){var s=e.target.value;i.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{search:s,isSearchActive:!!s.length})}))},i.onSubmitSearch=function(e){e.preventDefault();var s=i.state,t=s.search,a=s.toggle;if(sessionStorage.setItem("mq_broker_search",t),t.length){var o=t.match(/\w+/g),n="";o.forEach((function(e,s){o.length-1===s?n+=e:n+=e+"+"})),i.props.actions.search(n,a?"bank":"deal")}else i.loadDeals()},i.state={isSearchActive:!1,toggle:!1!==sessionStorage.getItem("MQB_toggle")&&"false"!==sessionStorage.getItem("MQB_toggle"),search:sessionStorage.getItem("mq_broker_search")?sessionStorage.getItem("mq_broker_search"):""},i.routeToMissingQuotesByBroker=i.routeToMissingQuotesByBroker.bind(Object(n.a)(i)),i}return Object(i.a)(t,[{key:"componentDidMount",value:function(){if(this.props.navActions.updateNavTitle("Missing Quotes"),sessionStorage.getItem("MQB_toggle")||sessionStorage.setItem("MQB_toggle",this.state.toggle),this.state.search&&this.state.search.length){var e=this.state.search.match(/\w+/g),s="";e.forEach((function(t,a){e.length-1===a?s+=t:s+=t+"+"})),this.props.actions.search(s,"true"===sessionStorage.getItem("MQB_toggle")?"bank":"deal")}else this.state.search.length?!1===sessionStorage.getItem("MQB_toggle")&&this.setState({toggle:!1},(function(){this.loadDeals()})):this.loadDeals()}},{key:"scrollToContainer",value:function(){this.props.comps.previousScrollPos&&this.props.comps.previousScrollPos.length&&(window.scrollTo(0,this.props.comps.previousScrollPos[this.props.comps.previousScrollPos.length-1]),this.props.compsActions.resetScrollPosition())}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var s=this;if(this.props.missingQuotes.loading&&!e.missingQuotes.loading){if(!e.missingQuotes.loading){if(this.props.comps.previousScrollPos&&this.props.comps.previousScrollPos.length){var t=this.props.comps.previousScrollPos;window.scrollTo(0,t[t.length-1])}setTimeout((function(){s.props.compsActions.resetScrollPosition()}),600)}setTimeout((function(){return s.scrollToContainer()}),0)}}},{key:"loadDeals",value:function(){this.props.actions.loadMissingQuotesbyBank(this.state.toggle?"bank":"deal")}},{key:"openDealDD",value:function(e){this.props.compsActions.setPageAndScrollPos("/missingQuotesbroker",window.scrollY),B.f.go("/MQB-deal-details/".concat(e,"/bank-quotes"))}},{key:"openBankDD",value:function(e,s){sessionStorage.setItem("mq_broker_active_banker_id",s),this.props.compsActions.setPageAndScrollPos("/missingQuotesbroker",window.scrollY),B.f.go("/MQB-deal-details/".concat(e,"/bank-quotes"))}},{key:"routeToMissingQuotesByBroker",value:function(e,s){window.open("/missingQuotesBrokerByBroker/".concat(s,"/").concat(e))}},{key:"render",value:function(){var e=window.isNativeApp||window.matchMedia("(display-mode: standalone)").matches||window.innerWidth<901,s=null;return this.props.missingQuotes.quotePassSuccessToast&&(s=p.a.createElement(M.a,{closeToast:this.props.actions.closeMQDealPassSuccessToast,delay:6e3},p.a.createElement("div",{className:"success-message"},p.a.createElement("p",null,"The deal has successfully been passed"),p.a.createElement(N.a,{variant:"flat",onClick:this.props.actions.closeMQDealPassSuccessToast},"Done")))),this.props.missingQuotes.quoteSnoozeSuccessToast&&(s=p.a.createElement(M.a,{closeToast:this.props.actions.closeMQSnoozeSuccessToast,delay:6e3},p.a.createElement("div",{className:"success-message"},p.a.createElement("p",null,this.props.missingQuotes.message),p.a.createElement(N.a,{variant:"flat",onClick:this.props.actions.closeMQSnoozeSuccessToast},"Done")))),this.props.missingQuotes.quoteIrrelevantSuccessToast&&(s=p.a.createElement(M.a,{closeToast:this.props.actions.closeMQIrrelevantSuccessToast,delay:6e3},p.a.createElement("div",{className:"success-message"},p.a.createElement("p",null,"The deal has successfully been marked irrelevant"),p.a.createElement(N.a,{variant:"flat",onClick:this.props.actions.closeMQIrrelevantSuccessToast},"Done")))),this.props.mq.toast&&this.props.mq.toast.show&&(s=p.a.createElement(M.a,{closeToast:this.props.missingQuotesActions.closeToast,delay:6e3},p.a.createElement("div",{className:"success-message"},p.a.createElement("p",null,this.props.mq.toast.message),p.a.createElement(N.a,{variant:"flat",onClick:this.props.missingQuotesActions.closeToast},this.props.mq.toast.success?"Done":"Dismiss")))),this.props.missingQuotes.errorMQBToast&&(s=p.a.createElement(M.a,{closeToast:this.props.actions.closeUpdateMQBToast,delay:6e3},p.a.createElement("div",{className:"success-message"},p.a.createElement("p",null,this.props.missingQuotes.message),p.a.createElement(N.a,{variant:"flat",onClick:this.props.actions.closeUpdateMQBToast},"Done")))),this.props.missingQuotes.updateNoteModalSuccess&&(s=p.a.createElement(M.a,{closeToast:this.props.actions.closeUpdateNoteMQModalToast,delay:6e3},p.a.createElement("div",{className:"success-message"},p.a.createElement("p",null,this.props.missingQuotes.message),p.a.createElement(N.a,{variant:"flat",onClick:this.props.actions.closeUpdateNoteMQModalToast},"Done")))),this.props.missingQuotes.updateQTSStarModal&&(s=p.a.createElement(M.a,{closeToast:this.props.actions.closeQTSStarModalToast,delay:6e3},p.a.createElement("div",{className:"success-message"},p.a.createElement("p",null,this.props.missingQuotes.message),p.a.createElement(N.a,{variant:"flat",onClick:this.props.actions.closeQTSStarModalToast},"Done")))),p.a.createElement("div",{className:"mq-broker-page"},e?p.a.createElement(p.a.Fragment,null,p.a.createElement(Q.a,{className:"mq-search-bar"},p.a.createElement(k.a,{xs:"12"},p.a.createElement("div",{className:"search-container"},p.a.createElement("form",{className:"search-form",onSubmit:this.onSubmitSearch},p.a.createElement("img",{id:"search-icon-small",src:"/images/icons/search.png",alt:"search"}),p.a.createElement("input",{onChange:this.searchChange,value:this.state.search,className:"input",type:"text",placeholder:"Search by bank, banker, broker, client, deal name or address"}))))),p.a.createElement(Q.a,{className:"mq-tab-bar sub-header"},p.a.createElement(k.a,{xs:"12"},p.a.createElement("ul",{className:"mq-nav"},p.a.createElement("li",null,p.a.createElement("span",{className:this.state.toggle?void 0:"header-active-link",onClick:this.toggleToggle},"Deal")),p.a.createElement("li",null,p.a.createElement("span",{className:this.state.toggle?"header-active-link":void 0,onClick:this.toggleToggle},"Bank")))))):p.a.createElement(Q.a,{className:"sub-header"},p.a.createElement("div",{className:"mq-broker-subheader nav-search-sub-header"},p.a.createElement(Q.a,null,p.a.createElement(k.a,{lg:"6"},p.a.createElement("div",{className:"mq-broker-toggle"},p.a.createElement("p",{className:this.state.toggle?"":"active"},"Deal"),p.a.createElement("div",{className:"toggle"},p.a.createElement("input",{type:"checkbox",id:"toggle",checked:this.state.toggle,className:"cbx hidden",onChange:this.toggleToggle}),p.a.createElement("label",{htmlFor:"toggle",className:"lbl"})),p.a.createElement("p",{className:this.state.toggle?"active":""},"Bank"))),p.a.createElement(k.a,{lg:"6"},p.a.createElement("form",{className:"search-container",onSubmit:this.onSubmitSearch},p.a.createElement("div",{className:"search-form"},p.a.createElement("img",{id:"search-icon-small",src:"/images/icons/search.png",alt:"search"}),p.a.createElement("input",{placeholder:"Search by bank, banker, broker, client, deal name or address",className:"input contact-input",type:"text",value:this.state.search,onChange:this.searchChange,style:{width:"100%"},ref:"searchBox"}))))))),this.props.missingQuotes.loading?p.a.createElement(D.a,{className:"loading-modal",isOpen:this.props.missingQuotes.loading,ariaHideApp:!1,contentLabel:"Modal",shouldCloseOnOverlayClick:!1},p.a.createElement("div",{className:this.props.missingQuotes.loading?"centered-spinner":"hidden"},p.a.createElement("img",{src:"/images/icons/spin.svg",alt:"spin",className:"loading-spinner"}))):p.a.createElement(E.a,{toggle:this.state.toggle,noQuotes:this.props.missingQuotes.noQuotes,noSearchQuotes:this.props.missingQuotes.noSearchQuotes,isSearchDeal:this.props.missingQuotes.isSearchDeal,quotes:this.props.missingQuotes.missingQuotes,authentication:JSON.parse(localStorage.getItem("data")),isSearchActive:this.state.isSearchActive,passDeal:this.props.actions.passDeal,snoozeDeal:this.props.actions.snoozeDeal,irrelevantDeal:this.props.actions.irrelevantDeal,submitNoteModal:this.props.actions.updateNote,submitDealNoteModal:this.props.actions.updateDealNote,noAdminViewData:this.props.missingQuotes.noAdminViewData,localAdminBankId:this.props.missingQuotes.bank_id,loadingAdminData:this.props.missingQuotes.loadingAdminData,getAdminViewData:this.props.actions.getAdminViewData,removeAdminViewData:this.props.actions.removeAdminViewData,getContactFullInfo:this.props.actions.getFullContactInfo,updateDealQTSStar:this.props.actions.updateDealQTSStar,updateBankQTSStar:this.props.actions.updateBankQTSStar,setPageAndScrollPos:this.props.compsActions.setPageAndScrollPos,contact:this.props.missingQuotes.contact,loadingContact:this.props.missingQuotes.loadingContact,noContact:this.props.missingQuotes.noContact,routeToMissingQuotesByBroker:this.routeToMissingQuotesByBroker,openBankDD:this.openBankDD.bind(this),openDealDD:this.openDealDD.bind(this)}),s)}}]),t}(p.a.Component);s.default=Object(m.b)((function(e){return{missingQuotes:e.missingQuotesBroker,mq:e.missingQuotes,title:e.navTitle,comps:e.comps}}),(function(e){return{actions:Object(g.b)(h,e),missingQuotesActions:Object(g.b)(u,e),navActions:Object(g.b)(d,e),compsActions:Object(g.b)(v,e)}}))(y)}}]);
//# sourceMappingURL=81.821e8853.chunk.js.map