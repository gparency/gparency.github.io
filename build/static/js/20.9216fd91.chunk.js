(this["webpackJsonplt-app"]=this["webpackJsonplt-app"]||[]).push([[20],{779:function(e,a,t){"use strict";var n=t(9),l=t(8),s=t(17),c=t(12),r=t(11),o=t(0),i=t.n(o),m=t(72),p=t.n(m),d=t(38),u=t.n(d),h=t(34),E=t.n(h),v=function(e){Object(c.a)(t,e);var a=Object(r.a)(t);function t(e){var l;return Object(n.a)(this,t),(l=a.call(this,e)).state={rating:l.props.deal_rating},l.onRadioChange=l.onRadioChange.bind(Object(s.a)(l)),l}return Object(l.a)(t,[{key:"onRadioChange",value:function(e){this.setState({rating:e.currentTarget.value?parseInt(e.currentTarget.value,10):0})}},{key:"render",value:function(){var e=this;return i.a.createElement(p.a,{className:"deal-rating-modal",ariaHideApp:!1,contentLabel:"Modal",isOpen:this.props.isOpen,onRequestClose:function(a){return e.props.updateRating(e.state.rating,a)},onAfterOpen:this.props.onAfterOpen,style:{content:{margin:"auto"}},shouldCloseOnOverlayClick:!0},i.a.createElement(u.a,{className:"deal-rating-modal-form"},i.a.createElement("i",{className:"material-icons modal-exit",onClick:function(a){return e.props.updateRating(e.state.rating,a)}},"close"),i.a.createElement("h4",{className:"change-rating-header"},"Forecast"),i.a.createElement("div",{className:"deal-ratings-container"},i.a.createElement("input",{className:"radio-input",type:"radio",name:"1",id:"radio1",checked:1===this.state.rating,onChange:this.onRadioChange,value:1}),i.a.createElement("label",{className:"radio-label label-one",htmlFor:"radio1"},"1"),i.a.createElement("input",{className:"radio-input",type:"radio",name:"2",id:"radio2",checked:2===this.state.rating,onChange:this.onRadioChange,value:2}),i.a.createElement("label",{className:"radio-label label-two",htmlFor:"radio2"},"2"),i.a.createElement("input",{className:"radio-input",type:"radio",name:"3",id:"radio3",checked:3===this.state.rating,onChange:this.onRadioChange,value:3}),i.a.createElement("label",{className:"radio-label label-three",htmlFor:"radio3"},"3")),i.a.createElement("div",null,i.a.createElement(E.a,{variant:"flat",className:"deal-rating-modal-done",onClick:function(a){return e.props.updateRating(e.state.rating,a)}},"Done"))))}}]),t}(i.a.Component);a.a=v},780:function(e,a,t){"use strict";t.d(a,"a",(function(){return E}));var n=t(9),l=t(8),s=t(12),c=t(11),r=t(0),o=t.n(r),i=t(72),m=t.n(i),p=t(38),d=t.n(p),u=t(34),h=t.n(u),E=function(e){Object(s.a)(t,e);var a=Object(c.a)(t);function t(e){var l;return Object(n.a)(this,t),(l=a.call(this,e)).state={check_all:!1,forecast_reviewed:null,ip_date_reviewed:null,notes_reviewed:null},l}return Object(l.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({check_all:e.allReviewed,forecast_reviewed:e.forecast_reviewed,ip_date_reviewed:e.ip_date_reviewed,notes_reviewed:e.notes_reviewed})}},{key:"checkHandler",value:function(e){var a=this;e.stopPropagation(),"check_all"===e.target.id?e.target.checked?this.setState({check_all:!0,forecast_reviewed:null===this.props.forecast_reviewed?"touched":this.props.forecast_reviewed,ip_date_reviewed:null===this.props.ip_date_reviewed?"touched":this.props.ip_date_reviewed,notes_reviewed:null===this.props.notes_reviewed?"touched":this.props.notes_reviewed}):this.setState({check_all:!1,forecast_reviewed:null!=this.props.forecast_reviewed?this.props.forecast_reviewed:null,ip_date_reviewed:null!=this.props.ip_date_reviewed?this.props.ip_date_reviewed:null,notes_reviewed:null!=this.props.notes_reviewed?this.props.notes_reviewed:null}):this.setState({[e.target.id]:!0===e.target.checked?"touched":null},(function(){var e=null!=a.state.forecast_reviewed&&null!=a.state.ip_date_reviewed&&null!=a.state.notes_reviewed;a.setState({check_all:e})}))}},{key:"updateDealReview",value:function(e){this.props.updateDealReview(this.state.forecast_reviewed,this.state.ip_date_reviewed,this.state.notes_reviewed),this.props.onRequestClose(e)}},{key:"cancel",value:function(e){this.setState({check_all:!1,forecast_reviewed:this.props.forecast_reviewed,ip_date_reviewed:this.props.ip_date_reviewed,notes_reviewed:this.props.notes_reviewed}),this.props.onRequestClose(e)}},{key:"render",value:function(){var e=this;return o.a.createElement(m.a,{className:"deal-rating-modal deal-review-modal",ariaHideApp:!1,contentLabel:"Modal",isOpen:this.props.isOpen,onRequestClose:function(a){return e.props.onRequestClose(a)},onAfterOpen:this.props.onAfterOpen,shouldCloseOnOverlayClick:!0},o.a.createElement(d.a,null,o.a.createElement("i",{className:"material-icons modal-exit",onClick:function(a){return e.props.onRequestClose(a)}},"close"),o.a.createElement("h4",{className:"change-rating-header"},"Review"),o.a.createElement("div",{className:"rkmd-checkbox checkbox-ripple"},o.a.createElement("label",{className:"input-checkbox checkbox-lightBlue"},o.a.createElement("input",{type:"checkbox",id:"check_all",checked:this.state.check_all,onChange:function(a){return e.checkHandler(a)},disabled:this.props.allReviewed}),o.a.createElement("span",{className:"checkbox"}),o.a.createElement("span",{className:"ripple"})),o.a.createElement("p",{htmlFor:"check_all",className:"label"},"Check All")),o.a.createElement("div",{className:"rkmd-checkbox checkbox-ripple"},o.a.createElement("label",{className:"input-checkbox checkbox-lightBlue"},o.a.createElement("input",{type:"checkbox",id:"forecast_reviewed",checked:null!=this.state.forecast_reviewed,onChange:function(a){return e.checkHandler(a)},disabled:null!=this.props.forecast_reviewed}),o.a.createElement("span",{className:"checkbox"}),o.a.createElement("span",{className:"ripple"})),o.a.createElement("p",{htmlFor:"forecast_reviewed",className:"label"},"Forecast"),o.a.createElement("p",{className:"bold-text review-modal-detail"},this.props.forecast)),o.a.createElement("div",{className:"rkmd-checkbox checkbox-ripple"},o.a.createElement("label",{className:"input-checkbox checkbox-lightBlue"},o.a.createElement("input",{type:"checkbox",id:"ip_date_reviewed",checked:null!=this.state.ip_date_reviewed,onChange:function(a){return e.checkHandler(a)},disabled:null!=this.props.ip_date_reviewed}),o.a.createElement("span",{className:"checkbox"}),o.a.createElement("span",{className:"ripple"})),o.a.createElement("p",{htmlFor:"ip_date_reviewed",className:"label"},"Expected IP Date"),o.a.createElement("p",{className:"bold-text review-modal-detail"},this.props.ip_date)),o.a.createElement("div",{className:"rkmd-checkbox checkbox-ripple"},o.a.createElement("label",{className:"input-checkbox checkbox-lightBlue"},o.a.createElement("input",{type:"checkbox",id:"notes_reviewed",checked:null!=this.state.notes_reviewed,onChange:function(a){return e.checkHandler(a)},disabled:null!=this.props.notes_reviewed}),o.a.createElement("span",{className:"checkbox"}),o.a.createElement("span",{className:"ripple"})),o.a.createElement("p",{htmlFor:"notes_reviewed",className:"label"},"Last Updated Note"),o.a.createElement("p",{className:"review-modal-note"},this.props.notes)),o.a.createElement("div",{className:"modal-btns"},o.a.createElement(h.a,{variant:"flat",onClick:function(a){return e.cancel(a)}},"Cancel"),o.a.createElement(h.a,{variant:"flat",onClick:function(a){return e.updateDealReview(a)},disabled:this.props.allReviewed},"Save"))))}}]),t}(o.a.Component)},797:function(e,a,t){"use strict";var n=t(10),l=t.n(n),s=t(19),c=t(9),r=t(8),o=t(17),i=t(12),m=t(11),p=t(0),d=t.n(p),u=t(26),h=t.n(u),E=t(87),v=t.n(E),f=t(210),k=t.n(f),g=t(165),N=t(779),_=t(780),b=t(65),w=t(39),C=t.n(w),y=t(2),O=t(113),x=t(25),R=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).dealClick=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"property-details";e.stopPropagation();var t=e.target.offsetParent.className;if(!t.includes("Modal")&&!t.includes("react-date-picker")&&!t.includes("checkbox")){var l=n.props.deal,s=l.status_string,c=l.deal_id,r=l.total_violations,o=l.additional_properties;n.props.clickFunction(s||"PW",c,r,o,a)}},n.state={modalOpen:!1,modalRatingOpen:!1,modalReviewOpen:!1,datePickerOpen:!1,showMoreBrokers:!1},n.ref=d.a.createRef(),n.openModal=n.openModal.bind(Object(o.a)(n)),n.closeModal=n.closeModal.bind(Object(o.a)(n)),n.openRatingModal=n.openRatingModal.bind(Object(o.a)(n)),n.updateRating=n.updateRating.bind(Object(o.a)(n)),n.openReviewModal=n.openReviewModal.bind(Object(o.a)(n)),n.closeReviewModal=n.closeReviewModal.bind(Object(o.a)(n)),n.updateDealReview=n.updateDealReview.bind(Object(o.a)(n)),n}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.deal.deal_id===Object(x.a)("deal_id")&&this.ref.current.scrollIntoView({block:"center",inline:"center"})}},{key:"updateRating",value:function(){var e=Object(s.a)(l.a.mark((function e(a,t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),this.setState({modalRatingOpen:!1}),e.next=4,this.props.updateRating(this.props.deal.deal_id,a);case 4:this.updateDealReview("updated",this.props.deal.ip_date_reviewed,this.props.deal.notes_reviewed);case 5:case"end":return e.stop()}}),e,this)})));return function(a,t){return e.apply(this,arguments)}}()},{key:"openModal",value:function(e){e.stopPropagation(),this.props.deal.contact_id&&(this.props.getFullContactInfo(this.props.deal.contact_id),this.setState({modalOpen:!0}))}},{key:"openRatingModal",value:function(e){e.stopPropagation(),this.setState({modalRatingOpen:!0})}},{key:"getRatingColor",value:function(e){return 0===e?"circle-background green-circle":1===e?"circle-background yellow-circle":2===e?"circle-background pink-circle":3===e?"circle-background orange-circle":void 0}},{key:"afterOpenModal",value:function(){}},{key:"closeModal",value:function(e){e.stopPropagation(),this.setState({modalOpen:!1})}},{key:"openReviewModal",value:function(e){e.stopPropagation(),this.setState({modalReviewOpen:!0})}},{key:"closeReviewModal",value:function(e){e.stopPropagation(),this.setState({modalReviewOpen:!1})}},{key:"updateDealReview",value:function(e,a,t){this.props.deal.qts_placer&&this.props.updateDealReview(this.props.deal.deal_id,e,a,t)}},{key:"changeExpectedIPDate",value:function(e){this.props.changeExpectedIPDate(this.props.deal.deal_id,e),this.updateDealReview(this.props.deal.forecast_reviewed,"updated",this.props.deal.notes_reviewed)}},{key:"showDatePicker",value:function(e){e.stopPropagation(),this.setState({datePickerOpen:!0})}},{key:"showMoreBrokersToggle",value:function(e){e.stopPropagation(),this.setState({showMoreBrokers:!this.state.showMoreBrokers})}},{key:"render",value:function(){var e=this,a=this.props,t=a.deal,n=t.deal_id,l=t.deal_status,s=t.status_string,c=t.property_type_id,r=t.broker_starred,o=t.deal_name,i=t.city_state,m=t.property_type,p=t.property_address,u=t.additional_properties,E=t.full_name,f=t.contact_id,w=t.expected_inprocess_date,x=t.loan_amount,R=t.brokers,S=t.notes,M=t.last_notes_by,A=t.notes_date,D=t.notes_due_date,P=t.note_count,j=t.deal_rating,I=t.forecast_reviewed,B=t.ip_date_reviewed,F=t.notes_reviewed,T=t.qts_placer,L=t.TotalComps,q=t.total_complaints,H=t.total_violations,V=t.inNYC,U=a.contact,W=a.loadingContact,Y=a.isSearchPage,z="",J="",G=0,K=0;return R&&R.forEach((function(e){e.broker_name&&(e.broker_roles.includes("Originator")?(G>=1&&(z+=", "),z+=e.broker_name,G++):(K>=1&&(J+=", "),J+=e.broker_name,K++))})),d.a.createElement("div",{ref:this.ref,className:"pw-deal"},d.a.createElement("div",{className:"panel mui-panel",onClick:function(a){return e.dealClick(a)}},d.a.createElement(h.a,{className:"panel-heading"},d.a.createElement(v.a,{md:"10",sm:"10",xs:"9",key:n},d.a.createElement("div",{className:"deal-name"},d.a.createElement("p",{className:"panel-info-value property-title"},d.a.createElement("b",null,d.a.createElement("span",null,o||"")),d.a.createElement("span",{className:"deal-id"},"ID ",n),(!Y||l===O.a.PW)&&d.a.createElement("span",{onClick:function(a){return e.openRatingModal(a)},className:this.getRatingColor.bind(this)(j)},j),Y&&d.a.createElement("span",{className:"deal-status-tag"},s)))),d.a.createElement(v.a,{md:"2",sm:"2",xs:"3"},d.a.createElement("div",{onClick:function(a){return e.props.updateStar(n,r,a)},className:"deal-star"},d.a.createElement("p",null,1===r?d.a.createElement("span",{className:"ip-quote-star"},d.a.createElement("i",{className:"material-icons star-icon-orange"},"star")):d.a.createElement("span",{className:"ip-quote-star"},d.a.createElement("i",{className:"material-icons star-icon-gray"},"star")))),!Y&&T&&d.a.createElement("div",{className:"r-icon",onClick:function(a){return e.openReviewModal(a)}},null!=I&&null!=B&&null!=F?d.a.createElement("img",{src:"/images/icons/review-icon-green.png",alt:"review-icon-green"}):d.a.createElement("img",{src:"/images/icons/review-icon-gray.png",alt:"review-icon-gray"})))),d.a.createElement(h.a,{className:"panel-body"},d.a.createElement(h.a,null,d.a.createElement(v.a,{md:"4"},d.a.createElement("div",null,d.a.createElement("p",{className:"small-title deal-info-title"},"Address"),d.a.createElement("p",{className:"panel-info-value"},p||""),d.a.createElement("p",{className:"panel-info-value"},i||"")),d.a.createElement("div",null,d.a.createElement("p",{className:"panel-info-value"},d.a.createElement("i",{className:"orange-text orange-text-hover pointer"},0===u?null:1===u?"1 other property":u+" other properties")))),d.a.createElement(v.a,{onClick:function(a){return e.openModal(a)},md:"2"},d.a.createElement("p",{className:"small-title deal-info-title"},"Name of Client"),d.a.createElement("p",{className:f?"panel-info-value client-name":"panel-info-value"},E||"N/A")),d.a.createElement(v.a,{md:"2"},d.a.createElement("p",{className:"small-title deal-info-title"},"Expected IP Date"),d.a.createElement("div",{className:"expected-ip"},l===O.a.CL?d.a.createElement("p",{className:"panel-info-value client-name"},w||"N/A"):null!==w&&C()(w).isValid()||this.state.datePickerOpen?d.a.createElement(b.a,{allowClear:!1,dateValue:w,update:function(a){return e.changeExpectedIPDate(a)}}):d.a.createElement("p",{className:"panel-info-value client-name",onClick:function(a){return e.showDatePicker(a)}},"+ add date"))),d.a.createElement(v.a,{md:"2"},d.a.createElement("div",null,d.a.createElement("p",{className:"small-title deal-info-title"},"Property Type"),d.a.createElement("p",{className:"panel-info-value"},m||"N/A"))),d.a.createElement(v.a,{md:"2"},d.a.createElement("div",null,d.a.createElement("p",{className:"small-title deal-info-title"},"Loan Amount"),d.a.createElement("p",{className:"panel-info-value"},x||"N/A")))),d.a.createElement(h.a,{className:"brokers-container"},d.a.createElement("p",{className:"small-title deal-info-title"},"Brokers"),d.a.createElement("p",{className:"bold-text"},z),d.a.createElement("div",{className:"brokers-list"},d.a.createElement("p",{className:"xs-text"},J.length>150&&!this.state.showMoreBrokers?J.substring(0,J.substring(0,150).lastIndexOf(", "))+"...":J,J.length>150?d.a.createElement("span",{className:"orange-text",onClick:function(a){return e.showMoreBrokersToggle(a)}},this.state.showMoreBrokers?"Show Less":"Show More"):""))),d.a.createElement(h.a,{className:"note-container"},d.a.createElement(v.a,{md:"10",key:n},d.a.createElement("div",null,null!=S?d.a.createElement("div",null,d.a.createElement("p",{className:"small-title deal-info-title notes-title"},d.a.createElement("i",null,M," on ",A)),d.a.createElement("p",{className:"note"},S)):" "))),C()(D).isValid()?d.a.createElement(h.a,null,d.a.createElement("p",{className:"small-title notes-title"},"Remind me about this on"),d.a.createElement("div",{className:"remind-me"},d.a.createElement("p",null,d.a.createElement("i",{className:"material-icons"},"date_range"),C()(D).format("L")),d.a.createElement("p",null,d.a.createElement("i",{className:"material-icons"},"access_time"),C()(D).format("LT")))):" ",this.state.modalOpen&&d.a.createElement(g.a,{isOpen:!0,onRequestClose:this.closeModal,onAfterOpen:this.afterOpenModal,contact:U,name:E,key:n,noContact:Object(y.w)(U),loading:W}),d.a.createElement(N.a,{isOpen:this.state.modalRatingOpen,onAfterOpen:this.afterOpenModal,deal_rating:j,updateRating:this.updateRating}),d.a.createElement(_.a,{allReviewed:I&&B&&F,forecast:j,forecast_reviewed:I,ip_date:w,ip_date_reviewed:B,notes:S,notes_reviewed:F,isOpen:this.state.modalReviewOpen,onRequestClose:this.closeReviewModal,updateDealReview:this.updateDealReview}),d.a.createElement(k.a,null),d.a.createElement(h.a,{className:"note-options"},l!==O.a.CL&&d.a.createElement("p",{className:"orange-text xs-text inline-block",onClick:function(a){return e.props.addDealNoteClick("PW",n,H,u,a)}},d.a.createElement("i",{className:"material-icons icon-left medium-text middle"},"add"),d.a.createElement("i",null,"Add Note")),d.a.createElement("div",{className:"view-all",onClick:function(a){return e.dealClick(a,"notes")}},d.a.createElement("p",null,"View All Notes"),d.a.createElement("p",null,P))),d.a.createElement(k.a,null)),d.a.createElement(h.a,{className:"comps-row"},d.a.createElement("div",{onClick:function(a){return e.props.compsClick(V,p,i,c,a)}},d.a.createElement("div",{className:null!==H?"border-right":""},d.a.createElement("p",{className:"violation-value comps"},Object(y.q)(L),d.a.createElement("span",null,"Comps")))),d.a.createElement("div",{className:null!==H?"comps-row-violations":"hidden",onClick:function(a){return e.dealClick(a,"violations")}},d.a.createElement("div",null,d.a.createElement("p",{className:"violation-value"},H,d.a.createElement("span",null,"Violations"))),d.a.createElement("div",null,d.a.createElement("p",{className:"violation-value"},q,d.a.createElement("span",null,"Complaints")))))))}}]),t}(d.a.Component);a.a=R},816:function(e,a,t){"use strict";var n=t(9),l=t(8),s=t(17),c=t(12),r=t(11),o=t(0),i=t.n(o),m=t(26),p=t.n(m),d=t(87),u=t.n(d),h=t(210),E=t.n(h),v=t(165),f=t(39),k=t.n(f),g=t(2),N=t(113),_=t(25),b=function(e){Object(c.a)(t,e);var a=Object(r.a)(t);function t(e){var l;return Object(n.a)(this,t),(l=a.call(this,e)).dealClick=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"property-details";e.stopPropagation();var t=e.target.offsetParent.className;if(!t.includes("Modal")&&!t.includes("react-date-picker")&&!t.includes("checkbox")){var n=l.props.deal,s=n.status_string,c=n.deal_id,r=n.total_violations,o=n.additional_properties;l.props.clickFunction(s||"UW",c,r,o,a)}},l.state={modalOpen:!1,modalRatingOpen:!1,datePickerOpen:!1,showMoreBrokers:!1},l.ref=i.a.createRef(),l.openModal=l.openModal.bind(Object(s.a)(l)),l.closeModal=l.closeModal.bind(Object(s.a)(l)),l}return Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.deal.deal_id===Object(_.a)("deal_id")&&this.ref.current.scrollIntoView({block:"center",inline:"center"})}},{key:"openModal",value:function(e){e.stopPropagation(),this.props.deal.contact_id&&(this.props.getFullContactInfo(this.props.deal.contact_id),this.setState({modalOpen:!0}))}},{key:"afterOpenModal",value:function(){}},{key:"closeModal",value:function(e){e.stopPropagation(),this.setState({modalOpen:!1})}},{key:"showDatePicker",value:function(e){e.stopPropagation(),this.setState({datePickerOpen:!0})}},{key:"showMoreBrokersToggle",value:function(e){e.stopPropagation(),this.setState({showMoreBrokers:!this.state.showMoreBrokers})}},{key:"render",value:function(){var e=this,a=this.props,t=a.deal,n=t.deal_id,l=t.deal_status,s=t.status_string,c=t.property_type_id,r=t.broker_starred,o=t.deal_name,m=t.city_state,d=t.property_type,h=t.property_address,f=t.additional_properties,_=t.full_name,b=t.contact_id,w=t.loan_amount,C=t.brokers,y=t.notes,O=t.last_notes_by,x=t.notes_date,R=t.notes_due_date,S=t.note_count,M=t.TotalComps,A=t.total_complaints,D=t.total_violations,P=t.inNYC,j=a.contact,I=a.loadingContact,B=a.isSearchPage,F="",T="",L=0,q=0;return C&&C.forEach((function(e){e.broker_name&&(e.broker_roles.includes("Originator")?(L>=1&&(F+=", "),F+=e.broker_name,L++):(q>=1&&(T+=", "),T+=e.broker_name,q++))})),i.a.createElement("div",{ref:this.ref,className:"pw-deal"},i.a.createElement("div",{className:"panel mui-panel",onClick:function(a){return e.dealClick(a)}},i.a.createElement(p.a,{className:"panel-heading"},i.a.createElement(u.a,{md:"10",sm:"10",xs:"9",key:n},i.a.createElement("div",{className:"deal-name"},i.a.createElement("p",{className:"panel-info-value property-title"},i.a.createElement("b",null,i.a.createElement("span",null,o||"")),i.a.createElement("span",{className:"deal-id"},"ID ",n),B&&s&&i.a.createElement("span",{className:"deal-status-tag"},s)))),i.a.createElement(u.a,{md:"2",sm:"2",xs:"3"},i.a.createElement("div",{onClick:function(a){return e.props.updateStar(n,r,a)},className:"deal-star"},i.a.createElement("p",null,1===r?i.a.createElement("span",{className:"ip-quote-star"},i.a.createElement("i",{className:"material-icons star-icon-orange"},"star")):i.a.createElement("span",{className:"ip-quote-star"},i.a.createElement("i",{className:"material-icons star-icon-gray"},"star")))))),i.a.createElement(p.a,{className:"panel-body"},i.a.createElement(p.a,null,i.a.createElement(u.a,{md:"4"},i.a.createElement("div",null,i.a.createElement("p",{className:"small-title deal-info-title"},"Address"),i.a.createElement("p",{className:"panel-info-value"},h||""),i.a.createElement("p",{className:"panel-info-value"},m||"")),i.a.createElement("div",null,i.a.createElement("p",{className:"panel-info-value"},i.a.createElement("i",{className:"orange-text orange-text-hover pointer"},0===f?null:1===f?"1 other property":f+" other properties")))),i.a.createElement(u.a,{onClick:function(a){return e.openModal(a)},md:"2"},i.a.createElement("p",{className:"small-title deal-info-title"},"Name of Client"),i.a.createElement("p",{className:b?"panel-info-value client-name":"panel-info-value"},_||"N/A")),i.a.createElement(u.a,{md:"2"},i.a.createElement("div",null,i.a.createElement("p",{className:"small-title deal-info-title"},"Property Type"),i.a.createElement("p",{className:"panel-info-value"},d||"N/A"))),i.a.createElement(u.a,{md:"2"},i.a.createElement("div",null,i.a.createElement("p",{className:"small-title deal-info-title"},"Loan Amount"),i.a.createElement("p",{className:"panel-info-value"},w||"N/A")))),i.a.createElement(p.a,{className:"brokers-container"},i.a.createElement("p",{className:"small-title deal-info-title"},"Brokers"),i.a.createElement("p",{className:"bold-text"},F),i.a.createElement("div",{className:"brokers-list"},i.a.createElement("p",{className:"xs-text"},T.length>150&&!this.state.showMoreBrokers?T.substring(0,T.substring(0,150).lastIndexOf(", "))+"...":T,T.length>150?i.a.createElement("span",{className:"orange-text",onClick:function(a){return e.showMoreBrokersToggle(a)}},this.state.showMoreBrokers?"Show Less":"Show More"):""))),i.a.createElement(p.a,{className:"note-container"},i.a.createElement(u.a,{md:"10",key:n},i.a.createElement("div",null,null!=y?i.a.createElement("div",null,i.a.createElement("p",{className:"small-title deal-info-title notes-title"},i.a.createElement("i",null,O," on ",x)),i.a.createElement("p",{className:"note"},y)):" "))),k()(R).isValid()?i.a.createElement(p.a,null,i.a.createElement("p",{className:"small-title notes-title"},"Remind me about this on"),i.a.createElement("div",{className:"remind-me"},i.a.createElement("p",null,i.a.createElement("i",{className:"material-icons"},"date_range"),k()(R).format("L")),i.a.createElement("p",null,i.a.createElement("i",{className:"material-icons"},"access_time"),k()(R).format("LT")))):" ",this.state.modalOpen&&i.a.createElement(v.a,{isOpen:!0,onRequestClose:this.closeModal,onAfterOpen:this.afterOpenModal,contact:j,name:_,key:n,noContact:Object(g.w)(j),loading:I}),i.a.createElement(E.a,null),i.a.createElement(p.a,{className:"note-options"},l!==N.a.CL&&i.a.createElement("p",{className:"orange-text xs-text inline-block",onClick:function(a){return e.props.addDealNoteClick("UW",n,D,f,a)}},i.a.createElement("i",{className:"material-icons icon-left medium-text middle"},"add"),i.a.createElement("i",null,"Add Note")),i.a.createElement("div",{className:"view-all",onClick:function(a){return e.dealClick(a,"notes")}},i.a.createElement("p",null,"View All Notes"),i.a.createElement("p",null,S))),i.a.createElement(E.a,null)),i.a.createElement(p.a,{className:"comps-row"},i.a.createElement("div",{onClick:function(a){return e.props.compsClick(P,h,m,c,a)}},i.a.createElement("div",{className:null!==D?"border-right":""},i.a.createElement("p",{className:"violation-value comps"},Object(g.q)(M),i.a.createElement("span",null,"Comps")))),i.a.createElement("div",{className:null!==D?"comps-row-violations":"hidden",onClick:function(a){return e.dealClick(a,"violations")}},i.a.createElement("div",null,i.a.createElement("p",{className:"violation-value"},D,i.a.createElement("span",null,"Violations"))),i.a.createElement("div",null,i.a.createElement("p",{className:"violation-value"},A,i.a.createElement("span",null,"Complaints")))))))}}]),t}(i.a.Component);a.a=b},818:function(e,a,t){"use strict";var n=t(9),l=t(8),s=t(12),c=t(11),r=t(0),o=t.n(r),i=t(26),m=t.n(i),p=t(87),d=t.n(p),u=t(210),h=t.n(u),E=t(165),v=t(39),f=t.n(v),k=t(2),g=function(e){return o.a.createElement(d.a,{md:"3"},o.a.createElement("p",{className:"small-title deal-info-title"},e.title),o.a.createElement("p",{className:"panel-info-value"},e.value?e.value:"N/A"))},N=t(25),_=function(e){Object(s.a)(t,e);var a=Object(c.a)(t);function t(e){var l;return Object(n.a)(this,t),(l=a.call(this,e)).openContactModal=function(e,a){a.stopPropagation(),e&&(l.props.getFullContactInfo(e),l.setState({modalOpen:!0}))},l.dealClick=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"property-details";e.stopPropagation();var t=e.target.offsetParent.className;if(!t.includes("Modal")&&!t.includes("react-date-picker")&&!t.includes("checkbox")){var n=l.props.deal,s=n.deal_id,c=n.total_violations,r=n.additional_properties;l.props.clickFunction("IP",s,c,r,a)}},l.state={modalOpen:!1,showMoreBrokers:!1},l.ref=o.a.createRef(),l}return Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.deal.deal_id===Object(N.a)("deal_id")&&this.ref.current.scrollIntoView({block:"center",inline:"center"})}},{key:"closeContactModal",value:function(e){e.stopPropagation(),this.setState({modalOpen:!1})}},{key:"showMoreBrokersToggle",value:function(e){e.stopPropagation(),this.setState({showMoreBrokers:!this.state.showMoreBrokers})}},{key:"render",value:function(){var e=this,a=this.props,t=a.deal,n=t.deal_id,l=t.status_string,s=t.property_type_id,c=t.broker_starred,r=t.deal_name,i=t.city_state,p=t.property_type,u=t.property_address,v=t.additional_properties,N=t.full_name,_=t.contact_id,b=t.loan_amount,w=t.bank_name,C=t.banker_id,y=t.term,O=t.amortization,x=t.rate,R=t.expected_closing_date,S=t.brokers,M=t.notes,A=t.last_notes_by,D=t.notes_date,P=t.notes_due_date,j=t.note_count,I=t.TotalComps,B=t.total_complaints,F=t.total_violations,T=t.inNYC,L=a.contact,q=a.loadingContact,H=a.isSearchPage,V="",U="",W=0,Y=0;return S&&S.forEach((function(e){e.broker_name&&(e.broker_roles.includes("Originator")?(W>=1&&(V+=", "),V+=e.broker_name,W++):(Y>=1&&(U+=", "),U+=e.broker_name,Y++))})),o.a.createElement("div",{ref:this.ref,className:"ip-deal"},o.a.createElement("div",{className:"panel mui-panel",onClick:function(a){return e.dealClick(a)}},o.a.createElement(m.a,{className:"panel-heading"},o.a.createElement(d.a,{md:"10",sm:"10",xs:"9"},o.a.createElement("div",{className:"deal-name"},o.a.createElement("p",{className:"panel-info-value property-title"},o.a.createElement("b",null,r||""),o.a.createElement("span",{className:"deal-id"},"ID ",n),H&&o.a.createElement("span",{className:"deal-status-tag"},l)))),o.a.createElement(d.a,{md:"2",sm:"2",xs:"3"},o.a.createElement("div",{onClick:function(a){return e.props.updateStar(n,c,a)},className:"deal-star"},o.a.createElement("p",null,1===c?o.a.createElement("span",{className:"ip-quote-star"},o.a.createElement("i",{className:"material-icons star-icon-orange"},"star")):o.a.createElement("span",{className:"ip-quote-star"},o.a.createElement("i",{className:"material-icons star-icon-gray"},"star")))))),o.a.createElement(m.a,{className:"panel-body"},o.a.createElement(m.a,null,o.a.createElement(d.a,{md:"3"},o.a.createElement("div",null,o.a.createElement("p",{className:"small-title deal-info-title"},"Address"),o.a.createElement("p",{className:"panel-info-value"},u||""),o.a.createElement("p",{className:"panel-info-value"},i||"")),o.a.createElement("div",null,o.a.createElement("p",{className:"panel-info-value"},o.a.createElement("i",{className:"orange-text"},0===v?null:1===v?"1 other property":v+" other properties")))),o.a.createElement("div",null,o.a.createElement(d.a,{md:"3"},o.a.createElement("p",{className:"small-title deal-info-title"},"Property Type"),o.a.createElement("p",{className:"panel-info-value"},p||"N/A"))),o.a.createElement(d.a,{md:"3",onClick:function(a){return e.openContactModal(_,a)}},o.a.createElement("p",{className:"small-title deal-info-title"},"Name of Client"),o.a.createElement("p",{className:_?"panel-info-value client-name":"panel-info-value"},N||"N/A")),o.a.createElement("div",null,o.a.createElement(d.a,{md:"3"},o.a.createElement("p",{className:"small-title deal-info-title"},"Loan Amount"),o.a.createElement("p",{className:"panel-info-value"},b||"N/A")))),o.a.createElement("div",null,o.a.createElement(m.a,null,o.a.createElement(d.a,{md:"3",onClick:function(a){return e.openContactModal(C,a)}},o.a.createElement("p",{className:"small-title deal-info-title"},"Bank"),o.a.createElement("p",{className:"panel-info-value ".concat(w?"client-name":"")},w||"N/A")),o.a.createElement(g,{key:"2",title:"Term / Amortization",value:(y||"--")+" / "+(O||"--")}),o.a.createElement(g,{key:"1",title:"Rate",value:x}),o.a.createElement(g,{key:"4",title:"Expected Closing Date",value:R}))),o.a.createElement(m.a,{className:"brokers-container"},o.a.createElement("p",{className:"small-title deal-info-title"},"Brokers"),o.a.createElement("p",{className:"bold-text"},V),o.a.createElement("div",{className:"brokers-list"},o.a.createElement("p",{className:"xs-text"},U.length>155&&!this.state.showMoreBrokers?U.substring(0,U.substring(0,155).lastIndexOf(", "))+"...":U,U.length>150?o.a.createElement("span",{className:"orange-text",onClick:function(a){return e.showMoreBrokersToggle(a)}},this.state.showMoreBrokers?"Show Less":"Show More"):""))),o.a.createElement(m.a,{className:"note-container"},o.a.createElement(d.a,{md:"10",key:n},o.a.createElement("div",null,null!=M?o.a.createElement("div",null,o.a.createElement("p",{className:"small-title deal-info-title notes-title"},o.a.createElement("i",null,A," on ",D)),o.a.createElement("p",{className:"note"},M)):" "))),f()(P).isValid()?o.a.createElement(m.a,null,o.a.createElement("p",{className:"small-title notes-title"},"Remind me about this on"),o.a.createElement("div",{className:"remind-me"},o.a.createElement("p",null,o.a.createElement("i",{className:"material-icons"},"date_range"),f()(P).format("L")),o.a.createElement("p",null,o.a.createElement("i",{className:"material-icons"},"access_time"),f()(P).format("LT")))):" ",o.a.createElement(E.a,{isOpen:this.state.modalOpen,onRequestClose:function(a){return e.closeContactModal(a)},onAfterOpen:function(){},contact:L,noContact:Object(k.w)(L),loading:q}),o.a.createElement(h.a,null),o.a.createElement(m.a,{className:"note-options"},o.a.createElement("p",{className:"orange-text xs-text inline-block",onClick:function(a){return e.props.addDealNoteClick("IP",n,F,v,a)}},o.a.createElement("i",{className:"material-icons icon-left medium-text middle"},"add"),o.a.createElement("i",null,"Add Note")),o.a.createElement("div",{className:"view-all",onClick:function(a){return e.dealClick(a,"notes")}},o.a.createElement("p",null,"View All Notes"),o.a.createElement("p",null,j))),o.a.createElement(h.a,null)),o.a.createElement("div",null,o.a.createElement(m.a,null,o.a.createElement(d.a,{md:"12"},o.a.createElement(m.a,{className:"comps-row"},o.a.createElement("div",{onClick:function(a){return e.props.compsClick(T,u,i,s,a)}},o.a.createElement("div",{className:null!==F?"border-right":""},o.a.createElement("p",{className:"violation-value comps"},Object(k.q)(I),o.a.createElement("span",null,"Comps")))),o.a.createElement("div",{className:null!==F?"comps-row-violations":"hidden",onClick:function(a){return e.dealClick(a,"violations")}},o.a.createElement("div",null,o.a.createElement("p",{className:"violation-value"},F,o.a.createElement("span",null,"Violations"))),o.a.createElement("div",null,o.a.createElement("p",{className:"violation-value"},B,o.a.createElement("span",null,"Complaints"))))))))))}}]),t}(o.a.Component);a.a=_},966:function(e,a,t){"use strict";t.r(a);var n={};t.r(n),t.d(n,"searchDeals",(function(){return v})),t.d(n,"closeToast",(function(){return f}));var l=t(9),s=t(8),c=t(12),r=t(11),o=t(0),i=t.n(o),m=t(23),p=t(6),d=t(1),u=t(7),h=t(21),E=t(2);function v(e,a,t){return function(n){n({type:d.SEARCHING_DEALS}),Object(E.i)({url:"".concat(u.a.BASE_URL,"search-deals"),applyAuthHeader:!0,data:{search:e,page:a,only_mine:t},success:function(e){switch(e.status){case"E403":n(Object(h.tokenExpired)());break;default:e.data?n({type:d.LOAD_SEARCH_DEALS,data:e.data.data,next_page_url:e.data.next_page_url,current_page:e.data.current_page}):n({type:d.LOAD_SEARCH_DEALS,data:[],next_page_url:null,current_page:null})}}})}}function f(){return{type:d.CLOSE_SEARCH_DEALS_TOAST}}var k=t(25),g=t(26),N=t.n(g),_=t(80),b=t(15),w=function(e){var a=e.search,t=e.searchChange,n=e.previousPage,l=window.isNativeApp||window.matchMedia("(display-mode: standalone)").matches||window.innerWidth<901;return i.a.createElement(N.a,{className:"sub-header"},n&&i.a.createElement(b.a,{className:"back-arrow",to:n},i.a.createElement("img",{src:"/images/icons/arrow-left.png",alt:"arrow-left"})),i.a.createElement("div",{className:"nav-search-sub-header"},i.a.createElement("div",null,i.a.createElement("div",null),i.a.createElement("div",{className:"flex flex-center",style:{marginTop:"13px",marginLeft:"30px"}},i.a.createElement("div",{className:"search-container"},i.a.createElement("div",{className:"search-form"},i.a.createElement("img",{id:"search-icon-small",src:"/images/icons/search.png",alt:"search"}),i.a.createElement("input",{onChange:t,value:a,className:"input",type:"text",placeholder:l?"Search Deals...":"Search by Deal Name, Deal ID, Client Name, Broker..."}))),l&&i.a.createElement("div",{className:"info-icon-container"},i.a.createElement("i",{className:"material-icons",style:{color:"#fff",fontSize:"20px",marginTop:"-20px"}},"info"),i.a.createElement("span",{className:"info-tooltip"},"Search by Deal Name, Deal ID, Client Name, Broker...")),i.a.createElement("p",{onClick:function(){E.f.go("/search-deals?".concat(Object(_.a)({search:a,previous_page:n})))},className:"orange-text",style:{marginLeft:"16px",textAlign:"center",minWidth:"63px"}},"Search All")))))},C=t(3),y=t(34),O=t.n(y),x=t(45),R=t(167),S=t(164),M=t(797),A=t(818),D=t(816),P=t(104),j=t(258),I=t(88),B=function(e){Object(c.a)(t,e);var a=Object(r.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=a.call.apply(a,[this].concat(s))).state={showOnlyMine:!1},e.changeExpectedIPDate=function(a,t){e.props.dealsActions.updateExpectedIPDate(a,t,"SEARCH")},e.showOnlyMineToggle=function(){e.setState({showOnlyMine:!e.state.showOnlyMine},(function(){return e.props.loadSearchDeals(e.state.showOnlyMine)}))},e}return Object(s.a)(t,[{key:"dealClick",value:function(e,a,t,n,l){this.props.compsActions.setPageAndScrollPos(window.location.pathname+window.location.search,window.scrollY),E.f.go("/broker-deal/".concat(e,"/").concat(a,"/").concat(l,"?").concat(Object(x.stringify)(Object(C.a)(Object(C.a)({},Object(x.parse)(window.location.search)),{},{violations:t,additional_properties:n,previous_page:window.location.pathname+window.location.search}))))}},{key:"addDealNotesClick",value:function(e,a,t,n,l){l.stopPropagation(),E.f.go("/broker-deal/".concat(e,"/").concat(a,"/notes/add?").concat(Object(x.stringify)({violations:t,additional_properties:n})))}},{key:"compsClick",value:function(e,a,t,n,l){l.stopPropagation(),sessionStorage.setItem("comps_inNYC",e),this.props.compsActions.setPageAndScrollPos(window.location.pathname+window.location.search,window.scrollY),this.props.compsActions.submitCompsSearch("".concat(a," ").concat(t),n)}},{key:"updateStar",value:function(e,a,t){t.stopPropagation(),this.props.dealsActions.updateStar(e,a,"SEARCH")}},{key:"render",value:function(){var e=this,a=this.state.showOnlyMine,t=this.props,n=t.deals,l=t.currentPage,s=t.nextPageUrl,c=t.loading,r=t.ipDeals,o=r.loadingContact,m=r.contact,p=t.isAdmin,d=t.toast,u=t.closeToast;return i.a.createElement("div",null,c&&i.a.createElement(P.b,null),d.show&&i.a.createElement(I.a,{closeToast:u,delay:6e3},i.a.createElement("div",{className:"success-message"},i.a.createElement("p",null,d.message),i.a.createElement(O.a,{variant:"flat",onClick:u},d.success?"Done":"Dismiss"))),n&&n.length?i.a.createElement("div",null,p&&i.a.createElement("div",{className:"rkmd-checkbox checkbox-ripple other-loans-check"},i.a.createElement("label",{className:"input-checkbox checkbox-lightBlue"},i.a.createElement("input",{type:"checkbox",id:"showOnlyMine",checked:a,onChange:this.showOnlyMineToggle}),i.a.createElement("span",{className:"checkbox"}),i.a.createElement("span",{className:"ripple"})),i.a.createElement("p",{htmlFor:"showOnlyMine",className:"label"},"Show Only Mine")),n.map((function(a,t){return a.rate&&(a.rate=+parseFloat(a.rate).toFixed(3)+"%"),"2"===a.deal_status.toString()?i.a.createElement(A.a,{key:t,deal:a,contact:m,isSearchPage:!0,loadingContact:o,clickFunction:e.dealClick.bind(e),addDealNoteClick:e.addDealNotesClick.bind(e),compsClick:e.compsClick.bind(e),updateStar:e.updateStar.bind(e),getFullContactInfo:e.props.dealsActions.getFullContactInfo}):"21"===a.deal_status.toString()?i.a.createElement(D.a,{key:t,deal:a,contact:m,isSearchPage:!0,loadingContact:o,clickFunction:e.dealClick.bind(e),addDealNoteClick:e.addDealNotesClick.bind(e),compsClick:e.compsClick.bind(e),updateStar:e.updateStar.bind(e),getFullContactInfo:e.props.dealsActions.getFullContactInfo}):i.a.createElement(M.a,{key:t,deal:a,contact:m,isSearchPage:!0,loadingContact:o,clickFunction:e.dealClick.bind(e),addDealNoteClick:e.addDealNotesClick.bind(e),compsClick:e.compsClick.bind(e),updateStar:e.updateStar.bind(e),updateRating:function(a,t){return e.props.dealsActions.updateRating(a,t,"SEARCH")},updateDealReview:e.props.dealsActions.updateDealReviewed,changeExpectedIPDate:e.changeExpectedIPDate,getFullContactInfo:e.props.dealsActions.getFullContactInfo})})),i.a.createElement(j.a,{currentPage:l,nextPageUrl:s})):i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",{className:"grey-circle"},i.a.createElement("i",{className:"material-icons"},"warning")),i.a.createElement("h2",{className:"no-results"},"No Search Results"))))}}]),t}(i.a.PureComponent);var F=Object(p.b)((function(e){return{searchDeals:e.searchDeals,ipDeals:e.ipDeals,pwDeals:e.pwDeals,isAdmin:e.authentication.data&&e.authentication.data.is_admin}}),(function(e){return{actions:Object(m.b)(n,e),dealsActions:Object(m.b)(R,e),compsActions:Object(m.b)(S,e)}}))(B),T=function(e){Object(c.a)(t,e);var a=Object(r.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=a.call.apply(a,[this].concat(s))).state={input:""},e}return Object(s.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.loadSearchDeals()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.location.search!==e.location.search&&this.loadSearchDeals()}},{key:"loadSearchDeals",value:function(e){this.setState({input:Object(k.a)("search")}),this.props.actions.searchDeals(Object(k.a)("search"),Object(k.a)("page")||1,e?1:0)}},{key:"render",value:function(){var e=this,a=this.props.searchDeals,t=a.data,n=a.currentPage,l=a.nextPageUrl,s=a.loading,c=a.toast;return i.a.createElement("div",{className:"deals-page"},i.a.createElement(w,{search:this.state.input,previousPage:decodeURIComponent(Object(k.a)("previous_page")),searchChange:function(a){e.setState({input:a.target.value})}}),i.a.createElement("div",{className:"contacts-container"},i.a.createElement(F,{deals:t,currentPage:n,nextPageUrl:l,loading:s,toast:c,closeToast:this.props.actions.closeToast,loadSearchDeals:this.loadSearchDeals.bind(this)})))}}]),t}(i.a.PureComponent);a.default=Object(p.b)((function(e){return{searchDeals:e.searchDeals}}),(function(e){return{actions:Object(m.b)(n,e)}}))(T)}}]);
//# sourceMappingURL=20.9216fd91.chunk.js.map