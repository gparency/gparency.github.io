(this["webpackJsonplt-app"]=this["webpackJsonplt-app"]||[]).push([[85],{998:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return E}));var a=n(3),r=n(10),c=n.n(r),o=n(19),i=n(28),u=n(0),l=n.n(u),s=n(45),d=n.n(s),p=n(111),m=n(6),f=n(669),b=n(666),j=n(2),O=n(263),h=n(18),g=n(104),w=n(7),k=n(251),y=Object(k.a)((function(e){return{container:{height:"100%",width:"100%",[e.breakpoints.down("md")]:{height:"calc(100% - 40px)"}},actionsContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",height:48,padding:15,[e.breakpoints.down("xs")]:{padding:0}},button:{textTransform:"capitalize",fontWeight:"bold"}}})),v={pdf:"stream"};function E(){var e=Object(p.h)(),t=Object(m.d)(),n=y(),a=Object(h.cb)(),r=d.a.parse(e.search).report,s=Object(u.useState)(),O=Object(i.a)(s,2),k=O[0],v=O[1],E=Object(u.useState)(),I=Object(i.a)(E,2),x=I[0],F=I[1],R=Object(u.useState)(!0),q=Object(i.a)(R,2),N=q[0],S=q[1],U=Object(u.useCallback)((function(){S(!1)}),[]);Object(u.useEffect)((function(){var t=d.a.parse(e.search),n=t["bank-id"],a=t["sr-id"],r=t["mtm-data"],c=t["mtm-combined"],o=t["report-name"];v({bankId:n,srId:a,mtmData:r,mtmCombined:c,reportName:"".concat(o,".pdf")})}),[e.search]),Object(u.useEffect)((function(){function e(){return(e=Object(o.a)(c.a.mark((function e(){var t,n,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t="function"===typeof C[r]?"".concat(w.a.BASE_URL).concat(C[r](k).url,"?").concat(C[r](k).query):void 0)){e.next=7;break}return e.next=4,Object(j.i)({url:"".concat(t,"&getSignedUrl=1"),applyAuthHeader:!0});case 4:a=e.sent,o=null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.url,F(o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}k&&function(){e.apply(this,arguments)}()}),[k,r]);var B=Object(u.useCallback)((function(){j.f.go("/reports")}),[]),D=Object(u.useCallback)((function(){t(C[r](k).downloadFunc())}),[t,k,r]);return l.a.createElement("div",{className:n.container},l.a.createElement("div",{className:n.actionsContainer},a?l.a.createElement(f.a,{onClick:B},l.a.createElement(h.f,null)):l.a.createElement(b.a,{className:n.button,startIcon:l.a.createElement(h.f,null),onClick:B},"Back"),a?l.a.createElement(f.a,{onClick:D},window&&window.canShareUrl?l.a.createElement(h.U,null):l.a.createElement(h.x,null)):l.a.createElement(b.a,{className:n.button,startIcon:l.a.createElement(h.x,null),onClick:D},"Download")),!!x&&l.a.createElement("iframe",{style:{height:"100%",width:"100%"},src:"/pdf/web/viewer.html?file=".concat(encodeURIComponent(x)),title:"title",onLoad:U}),N&&l.a.createElement(g.b,null))}var C={"all-in-one":function(){return{url:"reports/all-in-one",downloadFunc:O.getAllInOneReport,query:d.a.stringify(v)}},"bank-pipeline":function(e){if(!e)return"";var t=e.bankId;return{url:"reports/bank-pipeline",downloadFunc:function(){return Object(O.getBankPipelineReport)(t)},query:d.a.stringify(Object(a.a)(Object(a.a)({},v),{},{bank_id:t}))}},"custom-report":function(e){if(!e)return"";var t=e.srId,n=e.reportName;return{url:"get-report",downloadFunc:function(){return Object(O.getReportPDF)(t,n)},query:d.a.stringify(Object(a.a)(Object(a.a)({},v),{},{sr_id:t}))}},mtm:function(e){if(!e)return"";var t=e.mtmData,n=e.mtmCombined;return{url:"reports/mtm-burn-down",downloadFunc:function(){return Object(O.getMTMReport)(t,n)},query:d.a.stringify(I(t,n))}},"full-mtm":function(){return{url:"reports/mtm",downloadFunc:O.getFullBlownMTMReport,query:d.a.stringify(v)}}};function I(e,t){var n=[];e&&("number"===typeof e||"string"===typeof e?n[0]=e:n=e);var r=Object(a.a)({},v);return n.length&&n.map((function(e,t){return r["members[".concat(t,"]")]=e})),parseInt(t)>=0&&(r.combined=t),r}}}]);
//# sourceMappingURL=85.fc46a8d8.chunk.js.map