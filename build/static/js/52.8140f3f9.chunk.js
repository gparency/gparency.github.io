(this["webpackJsonplt-app"]=this["webpackJsonplt-app"]||[]).push([[52],{854:function(e,t,n){var a,i,r;i=[],void 0===(r="function"===typeof(a=function(){var e=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function t(e){var t,n,a=e.replace(/^v/,"").replace(/\+.*$/,""),i=(n="-",-1===(t=a).indexOf(n)?t.length:t.indexOf(n)),r=a.substring(0,i).split(".");return r.push(a.substring(i+1)),r}function n(e){return isNaN(Number(e))?e:Number(e)}function a(t){if("string"!==typeof t)throw new TypeError("Invalid argument expected string");if(!e.test(t))throw new Error("Invalid argument not valid semver ('"+t+"' received)")}function i(e,i){[e,i].forEach(a);for(var r=t(e),o=t(i),l=0;l<Math.max(r.length-1,o.length-1);l++){var s=parseInt(r[l]||0,10),c=parseInt(o[l]||0,10);if(s>c)return 1;if(c>s)return-1}var d=r[r.length-1],p=o[o.length-1];if(d&&p){var u=d.split(".").map(n),m=p.split(".").map(n);for(l=0;l<Math.max(u.length,m.length);l++){if(void 0===u[l]||"string"===typeof m[l]&&"number"===typeof u[l])return-1;if(void 0===m[l]||"string"===typeof u[l]&&"number"===typeof m[l])return 1;if(u[l]>m[l])return 1;if(m[l]>u[l])return-1}}else if(d||p)return d?-1:1;return 0}var r=[">",">=","=","<","<="],o={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};return i.validate=function(t){return"string"===typeof t&&e.test(t)},i.compare=function(e,t,n){!function(e){if("string"!==typeof e)throw new TypeError("Invalid operator type, expected string but got "+typeof e);if(-1===r.indexOf(e))throw new TypeError("Invalid operator, expected one of "+r.join("|"))}(n);var a=i(e,t);return o[n].indexOf(a)>-1},i})?a.apply(t,i):a)||(e.exports=r)},969:function(e,t,n){"use strict";n.r(t);var a=n(9),i=n(8),r=n(12),o=n(11),l=n(0),s=n.n(l),c=n(6),d=n(23),p=n(166),u=n(10),m=n.n(u),f=n(19),g=n(854),h=n.n(g),v=n(72),w=n.n(v),b=n(47),E=n.n(b),y=n(26),N=n.n(y),O=n(7),k=n(2),j=n(189),D=n(17),x=n(87),C=n.n(x),S=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).handleClick=i.handleClick.bind(Object(D.a)(i)),i}return Object(i.a)(n,[{key:"handleClick",value:function(){this.props.getGoogleDoc(this.props.item)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(C.a,{md:"12",className:"document-title"},s.a.createElement("p",{onClick:this.handleClick},this.props.title)))}}]),n}(s.a.Component),I=n(210),U=n.n(I),W=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={downloading:!1,useWebBrowser:!1},e.getDocument=function(t){if(e.props.authentication.is_broker){var n=decodeURIComponent(t.gDriveUrl);return s.a.createElement("div",null,s.a.createElement(C.a,{md:"12",className:"document-title"},e.state.useWebBrowser?s.a.createElement("span",{onClick:function(){return e.getGoogleDrive(n)}},t.title):s.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},t.title)))}return s.a.createElement(S,{title:t.title,id:t.id,item:t,getGoogleDoc:e.getGoogleDoc})},e.getGoogleDrive=function(e){return window.ReactNativeWebView.postMessage(JSON.stringify({action:"openUrlWebBrowser",data:{url:e}}))},e.handleWindowMessage=function(t){var n=t.data;if(n&&"undefined"!==n){var a=n.action,i=n.error;a?"shareUrl"!==a||e.setState({downloading:!1}):i&&console.warn("ACTION_ERROR",a,i)}},e.isClientView=function(t){if(e.props.authentication.is_broker&&t.isClientView)return s.a.createElement("p",{className:"shared-w-client"},"Shared with client")},e.getGoogleDoc=function(){var t=Object(f.a)(m.a.mark((function t(n){var a,i,r,o,l,s,c,d;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.state.downloading){t.next=3;break}return t.abrupt("return");case 3:return e.setState({downloading:!0}),i=n.id,r=n.title,t.next=7,Object(k.i)({url:"".concat(O.a.BASE_URL,"get-google-doc"),applyAuthHeader:!0,data:{id:i}});case 7:return o=t.sent,l=o.data,s=Object(j.b)(l),t.next=12,Object(k.i)({url:"".concat(s,"?getSignedUrl=1"),applyAuthHeader:!0});case 12:c=t.sent,d=(null===c||void 0===c||null===(a=c.data)||void 0===a?void 0:a.url)||"",window&&window.isNativeApp?window.ReactNativeWebView.postMessage(JSON.stringify({action:window.canShareUrl?"shareUrl":"openUrlWebBrowser",data:{url:d,fileName:r}})):(e.setState({downloading:!1}),window.open(d)),t.next=22;break;case 17:t.prev=17,t.t0=t.catch(0),console.error(t.t0),alert("Sorry! There was an error downloading that document."),e.setState({downloading:!1});case 22:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e.showDownloadButton=function(t){if(e.props.authentication.is_broker)return s.a.createElement("i",{className:"material-icons doc-download",onClick:function(){e.getGoogleDoc(t)}},window&&window.canShareUrl?"share":"file_download")},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e,t;window.addEventListener("message",this.handleWindowMessage,!1),this.setState({useWebBrowser:!!(null===(e=window)||void 0===e?void 0:e.isNativeApp)&&!!h.a.compare(null===(t=window)||void 0===t?void 0:t.appVersion,"3.0.16",">=")})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleWindowMessage)}},{key:"getFileIcon",value:function(e){return"image/gif"===e||"image/jpeg"===e||"image/png"===e?s.a.createElement("img",{className:"file-icon",src:"/images/icons/image-file.png",alt:"file-icon"}):"application/pdf"===e?s.a.createElement("img",{className:"file-icon",src:"/images/icons/pdf-file.png",alt:"file-icon"}):"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e||"application/vnd.ms-excel"===e?s.a.createElement("img",{className:"file-icon",src:"/images/icons/excel-file.png",alt:"file-icon"}):s.a.createElement("img",{className:"file-icon",src:"/images/icons/default-file.png",alt:"file-icon"})}},{key:"render",value:function(){var e=this,t=this.props.documents.map((function(t,n){return s.a.createElement("div",{key:n},s.a.createElement(U.a,{className:"property-docs-divider"}),s.a.createElement(N.a,{className:"document-container"},s.a.createElement(C.a,{md:"6"},e.getFileIcon(t.mimeType),s.a.createElement("div",{className:"document-titles"},e.getDocument(t))),s.a.createElement(C.a,{md:"4"},e.isClientView(t)),s.a.createElement(C.a,{md:"2"},e.showDownloadButton(t))))}));return s.a.createElement("div",{className:"property-docs"},s.a.createElement(E.a,{className:"sm-panel"},s.a.createElement(N.a,{className:"panel-heading"},s.a.createElement("p",{className:"document-folder-title"},this.props.typeName)),t),s.a.createElement(w.a,{className:"loading-modal",isOpen:this.state.downloading,ariaHideApp:!1,contentLabel:"Modal",shouldCloseOnOverlayClick:!1},s.a.createElement("div",{className:"centered-spinner"},s.a.createElement("img",{src:"/images/icons/spin.svg",className:"loading-spinner",alt:"loading spinner"}))))}}]),n}(s.a.Component),M=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=null,n=null;return this.props.documents&&(n=!this.props.loading&&this.props.documents.map((function(t,n){return s.a.createElement(W,{key:n,typeName:t.TypeName,documents:t.info,token:e.props.token,authentication:e.props.authentication})}))),this.props.noDocuments&&(t=s.a.createElement("div",null,s.a.createElement("div",{className:"grey-circle"},s.a.createElement("i",{className:"material-icons"},"warning")),s.a.createElement("h2",{className:"no-results"},"This deal has no documents"))),s.a.createElement("div",{className:"deal-docs-page"},s.a.createElement(w.a,{className:"loading-modal",ariaHideApp:!1,contentLabel:"modal",isOpen:this.props.loading,shouldCloseOnOverlayClick:!1},s.a.createElement("div",{className:this.props.loading?"centered-spinner":"hidden"},s.a.createElement("img",{src:"/images/icons/spin.svg",className:"loading-spinner",alt:"loading spinner"}))),t,n)}}]),n}(s.a.Component),_=n(25),A=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.actions.loadDealDocuments(this.props.match.params.dealId?this.props.match.params.dealId:Object(_.a)("deal_id")?Object(_.a)("deal_id"):"")}},{key:"render",value:function(){return s.a.createElement(M,{documents:this.props.dealDetails.documents,noDocuments:this.props.dealDetails.noDocuments,loading:this.props.dealDetails.loading,token:localStorage.getItem("auth_token"),authentication:JSON.parse(localStorage.getItem("data"))})}}]),n}(s.a.Component);t.default=Object(c.b)((function(e){return{dealDetails:e.dealDetails}}),(function(e){return{actions:Object(d.b)(p,e)}}))(A)}}]);
//# sourceMappingURL=52.8140f3f9.chunk.js.map