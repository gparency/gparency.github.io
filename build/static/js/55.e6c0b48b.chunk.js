(this["webpackJsonplt-app"]=this["webpackJsonplt-app"]||[]).push([[55],{959:function(e,a,t){"use strict";t.r(a);var n={};t.r(n),t.d(n,"loadServiceProviderDeals",(function(){return y})),t.d(n,"noViolationsFeedbackToast",(function(){return N})),t.d(n,"closeViolationsFeedbackToast",(function(){return g}));var l=t(10),o=t.n(l),i=t(19),r=t(9),s=t(8),c=t(17),p=t(12),m=t(11),d=t(0),u=t.n(d),v=t(6),E=t(23),h=t(1),k=t(7),b=t(2),C=t(21);function y(){return function(){var e=Object(i.a)(o.a.mark((function e(a){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:h.LOADING_SERVICE_PROVIDER_SUCCESS}),e.next=3,Object(b.i)({url:"".concat(k.a.BASE_URL,"service-provider"),applyAuthHeader:!0});case 3:t=e.sent,e.t0=t.status,e.next="E403"===e.t0?7:"200"===e.t0?9:11;break;case 7:return a(Object(C.tokenExpired)()),e.abrupt("break",13);case 9:return a({type:h.LOAD_SERVICE_PROVIDER_SUCCESS,data:t.data.activeDeals}),e.abrupt("break",13);case 11:return a({type:h.LOAD_SERVICE_PROVIDER_SUCCESS,data:[]}),e.abrupt("break",13);case 13:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}function N(){return{type:h.NO_VIOLATIONS_FEEDBACK_TOAST}}function g(){return{type:h.CLOSE_VIOLATIONS_FEEDBACK_TOAST}}var _=t(87),f=t.n(_),P=function(e){return u.a.createElement("div",null,u.a.createElement(f.a,{md:"2"},u.a.createElement("p",{className:"small-title deal-info-title"},e.title),u.a.createElement("p",{className:"panel-info-value"},e.value?e.value:"N/A")))},S=t(72),A=t.n(S),O=t(26),D=t.n(O),I=t(210),T=t.n(I),j=function(e){return u.a.createElement("div",{className:"active-deals-pw"},u.a.createElement("div",{className:"panel mui-panel"},u.a.createElement("div",null,u.a.createElement(D.a,{onClick:e.clickFunction.bind(void 0,"SP",e.violations,e.otherProperty,e.dealId,"property-details")},u.a.createElement(f.a,{className:"panel-heading",md:"12",onClick:e.navChange.bind(null,e.violations,e.name)},u.a.createElement("div",null,u.a.createElement("p",{className:"panel-info-value property-title"},u.a.createElement("b",null,e.name?e.name:"N/A")))),u.a.createElement(f.a,{md:"2",onClick:e.navChange.bind(null,e.violations,e.name)},u.a.createElement("p",{className:"small-title deal-info-title"},"Address"),u.a.createElement("p",{className:"panel-info-value"},e.propertyName?e.propertyName:""),u.a.createElement("p",{className:"panel-info-value"},e.address?e.address:""),u.a.createElement("p",{id:"additional-properties",className:"panel-info-value"},u.a.createElement("i",{className:"orange-text orange-text-hover pointer",onClick:e.clickFunction.bind(void 0,"SP",e.violations,e.otherProperty,e.dealId,"property-details")},0===e.otherProperty?null:1===e.otherProperty?"1 other property":e.otherProperty+" other properties"))),u.a.createElement(f.a,{md:"2",onClick:e.navChange.bind(null,e.violations,e.name)},u.a.createElement("p",{className:"small-title deal-info-title"},"Expected closing date"),u.a.createElement("p",{className:"panel-info-value"},e.expectedClosingDate?e.expectedClosingDate:"N/A")),u.a.createElement(f.a,{md:"2",onClick:e.navChange.bind(null,e.violations,e.name)},u.a.createElement("p",{className:"small-title deal-info-title"},"Main broker"),u.a.createElement("p",{className:"panel-info-value"},e.broker?e.broker:"N/A")),u.a.createElement(f.a,{md:"12",onClick:e.navChange.bind(null,e.violations,e.name)},u.a.createElement("h3",{className:"quote-section orange-text"},"Loan Details"),u.a.createElement(f.a,{md:"2"},u.a.createElement("p",{className:"small-title deal-info-title"},"Bank"),u.a.createElement("p",{className:"panel-info-value"},e.bank?e.bank:"N/A")),e.loan)),u.a.createElement(T.a,null)),u.a.createElement(D.a,null,u.a.createElement(f.a,{md:"12"},u.a.createElement(D.a,{className:"comps-row"},u.a.createElement("div",{onClick:e.compsClick.bind(null,e.inNYC,e.propertyName,e.address,e.property_type_id)},u.a.createElement("div",{className:null!==e.violations?"border-right":""},u.a.createElement("p",{className:"violation-value comps"},Object(b.q)(e.comps),u.a.createElement("span",null,"Comps")))),u.a.createElement("div",{onClick:e.navChange.bind(null,e.violations,e.name),className:null!==e.violations?"comps-row-violations":"hidden"},u.a.createElement("div",{onClick:e.clickFunction.bind(void 0,"SP",e.violations,e.otherProperty,e.dealId,"violations")},u.a.createElement("p",{className:"violation-value"},e.violations,u.a.createElement("span",null,"Violations"))),u.a.createElement("div",{onClick:e.clickFunction.bind(void 0,"SP",e.violations,e.otherProperty,e.dealId,"violations")},u.a.createElement("p",{className:"violation-value"},e.complaints,u.a.createElement("span",null,"Complaints")))))))))},w=function(e){return u.a.createElement("div",{className:"active-deals-ip"},u.a.createElement("div",{className:"panel mui-panel"},u.a.createElement("div",null,u.a.createElement(D.a,{onClick:e.navChange.bind(null,e.violations,e.name)},u.a.createElement(f.a,{className:"panel-heading",md:"12",onClick:e.clickFunction.bind(void 0,"SP",e.violations,e.otherProperty,e.dealId,"property-details")},u.a.createElement("div",null,u.a.createElement("p",{className:"panel-info-value property-title"},u.a.createElement("b",null,e.name?e.name:"N/A")))),u.a.createElement(f.a,{md:"2",onClick:e.clickFunction.bind(void 0,"SP",e.violations,e.dealId,"violations")},u.a.createElement("p",{className:"small-title deal-info-title"},"Address"),u.a.createElement("p",{className:"panel-info-value"},e.propertyName?e.propertyName:""),u.a.createElement("p",{className:"panel-info-value"},e.address?e.address:"N/A"),u.a.createElement("p",{id:"additional-properties",className:"panel-info-value"},u.a.createElement("i",{className:"orange-text orange-text-hover pointer",onClick:e.clickFunction.bind(void 0,"SP",e.violations,e.otherProperty,e.dealId,"property-details")},0===e.otherProperty?null:1===e.otherProperty?"1 other property":e.otherProperty+" other properties"))),u.a.createElement(f.a,{onClick:e.clickFunction.bind(void 0,"SP",e.violations,e.otherProperty,e.dealId,"property-details")},e.loan)),u.a.createElement(T.a,null)),u.a.createElement(D.a,null,u.a.createElement(f.a,{md:"12"},u.a.createElement(D.a,{className:"comps-row"},u.a.createElement("div",{onClick:e.compsClick.bind(null,e.inNYC,e.propertyName,e.address,e.property_type_id)},u.a.createElement("div",{className:null!==e.violations?"border-right":""},u.a.createElement("p",{className:"violation-value comps"},Object(b.q)(e.comps),u.a.createElement("span",null,"Comps")))),u.a.createElement("div",{className:null!==e.violations?"comps-row-violations":"hidden",onClick:e.clickFunction.bind(void 0,"SP",e.violations,e.otherProperty,e.dealId,"violations")},u.a.createElement("div",{onClick:e.navChange.bind(null,e.violations,e.name)},u.a.createElement("p",{className:"violation-value"},e.violations,u.a.createElement("span",null,"Violations"))),u.a.createElement("div",{onClick:e.navChange.bind(null,e.violations,e.name)},u.a.createElement("p",{className:"violation-value"},e.complaints,u.a.createElement("span",null,"Complaints")))))))))},F=t(80),V=function(e){Object(p.a)(t,e);var a=Object(m.a)(t);function t(){return Object(r.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"getLoanDetails",value:function(e){var a=[];return a.push(u.a.createElement(P,{key:"3",title:"Rate",value:e.rate})),a.push(u.a.createElement(P,{key:"1",title:"Loan amount",value:e.loan_amount})),a.push(u.a.createElement(P,{key:"4",title:"Annual payments",value:e.yearly_amount})),a.push(u.a.createElement(P,{key:"2",title:"Term / Amortization",value:e.term+" / "+e.amortization})),a}},{key:"getIPLoanDetails",value:function(e){var a=[];return a.push(u.a.createElement(P,{key:"1",title:"Loan amount",value:e.loan_amount})),a.push(u.a.createElement(P,{key:"2",title:"Main broker",value:e.broker_of_record})),a}},{key:"dealClick",value:function(e,a,t,n,l,o){o.stopPropagation(),(null!=a||t>0)&&(this.props.setPageAndScrollPos("/service-provider",window.scrollY),l="property-details"===l&&t>0?"property-details":"violations",b.f.go("".concat(e,"deal-details/").concat(n,"/").concat(l,"?").concat(Object(F.a)({violations:a,additional_properties:t}))))}},{key:"compsClick",value:function(e,a,t,n){this.props.setPageAndScrollPos("/service-provider",window.scrollY),sessionStorage.setItem("comps_inNYC",e),this.props.submitCompsSearch("".concat(a," ").concat(t),n)}},{key:"render",value:function(){var e=this;return u.a.createElement("div",null,this.props.activeDeals.spActiveDeals.length?this.props.activeDeals.spActiveDeals.map((function(a){return"2"===a.deal_status?u.a.createElement(j,{key:a.deal_id,property_type_id:a.property_type_id,dealId:a.deal_id,name:a.deal_name,propertyName:a.property_address,address:a.city_state_zip,otherProperty:a.additional_properties,expectedClosingDate:a.expected_closing_date,broker:a.broker_of_record,navChange:e.props.navChange,bank:a.bank_name,inNYC:a.inNYC,loan:e.getLoanDetails(a),complaints:a.total_complaints,violations:a.total_violations,comps:a.TotalComps,compsClick:e.compsClick.bind(e),clickFunction:e.dealClick.bind(e)}):"1"===a.deal_status?u.a.createElement(w,{key:a.deal_id,dealId:a.deal_id,inNYC:a.inNYC,property_type_id:a.property_type_id,name:a.deal_name,propertyName:a.property_address,address:a.city_state_zip,otherProperty:a.additional_properties,loan:e.getIPLoanDetails(a),complaints:a.total_complaints,violations:a.total_violations,comps:a.TotalComps,compsClick:e.compsClick.bind(e),navChange:e.props.navChange,clickFunction:e.dealClick.bind(e)}):""})):u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement("div",{className:"grey-circle"},u.a.createElement("i",{className:"material-icons"},"warning")),u.a.createElement("h2",{className:"no-results"},"No Active Deals Now"))),u.a.createElement(A.a,{className:"loading-modal",ariaHideApp:!1,contentLabel:"modal",isOpen:this.props.loading,shouldCloseOnOverlayClick:!1},u.a.createElement("div",{className:this.props.loading?"centered-spinner":"hidden"},u.a.createElement("img",{src:"/images/icons/spin.svg",className:"loading-spinner",alt:"loading spinner"}))))}}]),t}(u.a.Component),x=t(50),L=t(164),R=t(88),Y=t(34),z=t.n(Y),B=function(e){Object(p.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(r.a)(this,t),(n=a.call(this,e)).navChange=n.navChange.bind(Object(c.a)(n)),n}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.navActions.updateNavTitle("Service Provider"),e.next=3,this.props.actions.loadServiceProviderDeals();case 3:this.props.comps.previousScrollPos&&this.props.comps.previousScrollPos.length&&(window.scrollTo(0,this.props.comps.previousScrollPos[this.props.comps.previousScrollPos.length-1]),this.props.compsActions.resetScrollPosition());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"navChange",value:function(e,a){e>=1?this.props.navActions.updateNavTitle(a):this.props.actions.noViolationsFeedbackToast()}},{key:"closeViolationsFeedbackToast",value:function(){this.props.actions.closeViolationsFeedbackToast()}},{key:"render",value:function(){var e=null;return this.props.spActiveDeals.toastShowing&&(e=u.a.createElement(R.a,{closeToast:this.closeViolationsFeedbackToast.bind(this),delay:6e3},u.a.createElement("div",{className:"success-message"},u.a.createElement("p",null,"No violation data available for this deal"),u.a.createElement(z.a,{variant:"flat",onClick:this.closeViolationsFeedbackToast.bind(this)},"Done")))),u.a.createElement("div",null,e,u.a.createElement(V,{activeDeals:this.props.spActiveDeals,loading:this.props.spActiveDeals.loading,navChange:this.navChange,setPageAndScrollPos:this.props.compsActions.setPageAndScrollPos,submitCompsSearch:this.props.compsActions.submitCompsSearch}))}}]),t}(u.a.Component);a.default=Object(v.b)((function(e){return{spActiveDeals:e.spActiveDeals,title:e.navTitle,comps:e.comps}}),(function(e){return{actions:Object(E.b)(n,e),navActions:Object(E.b)(x,e),compsActions:Object(E.b)(L,e)}}))(B)}}]);
//# sourceMappingURL=55.e6c0b48b.chunk.js.map