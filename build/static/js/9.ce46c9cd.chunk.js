(this["webpackJsonplt-app"]=this["webpackJsonplt-app"]||[]).push([[9],{922:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return jt}));var n=a(28),l=a(0),r=a.n(l),s=a(5),c=a(6),i=a(712),o=a(399),u=a(27),p=a(3),m=a(372),b=a(42),d=a.n(b),O=a(93),j=a.n(O),_=a(737),f=a(981),v=a(927),E=a(4),h=a(14),g=(a(13),a(20)),C=a(168),y=Object(C.a)(l.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var N=l.forwardRef((function(e,t){var a=e.alt,n=e.children,r=e.classes,c=e.className,i=e.component,o=void 0===i?"div":i,u=e.imgProps,p=e.sizes,m=e.src,b=e.srcSet,d=e.variant,O=void 0===d?"circle":d,j=Object(h.a)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),_=null,f=function(e){var t=e.src,a=e.srcSet,n=l.useState(!1),r=n[0],s=n[1];return l.useEffect((function(){if(t||a){s(!1);var e=!0,n=new Image;return n.src=t,n.srcSet=a,n.onload=function(){e&&s("loaded")},n.onerror=function(){e&&s("error")},function(){e=!1}}}),[t,a]),r}({src:m,srcSet:b}),v=m||b,g=v&&"error"!==f;return _=g?l.createElement("img",Object(E.a)({alt:a,src:m,srcSet:b,sizes:p,className:r.img},u)):null!=n?n:v&&a?a[0]:l.createElement(y,{className:r.fallback}),l.createElement(o,Object(E.a)({className:Object(s.a)(r.root,r.system,r[O],c,!g&&r.colorDefault),ref:t},j),_)})),A=Object(g.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(N),I=a(928),S=a(718),T=a(126),L=a(2),k=a(169),P=a.n(k),R=a(170),x=a.n(R),F=a(732),D=a(721),z=a(24),w=a(16);var M=a(259),W=a(48),U=a(94),Y=a(260),G=a.n(Y),V=a(261),B=a.n(V),K=a(715),q=a(670),H=a(727),$=a(251),Q=a(262),Z=Object($.a)((function(e){return Object(p.a)({},Object(Q.a)(e))}));function X(e){var t=e.open,a=e.handleClose,i=e.storeSliceName,o=e.persist,m=Z(),b=Object(c.d)(),d=Object(l.useRef)(!0),O=Object(l.useState)(),j=Object(n.a)(O,2),_=j[0],f=j[1],v=Object(l.useState)([]),E=Object(n.a)(v,2),h=E[0],g=E[1],C=Object(l.useState)(0),y=Object(n.a)(C,2),N=y[0],A=y[1],I=Object(l.useState)(0),k=Object(n.a)(I,2),P=k[0],R=k[1],x=Object(c.e)((function(e){var t;return null===(t=e[i].itemizations)||void 0===t?void 0:t[L.j.POTENTIAL_GROSS_ITEMIZATION]}),c.c),F=Object(l.useCallback)((function(e){null!==e&&e.scrollIntoView({behavior:"smooth",block:"start"})}),[]);Object(l.useEffect)((function(){if(x){if(d.current)f(x),d.current=!1;else{var e=J(x);b(Object(z.m)({calculator:L.j.CAP_RATE,valuesObj:{potential_annual_gross_income:e,potential_monthly_gross_income:e/12},persist:o})),b(Object(z.y)({name:"capRate",persist:o}))}A(J(x));var t=Object.keys(x).reduce((function(e,t){if(t.includes("new_income")){var a=t.split("_"),n=a[a.length-1];isNaN(n)||e.push(+n)}return e}),[0]);R(B()(t))}}),[b,o,x]);var D=Object(l.useCallback)((function(e){var t=e.target,a=t.name,n=t.value,l=-1===(null===n||void 0===n?void 0:n.indexOf("/"))?G()(n):n,r=Object(L.B)({object:x,oldKey:a,newKey:l});b(Object(z.C)({name:L.j.POTENTIAL_GROSS_ITEMIZATION,value:r,persist:o}))}),[b,o,x]),Y=Object(l.useCallback)((function(e,t){var a=e.target,n=a.name,l=function(e){var t=e.nestedKey,a=e.value,n=t===w.b.ANNUAL?w.b.MONTHLY:w.b.ANNUAL,l=t===w.b.ANNUAL?Object(w.e)(Object(w.g)(a)/12):Object(w.e)(12*Object(w.g)(a));return{[t]:a,[n]:l}}({nestedKey:t,value:a.value});b(Object(z.C)({name:L.j.POTENTIAL_GROSS_ITEMIZATION,value:Object(p.a)(Object(p.a)({},x),{},{[n]:Object(p.a)(Object(p.a)({},x[n]),l)}),persist:o}))}),[b,o,x]),V=Object(l.useCallback)((function(){b(Object(z.C)({name:L.j.POTENTIAL_GROSS_ITEMIZATION,value:Object(p.a)(Object(p.a)({},x),{},{["new_income_".concat(P+1)]:{monthly:0,annual:0}}),persist:o}))}),[b,o,x,P]),$=Object(l.useCallback)((function(){b(Object(z.C)({name:L.j.POTENTIAL_GROSS_ITEMIZATION,value:_,persist:o}))}),[b,_,o]),Q=Object(l.useCallback)((function(e){g((function(t){return[].concat(Object(u.a)(t),[e])}))}),[]),X=Object(l.useCallback)((function(e){g((function(t){return t.filter((function(t){return e!==t}))}))}),[]),ee=Object(l.useCallback)((function(e){x[e];var t=Object(W.a)(x,[e].map(U.a));b(Object(z.C)({name:L.j.POTENTIAL_GROSS_ITEMIZATION,value:t,persist:o})),X(e)}),[b,o,x,X]);return x?r.a.createElement(M.a,{open:t,handleClose:a,handleAdd:V,handleReset:$,title:r.a.createElement("span",null,"Potential Gross Income ",r.a.createElement("br",null)," Itemized"),totals:{label:"Potential Gross Income:",value:N}},r.a.createElement(K.a,null,Object.keys(x).map((function(e){var t=x[e],a=t.monthly,n=t.annual,c=h.indexOf(e)>-1;return r.a.createElement(l.Fragment,{key:e},r.a.createElement(q.a,{classes:{root:m.listItem},disableGutters:!0,innerRef:e==="new_income_".concat(P)?F:void 0},r.a.createElement(T.i,{value:e,name:e,type:"key",handleBlur:D,handleUndoableDelete:Q,undoDelete:X,handleDelete:ee,isDeleted:c}),r.a.createElement(H.a,{container:!0,className:Object(s.a)({[m.hidden]:c})},r.a.createElement(H.a,{item:!0,xs:4}),r.a.createElement(H.a,{item:!0,xs:3,classes:{root:m.gridItem}},r.a.createElement("span",{className:m.valuesKey},"Monthly")),r.a.createElement(H.a,{item:!0,xs:4,classes:{root:m.gridItem}},r.a.createElement(T.i,{value:a,name:e,type:"value",nestedKey:"monthly",handleBlur:Y,startAdornment:"$"})),r.a.createElement(H.a,{item:!0,xs:4}),r.a.createElement(H.a,{item:!0,xs:3,classes:{root:m.gridItem}},r.a.createElement("span",{className:m.valuesKey},"Annual")),r.a.createElement(H.a,{item:!0,xs:4,classes:{root:m.gridItem}},r.a.createElement(T.i,{value:n,name:e,type:"value",nestedKey:"annual",handleBlur:Y,startAdornment:"$"})))),!c&&r.a.createElement(S.a,{className:m.divider}))})))):null}function J(e){return x()(P()(e,(function(e){return Object(w.g)(e[w.b.ANNUAL]||0)})))}var ee=Object($.a)((function(e){return Object(p.a)({},Object(Q.a)(e))}));function te(e){var t=e.open,a=e.handleClose,i=e.storeSliceName,o=e.persist,m=ee(),b=Object(c.d)(),d=Object(l.useRef)(!0),O=Object(l.useState)(),j=Object(n.a)(O,2),_=j[0],f=j[1],v=Object(l.useState)([]),E=Object(n.a)(v,2),h=E[0],g=E[1],C=Object(l.useState)(),y=Object(n.a)(C,2),N=y[0],A=y[1],I=Object(l.useState)(0),k=Object(n.a)(I,2),P=k[0],R=k[1],x=Object(c.e)((function(e){var t;return null===(t=e[i].itemizations)||void 0===t?void 0:t[L.j.VACANCY]}),c.c),F=Object(c.e)((function(e){var t;return null===(t=e[i].userItemizationEntryMethods)||void 0===t?void 0:t[L.j.VACANCY]}),c.c),D=Object(c.e)((function(e){return e[i][L.j.CAP_RATE].potential_annual_gross_income})),Y=Object(l.useCallback)((function(e){null!==e&&e.scrollIntoView({behavior:"smooth",block:"start"})}),[]);Object(l.useEffect)((function(){d.current&&(f(x),d.current=!1);var e=Object.keys(x).reduce((function(e,t){if(t.includes("new_vacancy")){var a=t.split("_"),n=a[a.length-1];isNaN(n)||e.push(+n)}return e}),[0]);R(B()(e))}),[x]),Object(l.useEffect)((function(){var e=ne(x,D),t=e[w.b.DOLLAR_AMOUNT],a=e[w.b.PERCENT_AMOUNT];A([{label:"Total Vacancy $:",value:t,display:"dollar"},{label:"Total Vacancy %:",value:a,display:"percent"}])}),[b,x,D]);var V=Object(l.useCallback)((function(e){var t=e.target,a=t.name,n=t.value,l=-1===(null===n||void 0===n?void 0:n.indexOf("/"))?G()(n):n,r=Object(L.B)({object:x,oldKey:a,newKey:l});b(Object(z.C)({name:L.j.VACANCY,value:r,persist:o})),b(Object(z.c)({itemizationName:w.a.VACANCY,item:l,value:F[a],persist:o})),b(Object(z.k)({itemizationName:w.a.VACANCY,item:a,persist:o}))}),[b,o,x,F]),$=Object(l.useCallback)((function(e,t){var a,n=e.target,l=n.name,r=n.value;if(Object(w.g)(r)!==Object(w.g)(null===(a=x[l])||void 0===a?void 0:a[t])){var s=ae({nestedKey:t,value:r,potential_annual_gross_income:D}),c=Object(p.a)(Object(p.a)({},x),{},{[l]:Object(p.a)(Object(p.a)({},x[l]),s)}),i=ne(c,D),u=i[w.b.DOLLAR_AMOUNT],m=i[w.b.PERCENT_AMOUNT];b(Object(z.m)({calculator:L.j.CAP_RATE,valuesObj:{vacancy_as_dollar:u,vacancy_as_percent:m},persist:o})),b(Object(z.C)({name:L.j.VACANCY,value:c,persist:o})),b(Object(z.c)({itemizationName:w.a.VACANCY,item:l,value:t===w.b.DOLLAR_AMOUNT?w.b.DOLLAR_AMOUNT:w.b.PERCENT_AMOUNT,persist:o})),b(Object(z.y)({name:"capRate",persist:o}))}}),[b,o,x,D]),Q=Object(l.useCallback)((function(){b(Object(z.C)({name:L.j.VACANCY,value:Object(p.a)(Object(p.a)({},x),{},{["new_vacancy_".concat(P+1)]:{dollar:0,percent:0}}),persist:o}))}),[b,o,x,P]),Z=Object(l.useCallback)((function(){b(Object(z.C)({name:L.j.VACANCY,value:_,persist:o}))}),[b,_,o]),X=Object(l.useCallback)((function(e){g((function(t){return[].concat(Object(u.a)(t),[e])}))}),[]),J=Object(l.useCallback)((function(e){g((function(t){return t.filter((function(t){return e!==t}))}))}),[]),te=Object(l.useCallback)((function(e){x[e];var t=Object(W.a)(x,[e].map(U.a));b(Object(z.C)({name:L.j.VACANCY,value:t,persist:o})),b(Object(z.k)({itemizationName:w.a.VACANCY,item:e,persist:o})),J(e)}),[b,o,x,J]);return x?r.a.createElement(M.a,{open:t,handleClose:a,handleAdd:Q,handleReset:Z,title:"Vacancy Itemized",totals:N},r.a.createElement(K.a,null,Object.keys(x).map((function(e){var t=x[e],a=t.percent,n=t.dollar,c=h.indexOf(e)>-1;return r.a.createElement(l.Fragment,{key:e},r.a.createElement(q.a,{classes:{root:m.listItem},disableGutters:!0,innerRef:e==="new_vacancy_".concat(P)?Y:void 0},r.a.createElement(T.i,{value:e,name:e,type:"key",handleBlur:V,handleUndoableDelete:X,undoDelete:J,handleDelete:te,isDeleted:c}),r.a.createElement(H.a,{container:!0,className:Object(s.a)({[m.hidden]:c})},r.a.createElement(H.a,{item:!0,xs:4}),r.a.createElement(H.a,{item:!0,xs:3,classes:{root:m.gridItem}},r.a.createElement("span",{className:m.valuesKey},"Dollar")),r.a.createElement(H.a,{item:!0,xs:4,classes:{root:m.gridItem}},r.a.createElement(T.i,{value:n,name:e,type:"value",nestedKey:"dollar",handleBlur:$,startAdornment:"$"})),r.a.createElement(H.a,{item:!0,xs:4}),r.a.createElement(H.a,{item:!0,xs:3,classes:{root:m.gridItem}},r.a.createElement("span",{className:m.valuesKey},"Percent")),r.a.createElement(H.a,{item:!0,xs:4,classes:{root:m.gridItem}},r.a.createElement(T.i,{value:a,name:e,type:"value",nestedKey:"percent",handleBlur:$,endAdornment:"%",display:"percent"})))),!c&&r.a.createElement(S.a,{className:m.divider}))})))):null}function ae(e){var t=e.nestedKey,a=e.value,n=e.potential_annual_gross_income,l=t===w.b.DOLLAR_AMOUNT?w.b.PERCENT_AMOUNT:w.b.DOLLAR_AMOUNT;return n?{[t]:a,[l]:t===w.b.DOLLAR_AMOUNT?Object(w.d)(Object(w.g)(a)/Object(w.g)(n)):a?Object(w.e)(Object(w.f)(a)*Object(w.g)(n)):0}:{[t]:a,[l]:0}}function ne(e,t){var a=x()(P()(e,(function(e){return Object(w.g)(e[w.b.DOLLAR_AMOUNT]||0)})));return{[w.b.DOLLAR_AMOUNT]:a,[w.b.PERCENT_AMOUNT]:Object(w.d)(Object(w.g)(a)/Object(w.g)(t))}}var le=Object($.a)((function(e){return Object(p.a)({},Object(Q.a)(e))}));function re(e){var t=e.open,a=e.handleClose,i=e.storeSliceName,o=e.persist,m=le(),b=Object(c.d)(),d=Object(l.useRef)(!0),O=Object(l.useState)(),j=Object(n.a)(O,2),_=j[0],f=j[1],v=Object(l.useState)([]),E=Object(n.a)(v,2),h=E[0],g=E[1],C=Object(l.useState)(0),y=Object(n.a)(C,2),N=y[0],A=y[1],I=Object(l.useState)(0),k=Object(n.a)(I,2),P=k[0],R=k[1],x=Object(c.e)((function(e){var t;return null===(t=e[i].itemizations)||void 0===t?void 0:t[L.j.ANNUAL_EXPENSES]}),c.c),F=Object(l.useCallback)((function(e){null!==e&&e.scrollIntoView({behavior:"smooth",block:"start"})}),[]);Object(l.useEffect)((function(){if(x){if(d.current)f(x),d.current=!1;else{var e=se(x);b(Object(z.m)({calculator:L.j.CAP_RATE,valuesObj:{annual_expenses:e,monthly_expenses:e/12},persist:o})),b(Object(z.y)({name:"capRate",persist:o}))}A(se(x));var t=Object.keys(x).reduce((function(e,t){if(t.includes("new_expense")){var a=t.split("_"),n=a[a.length-1];isNaN(n)||e.push(+n)}return e}),[0]);R(B()(t))}}),[b,o,x]);var D=Object(l.useCallback)((function(e){var t=e.target,a=t.name,n=t.value,l=-1===(null===n||void 0===n?void 0:n.indexOf("/"))?G()(n):n,r=Object(L.B)({object:x,oldKey:a,newKey:l});b(Object(z.C)({name:L.j.ANNUAL_EXPENSES,value:r,persist:o}))}),[b,o,x]),Y=Object(l.useCallback)((function(e,t){var a=e.target,n=a.name,l=function(e){var t=e.nestedKey,a=e.value,n=t===w.b.ANNUAL?w.b.MONTHLY:w.b.ANNUAL,l=t===w.b.ANNUAL?Object(w.e)(Object(w.g)(a)/12):Object(w.e)(12*Object(w.g)(a));return{[t]:a,[n]:l}}({nestedKey:t,value:a.value});b(Object(z.C)({name:L.j.ANNUAL_EXPENSES,value:Object(p.a)(Object(p.a)({},x),{},{[n]:Object(p.a)(Object(p.a)({},x[n]),l)}),persist:o}))}),[b,o,x]),V=Object(l.useCallback)((function(){b(Object(z.C)({name:L.j.ANNUAL_EXPENSES,value:Object(p.a)(Object(p.a)({},x),{},{["new_expense_".concat(P+1)]:{monthly:0,annual:0}}),persist:o}))}),[b,o,x,P]),$=Object(l.useCallback)((function(){b(Object(z.C)({name:L.j.ANNUAL_EXPENSES,value:_,persist:o}))}),[b,_,o]),Q=Object(l.useCallback)((function(e){g((function(t){return[].concat(Object(u.a)(t),[e])}))}),[]),Z=Object(l.useCallback)((function(e){g((function(t){return t.filter((function(t){return e!==t}))}))}),[]),X=Object(l.useCallback)((function(e){x[e];var t=Object(W.a)(x,[e].map(U.a));b(Object(z.C)({name:L.j.ANNUAL_EXPENSES,value:t,persist:o})),Z(e)}),[b,o,x,Z]);return x?r.a.createElement(M.a,{open:t,handleClose:a,handleAdd:V,handleReset:$,title:"Annual Expenses Itemized",totals:{label:"Total Expenses:",value:N}},r.a.createElement(K.a,null,Object.keys(x).map((function(e){var t=x[e],a=t.monthly,n=t.annual,c=h.indexOf(e)>-1;return r.a.createElement(l.Fragment,{key:e},r.a.createElement(q.a,{classes:{root:m.listItem},disableGutters:!0,innerRef:e==="new_expense_".concat(P)?F:void 0},r.a.createElement(T.i,{value:e,name:e,type:"key",handleBlur:D,handleUndoableDelete:Q,undoDelete:Z,handleDelete:X,isDeleted:c}),r.a.createElement(H.a,{container:!0,className:Object(s.a)({[m.hidden]:c})},r.a.createElement(H.a,{item:!0,xs:4}),r.a.createElement(H.a,{item:!0,xs:3,classes:{root:m.gridItem}},r.a.createElement("span",{className:m.valuesKey},"Monthly")),r.a.createElement(H.a,{item:!0,xs:4,classes:{root:m.gridItem}},r.a.createElement(T.i,{value:a,name:e,type:"value",nestedKey:"monthly",handleBlur:Y,startAdornment:"$"})),r.a.createElement(H.a,{item:!0,xs:4}),r.a.createElement(H.a,{item:!0,xs:3,classes:{root:m.gridItem}},r.a.createElement("span",{className:m.valuesKey},"Annual")),r.a.createElement(H.a,{item:!0,xs:4,classes:{root:m.gridItem}},r.a.createElement(T.i,{value:n,name:e,type:"value",nestedKey:"annual",handleBlur:Y,startAdornment:"$"})))),!c&&r.a.createElement(S.a,{className:m.divider}))})))):null}function se(e){return x()(P()(e,(function(e){return Object(w.g)(e[w.b.ANNUAL]||0)})))}var ce=Object($.a)((function(e){return Object(p.a)({},Object(Q.a)(e))})),ie="loan_amount_dollar";function oe(e){var t=e.open,a=e.handleClose,i=e.storeSliceName,o=e.persist,m=ce(),b=Object(c.d)(),d=Object(l.useRef)(!0),O=Object(c.e)((function(e){var t;return null===(t=e[i].itemizations)||void 0===t?void 0:t[L.j.CLOSING_COSTS]}),c.c),j=Object(c.e)((function(e){var t;return null===(t=e[i].userItemizationEntryMethods)||void 0===t?void 0:t[w.a.CLOSING_COST_ITEMIZED]}),c.c),_=Object(c.e)((function(e){var t;return null===(t=e[i].itemizationsPercentOf)||void 0===t?void 0:t[w.a.CLOSING_COST_ITEMIZED]}),c.c),f=Object(c.e)((function(e){return e[i][L.j.CAP_RATE].purchase_price})),v=Object(c.e)((function(e){return e[i][L.j.EQUITY_NEEDED].loan_amount_dollar})),E={purchase_price:f,loan_amount_dollar:v},h=Object(l.useState)(),g=Object(n.a)(h,2),C=g[0],y=g[1],N=Object(l.useState)([]),A=Object(n.a)(N,2),I=A[0],k=A[1],P=Object(l.useState)(),R=Object(n.a)(P,2),x=R[0],F=R[1],D=Object(l.useState)(0),Y=Object(n.a)(D,2),V=Y[0],$=Y[1],Q=Object(l.useCallback)((function(e){null!==e&&e.scrollIntoView({behavior:"smooth",block:"start"})}),[]);Object(l.useEffect)((function(){var e=Object.keys(O).reduce((function(e,t){if(t.includes("new_cost")){var a=t.split("_"),n=a[a.length-1];isNaN(n)||e.push(+n)}return e}),[0]);$(B()(e))}),[O]),Object(l.useEffect)((function(){d.current&&(y(O),d.current=!1);var e=!!f,t=pe({itemizationValues:O,purchasePrice:f,canShowPercent:e}),a=t[w.b.DOLLAR_AMOUNT],n=t[w.b.PERCENT_AMOUNT];F(e?[{label:"Total Closing Costs $:",value:a,display:"dollar"},{label:"Total Closing Costs %:",value:n,display:"percent"}]:{label:"Total Closing Costs $:",value:a})}),[O,v,f]);var Z=Object(l.useCallback)((function(e){var t=e.target,a=t.name,n=t.value,l=-1===(null===n||void 0===n?void 0:n.indexOf("/"))?G()(n):n,r=Object(L.B)({object:O,oldKey:a,newKey:l});b(Object(z.C)({name:L.j.CLOSING_COSTS,value:r,persist:o})),b(Object(z.D)({itemizationName:w.a.CLOSING_COST_ITEMIZED,item:l,value:_[a],persist:o})),b(Object(z.c)({itemizationName:w.a.CLOSING_COST_ITEMIZED,item:l,value:j[a],persist:o})),b(Object(z.k)({itemizationName:w.a.CLOSING_COST_ITEMIZED,item:a,persist:o})),b(Object(z.j)({itemizationName:w.a.CLOSING_COST_ITEMIZED,item:a,persist:o}))}),[b,o,O,_,j]),X=Object(l.useCallback)((function(e,t){var a,n=e.target,l=n.name,r=n.value;if(Object(w.g)(r)!==Object(w.g)(null===(a=O[l])||void 0===a?void 0:a[t])){var s=O[l].hasOwnProperty("percent"),c=ue({nestedKey:t,value:r,canBeSynced:s,percentOfAmount:E[_[l]]}),i=Object(p.a)(Object(p.a)({},O),{},{[l]:Object(p.a)(Object(p.a)({},O[l]),c)}),u=pe({itemizationValues:i,purchasePrice:f,canShowPercent:!!f}),m=u[w.b.DOLLAR_AMOUNT],d=u[w.b.PERCENT_AMOUNT];b(Object(z.m)({calculator:L.j.EQUITY_NEEDED,valuesObj:{closing_costs_dollar:m,closing_costs_percent:d},persist:o})),b(Object(z.C)({name:L.j.CLOSING_COSTS,value:i,persist:o})),s&&(b(Object(z.c)({itemizationName:w.a.CLOSING_COST_ITEMIZED,item:l,value:t===w.b.DOLLAR_AMOUNT?w.b.DOLLAR_AMOUNT:w.b.PERCENT_AMOUNT,persist:o})),b(Object(z.D)({itemizationName:w.a.CLOSING_COST_ITEMIZED,item:l,value:_[l],persist:o}))),b(Object(z.y)({name:"capRate",persist:o}))}}),[O,E,_,f,b,o]),J=Object(l.useCallback)((function(){b(Object(z.C)({name:L.j.CLOSING_COSTS,value:Object(p.a)(Object(p.a)({},O),{},{["new_cost_".concat(V+1)]:{dollar:0}}),persist:o}))}),[b,o,O,V]),ee=Object(l.useCallback)((function(){b(Object(z.C)({name:L.j.CLOSING_COSTS,value:C,persist:o}))}),[b,C,o]),te=Object(l.useCallback)((function(e){k((function(t){return[].concat(Object(u.a)(t),[e])}))}),[]),ae=Object(l.useCallback)((function(e){k((function(t){return t.filter((function(t){return e!==t}))}))}),[]),ne=Object(l.useCallback)((function(e){O[e];var t=Object(W.a)(O,[e].map(U.a));b(Object(z.C)({name:L.j.CLOSING_COSTS,value:t,persist:o})),b(Object(z.k)({itemizationName:w.a.CLOSING_COST_ITEMIZED,item:e,persist:o})),ae(e)}),[b,o,O,ae]),le=Object(l.useCallback)((function(e){var t=e.itemName,a=e.curPercentOf,n=(e.dollarAmount,a===ie?"purchase_price":ie),l=a===ie?f:v,r=j[t];if(r){var s=ue({nestedKey:r,value:O[t][r],canBeSynced:!0,percentOfAmount:l}),c=Object(p.a)(Object(p.a)({},O),{},{[t]:Object(p.a)(Object(p.a)({},O[t]),s)}),i=pe({itemizationValues:c,purchasePrice:f,canShowPercent:!!f}),u=i[w.b.DOLLAR_AMOUNT],m=i[w.b.PERCENT_AMOUNT];b(Object(z.m)({calculator:L.j.EQUITY_NEEDED,valuesObj:{closing_costs_dollar:u,closing_costs_percent:m},persist:o})),b(Object(z.C)({name:L.j.CLOSING_COSTS,value:c,persist:o}))}b(Object(z.D)({itemizationName:w.a.CLOSING_COST_ITEMIZED,item:t,value:n,persist:o}))}),[b,o,O,v,f,j]);return O?r.a.createElement(M.a,{open:t,handleClose:a,handleAdd:J,handleReset:ee,title:"Closing Costs Itemized",totals:x},r.a.createElement(K.a,null,Object.keys(O).map((function(e){var t=O[e].dollar,a=I.indexOf(e)>-1;return r.a.createElement(l.Fragment,{key:e},r.a.createElement(q.a,{classes:{root:m.listItem},disableGutters:!0,innerRef:e==="new_cost_".concat(V)?Q:void 0},r.a.createElement(T.i,{value:e,name:e,type:"key",handleBlur:Z,handleUndoableDelete:te,undoDelete:ae,handleDelete:ne,isDeleted:a}),r.a.createElement(H.a,{container:!0,className:Object(s.a)({[m.hidden]:a})},r.a.createElement(H.a,{item:!0,xs:4}),r.a.createElement(H.a,{item:!0,xs:3,classes:{root:m.gridItem}},r.a.createElement("span",{className:m.valuesKey},"Amount")),r.a.createElement(H.a,{item:!0,xs:4,classes:{root:m.gridItem}},r.a.createElement(T.i,{value:t,name:e,type:"value",nestedKey:"dollar",handleBlur:X,startAdornment:"$"})),O[e].hasOwnProperty("percent")&&r.a.createElement(l.Fragment,null,r.a.createElement(H.a,{item:!0,xs:2}),r.a.createElement(H.a,{item:!0,xs:5,classes:{root:m.gridItem}},r.a.createElement("span",{className:m.valuesKey,onClick:function(){return le({itemName:e,curPercentOf:_[e],dollarAmount:t})},style:{cursor:"pointer"}},_[e]===ie?"% of Loan Amount":"% of Purchase Price")),r.a.createElement(H.a,{item:!0,xs:4,classes:{root:m.gridItem}},r.a.createElement(T.i,{value:O[e].percent,name:e,type:"value",nestedKey:"percent",handleBlur:X,endAdornment:"%",display:"percent"}))))),!a&&r.a.createElement(S.a,{className:m.divider}))})))):null}function ue(e){var t=e.canBeSynced,a=e.nestedKey,n=e.value,l=e.percentOfAmount,r=a===w.b.DOLLAR_AMOUNT?w.b.PERCENT_AMOUNT:w.b.DOLLAR_AMOUNT;return t?l?{[a]:n,[r]:a===w.b.DOLLAR_AMOUNT?Object(w.d)(Object(w.g)(n)/Object(w.g)(l)):n?Object(w.e)(Object(w.f)(n)*Object(w.g)(l)):0}:{[a]:n,[r]:0}:{[w.b.DOLLAR_AMOUNT]:n}}function pe(e){var t=e.itemizationValues,a=e.purchasePrice,n=e.canShowPercent,l=x()(P()(t,(function(e){return Object(w.g)(e[w.b.DOLLAR_AMOUNT]||0)}))),r={[w.b.DOLLAR_AMOUNT]:l};return n&&(r[w.b.PERCENT_AMOUNT]=Object(w.d)(Object(w.g)(l)/Object(w.g)(a))),r}a(268);var me=a(18),be=a(49),de=Object($.a)((function(e){return Object(p.a)({},Object(be.a)(e))}));function Oe(e){var t=e.storeSliceName,a=e.persist,i=de(),o=Object(c.d)(),u=Object(c.e)((function(e){return e[t].dirty})),p=Object(c.e)((function(e){return e[t][L.j.CAP_RATE]}),c.c),m=Object(c.e)((function(e){return e[t].userEntryMethods}),c.c),b=Object(c.e)((function(e){var a;return null===(a=e[t].itemizations)||void 0===a?void 0:a[L.j.POTENTIAL_GROSS_ITEMIZATION]}),c.c),d=Object(c.e)((function(e){var a;return null===(a=e[t].itemizations)||void 0===a?void 0:a[L.j.VACANCY]}),c.c),O=Object(c.e)((function(e){var a;return null===(a=e[t].userItemizationEntryMethods)||void 0===a?void 0:a[L.j.VACANCY]}),c.c),j=Object(c.e)((function(e){var a;return null===(a=e[t].itemizations)||void 0===a?void 0:a[L.j.ANNUAL_EXPENSES]}),c.c),_=p||{},f=_.purchase_price,v=_.potential_annual_gross_income,E=_.potential_monthly_gross_income,h=_.vacancy_as_dollar,g=_.vacancy_as_percent,C=_.annual_expenses,y=_.monthly_expenses,N=_.first_year_noi,A=m.vacancy;function I(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,l=t.name,r=parseFloat(n.replace(/[^0-9.]/g,""));o(Object(z.l)({calculator:L.j.CAP_RATE,name:l,value:_e(l,n),persist:a})),o(Object(z.y)({name:"capRate",persist:a})),"function"===typeof je[l]&&je[l]({value:r,dispatch:o,state:p,persist:a}),u||o(Object(z.A)(a))}var S=Object(l.useState)(0),k=Object(n.a)(S,2),R=k[0],M=k[1],W=Object(l.useState)(""),U=Object(n.a)(W,2),Y=U[0],G=U[1],V=Object(l.useState)(!1),B=Object(n.a)(V,2),K=B[0],q=B[1],H=Object(l.useState)(!1),$=Object(n.a)(H,2),Q=$[0],Z=$[1],J=Object(l.useState)(!1),ee=Object(n.a)(J,2),ae=ee[0],ne=ee[1],le=Object(l.useState)(!1),se=Object(n.a)(le,2),ce=se[0],ie=se[1],oe=Object(l.useState)(!1),ue=Object(n.a)(oe,2),pe=ue[0],be=ue[1],Oe=Object(l.useState)(!1),Ee=Object(n.a)(Oe,2),he=Ee[0],ge=Ee[1],Ce=Object(l.useState)(!1),ye=Object(n.a)(Ce,2),Ne=ye[0],Ae=ye[1],Ie=Object(l.useState)(!1),Se=Object(n.a)(Ie,2),Te=Se[0],Le=Se[1],ke=Object(l.useState)(!1),Pe=Object(n.a)(ke,2),Re=Pe[0],xe=Pe[1];Object(l.useEffect)((function(){ie(ve(b)),Ae(!1)}),[b]),Object(l.useEffect)((function(){ge(ve(j)),xe(!1)}),[j]),Object(l.useEffect)((function(){var e;be((e=d,x()(P()(e,(function(e){return Object(w.g)(e[w.b.DOLLAR_AMOUNT]||0)})))>0)),Le(!1)}),[d]),Object(l.useEffect)((function(){if(!h||!v)return M(""),void G("");var e=Object(w.g)(v)-Object(w.g)(h);M(Object(w.c)(e)),G(Object(w.c)(e/12))}),[v,h]),Object(l.useEffect)((function(){var e="";0!==R&&(R&&C&&(e=Object(w.c)(Object(w.g)(R)-Object(w.g)(C))),o(Object(z.l)({calculator:L.j.CAP_RATE,name:"first_year_noi",value:e,persist:a})))}),[R,C,o,a]),Object(l.useEffect)((function(){v&&pe?fe({itemizationValues:d,userItemizationEntryMethods:O,income:v,dispatch:o,persist:a}):function(e){var t=e.vacancy,a=e.capRateValues,n=e.dispatch,l=e.persist,r=a.vacancy_as_dollar,s=a.vacancy_as_percent;t===w.b.DOLLAR_AMOUNT?je.vacancy_as_dollar({value:r,dispatch:n,state:a,persist:l}):je.vacancy_as_percent({value:s,dispatch:n,state:a,persist:l})}({vacancy:A,capRateValues:p,isVacancyItemized:pe,dispatch:o,persist:a})}),[v,pe,a]),Object(l.useEffect)((function(){if(N&&f){var e=function(e){var t=e.first_year_noi,a=e.purchase_price;return{label:"Cap Rate",results:Object(w.d)(Object(w.g)(t)/Object(w.g)(a)),displayFormat:"percent"}}({first_year_noi:N,purchase_price:f});o(Object(z.a)({name:"cap_rate",value:e,persist:a}))}else o(Object(z.t)({name:"cap_rate",persist:a}))}),[N,f,o,a]);var Fe=Object(l.useCallback)((function(e){e.stopPropagation(),q(!0)}),[]),De=Object(l.useCallback)((function(){q(!1)}),[]),ze=Object(l.useCallback)((function(e){e.stopPropagation(),Z(!0)}),[]),we=Object(l.useCallback)((function(){Z(!1)}),[]),Me=Object(l.useCallback)((function(e){e.stopPropagation(),ne(!0)}),[]),We=Object(l.useCallback)((function(){ne(!1)}),[]);return r.a.createElement("div",{className:i.calcContainer},r.a.createElement(F.a,{inputProps:{inputMode:"numeric",pattern:"[0-9]*"},className:Object(s.a)(i.margin,i.fullWidthInput),label:"Purchase Price:",variant:"outlined",value:f,onChange:I,name:"purchase_price",fullWidth:!0,InputProps:{classes:{input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$")},InputLabelProps:{classes:{root:Object(s.a)(i.inputLabel,i.fullWidthLabel),shrink:"fullInputShrink"}}}),Ne&&r.a.createElement(T.e,{field:"Income"}),r.a.createElement("div",{className:i.lineInputsContainer},r.a.createElement(F.a,{inputProps:{inputMode:"numeric",pattern:"[0-9]*"},className:Object(s.a)(i.margin,i.smallInput),label:"Potential Gross Income:",variant:"outlined",value:ce?Object(w.c)(Object(w.g)(v)):v,onChange:I,name:"potential_annual_gross_income",disabled:ce,onClick:ce?function(){return Ae(!0)}:void 0,InputProps:{classes:{input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$"),endAdornment:r.a.createElement(D.a,{position:"end"},r.a.createElement(me.H,{className:i.listIcon,onClick:Fe}))},InputLabelProps:{classes:{root:i.inputLabel,shrink:"shrink"}}}),r.a.createElement("span",{className:i.inputsDivider}),r.a.createElement(F.a,{inputProps:{inputMode:"numeric",pattern:"[0-9]*"},className:Object(s.a)(i.margin,i.smallInput),label:"Monthly Income:",variant:"outlined",value:ce?Object(w.c)(Object(w.g)(E)):E,onChange:I,name:"potential_monthly_gross_income",disabled:ce,onClick:ce?function(){return Ae(!0)}:void 0,InputProps:{classes:{input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$")},InputLabelProps:{classes:{root:i.inputLabel,shrink:"shrink"}}})),Te&&r.a.createElement(T.e,{field:"Vacancy"}),r.a.createElement("div",{className:i.lineInputsContainer},r.a.createElement(F.a,{inputProps:{inputMode:"numeric",pattern:"[0-9]*"},className:Object(s.a)(i.margin,i.smallInput),label:"Vacancy as $:",variant:"outlined",value:pe?Object(w.c)(Object(w.g)(h)):h,disabled:pe,onClick:pe?function(){return Le(!0)}:void 0,onChange:I,name:"vacancy_as_dollar",InputProps:{classes:{input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$"),endAdornment:r.a.createElement(D.a,{position:"end"},r.a.createElement(me.H,{className:i.listIcon,onClick:ze}))},InputLabelProps:{classes:{root:i.inputLabel,shrink:"shrink"}}}),r.a.createElement("span",{className:i.inputsDivider}),r.a.createElement(F.a,{inputProps:{inputMode:"decimal"},className:Object(s.a)(i.margin,i.smallInput),label:"Vacancy as %:",variant:"outlined",value:g,disabled:pe,onClick:pe?function(){return Le(!0)}:void 0,onChange:I,name:"vacancy_as_percent",InputProps:{classes:{input:Object(s.a)(i.input,i.inputWithPadding)},endAdornment:r.a.createElement(D.a,{position:"end",classes:{root:i.inputAdornment}},"%")},InputLabelProps:{classes:{root:i.inputLabel,shrink:"shrink"},shrink:!0}})),r.a.createElement("div",{className:i.lineInputsContainer},r.a.createElement(F.a,{className:Object(s.a)(i.margin,i.smallInput),label:"Effective Gross Income:",variant:"outlined",value:R,onChange:function(){},name:"effectiveAnnual",disabled:!0,InputProps:{classes:{input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$")},InputLabelProps:{classes:{root:i.inputLabel,shrink:"shrink"}}}),r.a.createElement("span",{className:i.inputsDivider}),r.a.createElement(F.a,{className:Object(s.a)(i.margin,i.smallInput),label:"Monthly Income:",variant:"outlined",value:Y,onChange:function(){},name:"effectiveMonthly",disabled:!0,InputProps:{classes:{input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$")},InputLabelProps:{classes:{root:i.inputLabel,shrink:"shrink"}}})),Re&&r.a.createElement(T.e,{field:"Expense"}),r.a.createElement("div",{className:i.lineInputsContainer},r.a.createElement(F.a,{inputProps:{inputMode:"numeric",pattern:"[0-9]*"},className:Object(s.a)(i.margin,i.smallInput),label:"Annual Expenses:",variant:"outlined",value:he?Object(w.c)(Object(w.g)(C)):C,disabled:he,onClick:he?function(){return xe(!0)}:void 0,onChange:I,name:"annual_expenses",InputProps:{classes:{input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$"),endAdornment:r.a.createElement(D.a,{position:"end"},r.a.createElement(me.H,{className:i.listIcon,onClick:Me}))},InputLabelProps:{classes:{root:i.inputLabel,shrink:"shrink"}}}),r.a.createElement("span",{className:i.inputsDivider}),r.a.createElement(F.a,{inputProps:{inputMode:"numeric",pattern:"[0-9]*"},className:Object(s.a)(i.margin,i.smallInput),label:"Monthly Expenses:",variant:"outlined",value:he?Object(w.c)(Object(w.g)(y)):y,disabled:he,onClick:he?function(){return xe(!0)}:void 0,onChange:I,name:"monthly_expenses",InputProps:{classes:{input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$")},InputLabelProps:{classes:{root:i.inputLabel,shrink:"shrink"}}})),r.a.createElement(F.a,{className:Object(s.a)(i.margin,i.fullWidthInput),label:"First year NOI:",variant:"outlined",value:N,onChange:function(){},name:"first_year_noi",fullWidth:!0,disabled:!0,InputProps:{classes:{input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$")},InputLabelProps:{classes:{root:Object(s.a)(i.inputLabel,i.fullWidthLabel),shrink:"fullInputShrink"}}}),K&&r.a.createElement(X,{open:K,handleClose:De,storeSliceName:t,persist:a}),Q&&r.a.createElement(te,{open:Q,handleClose:we,storeSliceName:t,persist:a}),ae&&r.a.createElement(re,{open:ae,handleClose:We,storeSliceName:t,persist:a}))}var je={potential_annual_gross_income(e){var t=e.value,a=e.dispatch,n=(e.state,e.persist);a(Object(z.l)({calculator:L.j.CAP_RATE,name:"potential_monthly_gross_income",value:Object(w.e)(Object(w.g)(t)/12),persist:n})),a(Object(z.b)({name:w.a.POTENTIAL_GROSS_INCOME,value:w.b.ANNUAL,persist:n}))},potential_monthly_gross_income(e){var t=e.value,a=e.dispatch,n=(e.state,e.persist);a(Object(z.l)({calculator:L.j.CAP_RATE,name:"potential_annual_gross_income",value:Object(w.e)(12*Object(w.g)(t)),persist:n})),a(Object(z.b)({name:w.a.POTENTIAL_GROSS_INCOME,value:w.b.MONTHLY,persist:n}))},vacancy_as_dollar(e){var t=e.value,a=e.dispatch,n=e.state,l=e.persist,r=n.potential_annual_gross_income;r&&(a(Object(z.l)({calculator:L.j.CAP_RATE,name:"vacancy_as_percent",value:Object(w.d)(Object(w.g)(t)/Object(w.g)(r)),persist:l})),a(Object(z.b)({name:w.a.VACANCY,value:w.b.DOLLAR_AMOUNT,persist:l})))},vacancy_as_percent(e){var t=e.value,a=e.dispatch,n=e.state,l=e.persist;n.potential_annual_gross_income&&(a(Object(z.l)({calculator:L.j.CAP_RATE,name:"vacancy_as_dollar",value:t?Object(w.e)(Object(w.f)(t)*Object(w.g)(n.potential_annual_gross_income)):"",persist:l})),a(Object(z.b)({name:w.a.VACANCY,value:w.b.PERCENT_AMOUNT,persist:l})))},annual_expenses(e){var t=e.value,a=e.dispatch,n=(e.state,e.persist);a(Object(z.l)({calculator:L.j.CAP_RATE,name:"monthly_expenses",value:Object(w.e)(Object(w.g)(t)/12),persist:n})),a(Object(z.b)({name:w.a.EXPENSES,value:w.b.ANNUAL,persist:n}))},monthly_expenses(e){var t=e.value,a=e.dispatch,n=(e.state,e.persist);a(Object(z.l)({calculator:L.j.CAP_RATE,name:"annual_expenses",value:Object(w.e)(12*Object(w.g)(t)),persist:n})),a(Object(z.b)({name:w.a.POTENTIAL_GROSS_INCOME,value:w.b.MONTHLY,persist:n}))}};function _e(e,t){switch(e){case"purchase_price":case"potential_annual_gross_income":case"potential_monthly_gross_income":case"vacancy_as_dollar":case"annual_expenses":case"monthly_expenses":case"first_year_noi":return Object(w.e)(Object(w.g)(t));default:return t}}var fe=j()((function(e){var t=e.itemizationValues,a=void 0===t?{}:t,n=e.userItemizationEntryMethods,l=void 0===n?{}:n,r=e.income,s=e.dispatch,c=e.persist,i=Object.keys(a).reduce((function(e,t){var n=l[t],s=ae({nestedKey:n||w.b.DOLLAR_AMOUNT,value:a[t][n]||0,potential_annual_gross_income:r});return e[t]=Object(p.a)({},s),e}),{}),o=ne(i,r),u=o[w.b.DOLLAR_AMOUNT],m=o[w.b.PERCENT_AMOUNT];s(Object(z.C)({name:L.j.VACANCY,value:i,persist:c})),s(Object(z.m)({calculator:L.j.CAP_RATE,valuesObj:{vacancy_as_dollar:u,vacancy_as_percent:m},persist:c}))}),300);function ve(e){return x()(P()(e,(function(e){return Object(w.g)(e[w.b.ANNUAL])+Object(w.g)(e[w.b.MONTHLY])})))>0}function Ee(e){var t=0,a=0;if(Array.isArray(e)){var n=e.map((function(e){return{amount:e.amount?parseFloat("".concat(e.amount).replace(/,/g,"")):0,rate:e.rate?parseFloat("".concat(e.rate).replace(/,/g,"")):0}}));t=n&&n.map((function(e){return e.amount})).reduce((function(e,t){return e+t})),a=n.reduce((function(e,t){return e+t.amount*(t.rate/100)}),0)/t}return{totalLoan:t,blendedRate:a?+parseFloat(100*a).toFixed(3):0}}var he=Object($.a)((function(e){return Object(p.a)({},Object(be.a)(e))}));function ge(e){var t=e.storeSliceName,a=e.persist,i=he(),o=Object(c.d)(),u=Object(l.useState)(!1),m=Object(n.a)(u,2),b=m[0],O=m[1],j=Object(c.e)((function(e){return e[t].dirty})),_=Object(c.e)((function(e){return e[t][L.j.EQUITY_NEEDED]}),c.c),f=Object(c.e)((function(e){return e[t][L.j.CAP_RATE].purchase_price})),v=Object(c.e)((function(e){return e[t][L.j.CAP_RATE].first_year_noi})),E=Object(c.e)((function(e){return e[t].userEntryMethods}),c.c),h=Object(c.e)((function(e){var a;return null===(a=e[t].itemizations)||void 0===a?void 0:a[L.j.CLOSING_COSTS]}),c.c),g=Object(c.e)((function(e){var a;return null===(a=e[t].itemizationsPercentOf)||void 0===a?void 0:a[w.a.CLOSING_COST_ITEMIZED]}),c.c),C=Object(c.e)((function(e){var a;return null===(a=e[t].userItemizationEntryMethods)||void 0===a?void 0:a[L.j.CLOSING_COSTS]}),c.c),y=E.closingCost,N=E.loanAmount,A=E.loanAmountOf,I=_||{},S=I.closing_costs_dollar,k=I.closing_costs_percent,R=I.loan_amount_dollar,M=I.loan_amount_percent,W=I.total_capitalization,U=I.loans;function Y(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,l=t.name,r=parseFloat(n.replace(/[^0-9.]/g,""));o(Object(z.l)({calculator:L.j.EQUITY_NEEDED,name:l,value:Ne(l,n),persist:a})),o(Object(z.y)({name:"equityNeeded",persist:a})),"function"===typeof Ce[l]&&Ce[l]({value:r,dispatch:o,state:Object(p.a)(Object(p.a)({},_),{},{purchase_price:f}),meta:{loanAmountOf:B},persist:a}),j||o(Object(z.A)(a))}var G=Object(l.useState)(A||"purchasePrice"),V=Object(n.a)(G,2),B=V[0],K=V[1],q=Object(l.useState)(!1),H=Object(n.a)(q,2),$=H[0],Q=H[1],Z=Object(l.useState)(U),X=Object(n.a)(Z,2),J=X[0],ee=X[1],te=Object(l.useState)(0),ae=Object(n.a)(te,2),ne=ae[0],le=ae[1],re=Object(l.useState)(0),se=Object(n.a)(re,2),ce=se[0],ie=se[1],ue=Object(l.useState)(0),pe=Object(n.a)(ue,2),be=pe[0],de=pe[1],Oe=Object(l.useState)(!1),je=Object(n.a)(Oe,2),_e=je[0],fe=je[1],ve=Object(l.useState)(!1),ge=Object(n.a)(ve,2),Ae=ge[0],Ie=ge[1],Se=Object(l.useState)(!1),Te=Object(n.a)(Se,2),Le=Te[0],ke=Te[1];Object(l.useEffect)((function(){f&&R&&Ae||(y===w.b.DOLLAR_AMOUNT?Ce.closing_costs_dollar({value:S,dispatch:o,state:Object(p.a)(Object(p.a)({},_),{},{purchase_price:f}),persist:a}):Ce.closing_costs_percent({value:k,dispatch:o,state:Object(p.a)(Object(p.a)({},_),{},{purchase_price:f}),persist:a}))}),[f,Ae,a]),Object(l.useEffect)((function(){f&&R&&Ae&&ye({itemizationValues:h,percentOfAmountObj:{loan_amount_dollar:R,purchase_price:f},percentOfFields:g,userItemizationEntryMethods:C,purchasePrice:f,dispatch:o,persist:a})}),[R,f,Ae,a]),Object(l.useEffect)((function(){!function(e){var t=e.state,a=e.dispatch,n=e.persist,l=t.purchase_price,r=t.closing_costs_dollar,s="";l&&r&&(s=Object(w.g)(r)+Object(w.g)(l));a(Object(z.l)({calculator:L.j.EQUITY_NEEDED,name:"total_capitalization",value:s,persist:n}))}({state:Object(p.a)(Object(p.a)({},_),{},{purchase_price:f}),dispatch:o,persist:a})}),[S,f]),Object(l.useEffect)((function(){!function(e){var t=e.loanAmountOf,a=e.loanAmountMethod,n=e.state,l=e.dispatch,r=e.persist,s=n.loan_amount_dollar,c=n.loan_amount_percent;a===w.b.PERCENT_AMOUNT?Ce.loan_amount_percent({value:c,dispatch:l,state:n,meta:{loanAmountOf:t},persist:r}):Ce.loan_amount_dollar({value:s,dispatch:l,state:n,meta:{loanAmountOf:t},persist:r})}({loanAmountOf:B,loanAmountMethod:N,state:Object(p.a)(Object(p.a)({},_),{},{purchase_price:f}),dispatch:o,persist:a})}),[o,N,B,f,W,R,a]),Object(l.useEffect)((function(){Q(!f)}),[f]),Object(l.useEffect)((function(){if(R&&W){var e=function(e){var t=e.loan_amount_dollar,a=e.total_capitalization;return{label:"Equity Needed",results:Object(w.g)(a)-Object(w.g)(t),displayFormat:"dollar"}}({loan_amount_dollar:R,total_capitalization:W});o(Object(z.a)({name:"equity_needed",value:e,persist:a}))}else o(Object(z.t)({name:"equity_needed",persist:a}))}),[R,W,o,a]),Object(l.useEffect)((function(){if(R&&v){var e=function(e){var t=e.loan_amount_dollar,a=e.first_year_noi;return{label:"Debt Yield",results:+parseFloat(Object(w.g)(a)/Object(w.g)(t)*100).toFixed(2),displayFormat:"percent",showDebtYield:!0}}({loan_amount_dollar:R,first_year_noi:v});o(Object(z.a)({name:"debt_yield",value:e,persist:a}))}else o(Object(z.t)({name:"debt_yield",persist:a}))}),[R,v,o,a]);var Pe=Object(l.useCallback)((function(e){K(e),o(Object(z.b)({name:w.a.LOAN_AMOUNT_OF,value:"purchasePrice"===e?w.b.PURCHASE_PRICE:w.b.TOTAL_CAPITALIZATION,persist:a}))}),[o,a]);Object(l.useEffect)((function(){var e=Ee(J);le(Object(w.c)(e.totalLoan)),ie("totalCapitalization"===B?W?Object(w.d)(Object(w.g)(e.totalLoan)/Object(w.g)(W)):"":f?Object(w.d)(Object(w.g)(e.totalLoan)/Object(w.g)(f)):""),de(e.blendedRate)}),[J]),Object(l.useEffect)((function(){ee(U)}),[U]),Object(l.useEffect)((function(){var e;Ie((e=h,x()(P()(e,(function(e){return Object(w.g)(e[w.b.DOLLAR_AMOUNT]||0)})))>0)),ke(!1)}),[h]);var Re=Object(l.useCallback)((function(){d.a.track("ecalc_popup",{popup:"Blended Rates screen"}),O(!0)}),[]);var xe=Object(l.useCallback)((function(e){e.stopPropagation(),fe(!0)}),[]),Fe=Object(l.useCallback)((function(){fe(!1)}),[]),De=Array.isArray(U)&&U.some((function(e){return e.amount}));return r.a.createElement("div",{className:i.calcContainer},$&&r.a.createElement(T.n,{calculator:"Equity Needed",persist:a}),Le&&r.a.createElement(T.e,{field:"Closing Cost"}),r.a.createElement("div",{className:i.lineInputsContainer},r.a.createElement(F.a,{inputProps:{inputMode:"numeric",pattern:"[0-9]*"},className:Object(s.a)(i.margin,i.smallInput),label:"Closing Costs $:",variant:"outlined",value:Ae?Object(w.c)(Object(w.g)(S)):S,disabled:Ae,onClick:Ae?function(){return ke(!0)}:void 0,onChange:Y,name:"closing_costs_dollar",InputProps:{classes:{input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$"),endAdornment:r.a.createElement(D.a,{position:"end"},r.a.createElement(me.H,{className:i.listIcon,onClick:xe}))},InputLabelProps:{classes:{root:i.inputLabel,shrink:"shrink"}}}),r.a.createElement("span",{className:i.inputsDivider}),r.a.createElement(F.a,{inputProps:{inputMode:"decimal"},className:Object(s.a)(i.margin,i.smallInput),label:"Closing cost %:",variant:"outlined",value:k,disabled:Ae,onClick:Ae?function(){return ke(!0)}:void 0,onChange:Y,name:"closing_costs_percent",InputProps:{endAdornment:r.a.createElement(D.a,{position:"end",classes:{root:i.inputAdornment}},"%"),classes:{input:i.inputWithPadding}},InputLabelProps:{classes:{root:i.inputLabel,shrink:"shrink"},shrink:!0}})),r.a.createElement(F.a,{className:Object(s.a)(i.margin,i.fullWidthInput),label:"Total Capitalization:",variant:"outlined",value:Object(w.c)(W),onChange:function(){},name:"total_capitalization",fullWidth:!0,disabled:!0,InputProps:{classes:{input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$")},InputLabelProps:{classes:{root:Object(s.a)(i.inputLabel,i.fullWidthLabel),shrink:"fullInputShrink"},shrink:!0}}),r.a.createElement("div",{className:i.lineInputsContainer},r.a.createElement(F.a,{inputProps:{inputMode:"numeric",pattern:"[0-9]*"},className:Object(s.a)(i.margin,i.smallInput),label:De?"Total Loan Amount":"Loan Amount as $:",disabled:!!De,variant:"outlined",value:De?ne:R,onChange:Y,name:"loan_amount_dollar",InputProps:{classes:{input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$"),endAdornment:r.a.createElement(D.a,{position:"end"},r.a.createElement(me.H,{className:i.listIcon,onClick:Re}))},InputLabelProps:{classes:{root:i.inputLabel,shrink:"shrink"}}}),r.a.createElement("span",{className:i.inputsDivider}),r.a.createElement(F.a,{inputProps:{inputMode:"decimal"},className:Object(s.a)(i.margin,i.smallInput),label:De?"Total Loan Amount as %":"Loan Amount as %:",variant:"outlined",disabled:!!De,value:De?ce:M,onChange:Y,name:"loan_amount_percent",InputProps:{endAdornment:r.a.createElement(D.a,{position:"end",classes:{root:i.inputAdornment}},"%"),classes:{input:i.inputWithPadding}},InputLabelProps:{classes:{root:i.inputLabel,shrink:"shrink"},shrink:!0}})),r.a.createElement("div",{className:i.toggleContainer},r.a.createElement("span",{className:i.toggle},"% of"),r.a.createElement("span",{onClick:function(){return De?{}:Pe("purchasePrice")},className:Object(s.a)(i.toggle,i.pointer,{[i.toggleActive]:"purchasePrice"===B})},"Purchase Price"),r.a.createElement("span",{className:i.toggle},"|"),r.a.createElement("span",{onClick:function(){return De?{}:Pe("totalCapitalization")},className:Object(s.a)(i.toggle,i.pointer,{[i.toggleActive]:"totalCapitalization"===B})},"Total Capitalization")),b&&r.a.createElement(T.b,{loans:J,blendedRate:be,totalLoan:ne,totalLoanPercentage:ce,setLoans:function(e){return ee(e)},onClear:function(){return o(Object(z.d)(a))},onClose:function(){return ee(U),void O(!1)},persist:a}),_e&&r.a.createElement(oe,{open:_e,handleClose:Fe,storeSliceName:t,persist:a}))}var Ce={closing_costs_dollar(e){var t=e.value,a=e.dispatch,n=e.state,l=e.persist,r=n.purchase_price;r&&(console.log("persist1 ",l),a(Object(z.l)({calculator:L.j.EQUITY_NEEDED,name:"closing_costs_percent",value:Object(w.d)(Object(w.g)(t)/Object(w.g)(r)),persist:l})),a(Object(z.b)({name:w.a.CLOSING_COST,value:w.b.DOLLAR_AMOUNT,persist:l})))},closing_costs_percent(e){var t=e.value,a=e.dispatch,n=e.state,l=e.persist,r=n.purchase_price;r&&(a(Object(z.l)({calculator:L.j.EQUITY_NEEDED,name:"closing_costs_dollar",value:t?Object(w.e)(Object(w.f)(t)*Object(w.g)(r)):"",persist:l})),a(Object(z.b)({name:w.a.CLOSING_COST,value:w.b.PERCENT_AMOUNT,persist:l})))},loan_amount_dollar(e){var t=e.value,a=e.dispatch,n=e.state,l=e.meta,r=e.persist,s=l.loanAmountOf,c=n.purchase_price,i=n.total_capitalization;a(Object(z.l)({calculator:L.j.EQUITY_NEEDED,name:"loan_amount_percent",value:"totalCapitalization"===s?i?Object(w.d)(Object(w.g)(t)/Object(w.g)(i)):"":c?Object(w.d)(Object(w.g)(t)/Object(w.g)(c)):"",persist:r})),a(Object(z.b)({name:w.a.LOAN_AMOUNT,value:w.b.DOLLAR_AMOUNT,persist:r}))},loan_amount_percent(e){var t=e.value,a=e.dispatch,n=e.state,l=e.meta,r=e.persist,s=l.loanAmountOf,c=n.purchase_price,i=n.total_capitalization;a(Object(z.l)({calculator:L.j.EQUITY_NEEDED,name:"loan_amount_dollar",value:t?Object(w.e)("totalCapitalization"===s?i?Object(w.f)(t)*Object(w.g)(i):"":c?Object(w.f)(t)*Object(w.g)(c):""):"",persist:r})),a(Object(z.b)({name:w.a.LOAN_AMOUNT,value:w.b.PERCENT_AMOUNT,persist:r}))}},ye=j()((function(e){var t=e.itemizationValues,a=void 0===t?{}:t,n=e.userItemizationEntryMethods,l=void 0===n?{}:n,r=e.percentOfAmountObj,s=e.percentOfFields,c=e.purchasePrice,i=e.dispatch,o=e.persist,u=Object.keys(a).reduce((function(e,t){var n=l[t]||w.b.DOLLAR_AMOUNT,c=ue({nestedKey:n,value:a[t][n],percentOfAmount:r[s[t]],canBeSynced:a[t].hasOwnProperty("percent")});return e[t]=Object(p.a)({},c),e}),{}),m=pe({itemizationValues:u,purchasePrice:c,canShowPercent:!0}),b=m[w.b.DOLLAR_AMOUNT],d=m[w.b.PERCENT_AMOUNT];i(Object(z.m)({calculator:L.j.EQUITY_NEEDED,valuesObj:{closing_costs_dollar:b,closing_costs_percent:d},persist:o})),i(Object(z.C)({name:L.j.CLOSING_COSTS,value:u,persist:o}))}),300);function Ne(e,t){switch(e){case"closing_costs_dollar":case"loan_amount_dollar":return Object(w.e)(Object(w.g)(t));default:return t}}var Ae=a(118),Ie=Object($.a)((function(e){return Object(p.a)({},Object(be.a)(e))})),Se=a(158),Te=a(351);function Le(e){var t=e.storeSliceName,a=e.persist,i=Ie(),o=Object(c.d)(),u=Object(c.e)((function(e){return e[t].dirty})),m=Object(c.e)((function(e){return e[t][L.j.MORTGAGE_AND_DSCR]}),c.c),b=Object(c.e)((function(e){return e[t][L.j.EQUITY_NEEDED].total_capitalization})),O=Object(c.e)((function(e){return e[t][L.j.EQUITY_NEEDED].loan_amount_dollar})),j=Object(c.e)((function(e){return e[t][L.j.EQUITY_NEEDED].loans})),_=Object(c.e)((function(e){return e[t][L.j.CAP_RATE].first_year_noi})),f=m||{},v=f.interest_rate,E=f.init_loan_term_yrs,h=f.io_years,g=f.amortization_years,C=Object(c.e)((function(e){return e[t][L.j.CAP_RATE].purchase_price})),y=Object(c.e)((function(e){return e[t].resultsValues.mortgage_post_io}),c.c),N=Object(c.e)((function(e){return e[t].resultsValues.mortgage_during_io}),c.c),A=Object(c.e)((function(e){return e[t].userEntryMethods}),c.c).loanAmountOf,I=Object(l.useState)(!!h),S=Object(n.a)(I,2),k=S[0],P=S[1],R=Object(l.useState)(!1),x=Object(n.a)(R,2),M=x[0],W=x[1],U=Object(l.useState)(!1),Y=Object(n.a)(U,2),G=Y[0],V=Y[1],B=Object(l.useState)(!1),K=Object(n.a)(B,2),q=K[0],H=K[1],$=Object(l.useCallback)((function(){d.a.track("Rates Modal Opened"),H(!0)}),[]),Q=Object(l.useCallback)((function(){H(!1)}),[]);function Z(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,l=t.name,r=parseFloat(n.replace(/[^0-9.]/g,""));o(Object(z.l)({calculator:"loan_amount_dollar"!==l?L.j.MORTGAGE_AND_DSCR:L.j.EQUITY_NEEDED,name:l,value:Pe(l,n),persist:a})),o(Object(z.y)({name:"mortgage",persist:a})),"function"===typeof ke[l]&&ke[l]({value:r,dispatch:o,state:Object(p.a)(Object(p.a)({},m),{},{loan_amount_dollar:O}),meta:{},persist:a}),u||o(Object(z.A)(a))}Object(l.useEffect)((function(){if(O&&v&&g){var e=Object(Ae.f)({loan_amount_dollar:O,interest_rate:v,amortization_years:g,io_years:h});if(o(Object(z.a)({name:"mortgage_post_io",value:e,persist:a})),h){var t=Object(Ae.e)({loan_amount_dollar:O,interest_rate:v});o(Object(z.a)({name:"mortgage_during_io",value:t,persist:a}))}}else o(Object(z.t)({name:"mortgage_post_io",persist:a}))}),[O,v,g,h,o,a]),Object(l.useEffect)((function(){if((null===y||void 0===y?void 0:y.results)||(null===N||void 0===N?void 0:N.results)){var e=Object(Ae.a)({mortgage_during_io:N,mortgage_post_io:y,io_years:h,loan_amount_dollar:O,interest_rate:v,init_loan_term_yrs:E,amortization_years:g});o(Object(z.l)({calculator:L.j.MORTGAGE_AND_DSCR,name:"amortization_schedule",value:e,persist:a}))}}),[N,y,E,a]),Object(l.useEffect)((function(){if(O&&v&&g&&E){var e=Object(Ae.b)({loan_amount_dollar:O,interest_rate:v,amortization_years:g,init_loan_term_yrs:E,io_years:h});o(Object(z.a)({name:"balance_at_maturity",value:e,persist:a}))}else o(Object(z.t)({name:"balance_at_maturity",persist:a}))}),[O,v,g,E,h,o,a]),Object(l.useEffect)((function(){if(O&&v&&g&&_)if(h){var e=Object(Ae.d)({loan_amount_dollar:O,interest_rate:v,amortization_years:g,first_year_noi:_,io_years:h});o(Object(z.t)({name:"dscr_post_io",persist:a})),o(Object(z.a)({name:"dscr_during_post_io",value:e,persist:a}))}else{var t=Object(Ae.c)({loan_amount_dollar:O,interest_rate:v,amortization_years:g,first_year_noi:_});o(Object(z.t)({name:"dscr_during_post_io",persist:a})),o(Object(z.a)({name:"dscr_post_io",value:t,persist:a}))}else o(Object(z.t)({name:"dscr_post_io",persist:a})),o(Object(z.t)({name:"dscr_during_post_io",persist:a}))}),[O,v,_,g,h,o,a]);var X=Object(l.useCallback)((function(){o(Object(z.l)({calculator:L.j.MORTGAGE_AND_DSCR,name:"io_years",value:"",persist:a})),o(Object(z.l)({calculator:L.j.MORTGAGE_AND_DSCR,name:"bank_max_loan_during_io",value:"",persist:a})),o(Object(z.t)({name:"mortgage_during_io",persist:a})),o(Object(z.t)({name:"dscr_during_post_io",persist:a})),P(!1)}),[o,a]),J=Object(l.useState)(j),ee=Object(n.a)(J,2),te=ee[0],ae=ee[1],ne=Object(l.useState)(0),le=Object(n.a)(ne,2),re=le[0],se=le[1],ce=Object(l.useState)(0),ie=Object(n.a)(ce,2),oe=ie[0],ue=ie[1],pe=Object(l.useState)(0),be=Object(n.a)(pe,2),de=be[0],Oe=be[1],je=Object(l.useState)(!1),_e=Object(n.a)(je,2),fe=_e[0],ve=_e[1];Object(l.useEffect)((function(){var e=Ee(te);se(Object(w.c)(e.totalLoan)),ue("totalCapitalization"===A?b?Object(w.d)(Object(w.g)(e.totalLoan)/Object(w.g)(b)):"":C?Object(w.d)(Object(w.g)(e.totalLoan)/Object(w.g)(C)):""),Oe(e.blendedRate)}),[te]),Object(l.useEffect)((function(){ae(j)}),[j]);var he=Object(l.useCallback)((function(){d.a.track("ecalc_popup",{popup:"Blended Rates screen"}),V(!0)}),[]);var ge=Array.isArray(j)&&j.some((function(e){return e.amount}));return r.a.createElement("div",{className:i.calcContainer},r.a.createElement(F.a,{inputProps:{inputMode:"numeric",pattern:"[0-9]*"},className:Object(s.a)(i.margin,i.fullWidthInput),label:ge?"Total Loan Amount: ":"Loan Amount:",disabled:!!ge,variant:"outlined",value:ge?re:O,onChange:Z,name:"loan_amount_dollar",fullWidth:!0,InputProps:{classes:{input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$"),endAdornment:r.a.createElement(D.a,{position:"end"},r.a.createElement(me.H,{className:i.listIcon,onClick:he}))},InputLabelProps:{classes:{root:Object(s.a)(i.inputLabel,i.fullWidthLabel),shrink:"fullInputShrink"}}}),r.a.createElement("div",{className:i.lineInputsContainer},r.a.createElement(F.a,{inputProps:{inputMode:"decimal"},className:Object(s.a)(i.margin,i.smallInput),label:r.a.createElement("span",{style:{display:"flex"}},ge?"Blended Initial Rate":"Interest Rate:",r.a.createElement(me.V,{className:i.rateIcon,onClick:$})),disabled:!!ge,variant:"outlined",value:ge?de:v,onChange:Z,name:"interest_rate",InputProps:{endAdornment:r.a.createElement(D.a,{position:"end",classes:{root:i.inputAdornment}},"%"),classes:{input:i.inputWithPadding}},InputLabelProps:{classes:{root:i.inputLabel,shrink:"shrink"},shrink:!0}}),r.a.createElement("span",{className:i.inputsDivider,style:{height:0}}),r.a.createElement(F.a,{inputProps:{inputMode:"numeric",pattern:"[0-9]*"},className:Object(s.a)(i.margin,i.smallInput),label:"Initial Loan Term (YRS):",variant:"outlined",value:E,onChange:Z,name:"init_loan_term_yrs",InputProps:{classes:{input:i.inputWithPadding}},InputLabelProps:{classes:{root:i.inputLabel,shrink:"shrink"},shrink:!0}})),r.a.createElement("div",{className:i.toggleLink,onClick:k?X:function(){return P(!0)},style:{marginBottom:k?-33:10}},k?"Remove I/O (Interest Only)":"Add I/O (Interest Only)"),k&&r.a.createElement("div",{className:i.lineInputsContainer},r.a.createElement("div",{className:Object(s.a)(i.margin,i.smallInput)}),r.a.createElement("span",{className:i.inputsDivider,style:{height:0}}),r.a.createElement(F.a,{inputProps:{inputMode:"numeric",pattern:"[0-9]*"},className:Object(s.a)(i.margin,i.smallInput),label:"I/O (interest only) Years:",variant:"outlined",value:h,onChange:Z,name:"io_years",InputProps:{classes:{input:i.inputWithPadding}},InputLabelProps:{classes:{root:i.inputLabel,shrink:"shrink"},shrink:!0}})),r.a.createElement(F.a,{inputProps:{inputMode:"numeric",pattern:"[0-9]*"},className:Object(s.a)(i.margin,i.fullWidthInput),label:k?"Amortization after I/O in Years:":"Amortization in Years:",variant:"outlined",value:g,onChange:Z,name:"amortization_years",fullWidth:!0,InputProps:{classes:{input:i.inputWithPadding}},InputLabelProps:{classes:{root:Object(s.a)(i.inputLabel,i.longLabel,i.fullWidthLabel),shrink:"fullInputShrink"},shrink:!0}}),r.a.createElement("div",{className:i.toggleLink,onClick:function(){(function(e){var t=e.fields,a=[];if((void 0===t?[]:t).map((function(e){return e.value?null:a.push(e.name)})),a.length){var n=a.join(", ").replace(/,(?!.*,)/gim," and");return n+=" ".concat(a.length>1?"are":"is"," required!"),o(Object(Se.b)({message:n})),!1}return!0})({fields:[{name:"Loan Amount",value:O},{name:"Interest Rate",value:v},{name:"Amortization Years",value:g}]})&&(d.a.track("amortization modal opened"),ve(!0))}},"View Amortization Schedule"),r.a.createElement(Te.a,null),_?r.a.createElement("div",{className:i.toggleLink,onClick:function(){return W(!0)}},"Figure out Max Bank will Lend"):r.a.createElement(T.o,null),M&&r.a.createElement(T.m,{open:M,handleClose:function(){return W(!1)},storeSliceName:t,persist:a}),G&&r.a.createElement(T.b,{loans:te,blendedRate:de,totalLoan:re,totalLoanPercentage:oe,setLoans:function(e){return ae(e)},onClear:function(){return o(Object(z.d)(a))},onClose:function(){return ae(j),void V(!1)},persist:a}),fe&&r.a.createElement(T.a,{open:fe,onClose:function(){return ve(!1)},onOpen:function(){d.a.track("amortization modal opened"),ve(!0)},storeSliceName:t}),r.a.createElement(T.r,{open:q,handleOpen:$,handleClose:Q}))}var ke={loan_amount_dollar(e){e.value;var t=e.dispatch,a=(e.state,e.meta,e.persist);t(Object(z.b)({name:w.a.LOAN_AMOUNT,value:w.b.DOLLAR_AMOUNT,persist:a}))}};function Pe(e,t){switch(e){case"loan_amount_dollar":case"init_loan_term_yrs":case"amortization_years":return Object(w.e)(Object(w.g)(t));default:return t}}function Re(e){var t=e.first_year_noi,a=e.loan_amount_dollar,n=e.interest_rate,l=e.amortization_years,r=e.io_years,s=t;if(t&&a&&n&&l){var c=Object(Ae.g)({loan_amount_dollar:a,interest_rate:n,amortization_years:l}).annual,i=c;r&&(i=Object(w.g)(a)*(Object(w.g)(n)/100)),s="Invalid Entry"!==c?Object(w.g)(t)-i:c}return{label:"First Year Net Cash Flow",results:s,displayFormat:"dollar"}}var xe=Object($.a)((function(e){return Object(p.a)({},Object(be.a)(e))}));function Fe(e){var t=e.storeSliceName,a=e.persist,i=xe(),o=Object(c.d)(),u=Object(c.e)((function(e){return e[t][L.j.CASH_ON_CASH]}),c.c),p=Object(c.e)((function(e){return e[t][L.j.EQUITY_NEEDED]}),c.c),m=Object(c.e)((function(e){return e[t][L.j.MORTGAGE_AND_DSCR]}),c.c),b=Object(c.e)((function(e){return e[t][L.j.CAP_RATE].first_year_noi})),d=u||{},O=d.equity_needed,j=d.first_year_cash_flow,_=p||{},f=_.total_capitalization,v=_.loan_amount_dollar,E=m||{},h=E.interest_rate,g=E.amortization_years,C=E.io_years,y=Object(l.useState)(!1),N=Object(n.a)(y,2),A=N[0],I=N[1];return Object(l.useEffect)((function(){var e="";f&&v&&(e=Object(w.c)(Object(w.g)(f)-Object(w.g)(v))),o(Object(z.l)({calculator:L.j.CASH_ON_CASH,name:"equity_needed",value:e,persist:a}))}),[f,v,o,a]),Object(l.useEffect)((function(){I(!(f&&v&&h&&g))}),[f,v,h,g]),Object(l.useEffect)((function(){var e="";if(b){var t=Re({first_year_noi:b,loan_amount_dollar:v,interest_rate:h,amortization_years:g,io_years:C});e=t.results,o(Object(z.a)({name:"first_year_cash_flow",value:t,persist:a}))}else o(Object(z.t)({name:"first_year_cash_flow",persist:a}));o(Object(z.l)({calculator:L.j.CASH_ON_CASH,name:"first_year_cash_flow",value:e,persist:a}))}),[b,v,h,g,C,o,a]),Object(l.useEffect)((function(){if(b&&O){var e=function(e){var t=e.first_year_noi,a=e.loan_amount_dollar,n=e.interest_rate,l=e.amortization_years,r=e.equity_needed,s=Re({first_year_noi:t,loan_amount_dollar:a,interest_rate:n,amortization_years:l,io_years:e.io_years}).results;return{label:"First Year Cash on Cash Return",results:"Invalid Entry"!==s?Object(w.d)(Object(w.g)(s)/Object(w.g)(r)):s,displayFormat:"percent"}}({first_year_noi:b,loan_amount_dollar:v,interest_rate:h,amortization_years:g,equity_needed:O,io_years:C});o(Object(z.a)({name:"cash_on_cash_return",value:e,persist:a}))}else o(Object(z.t)({name:"cash_on_cash_return",persist:a}))}),[b,v,h,g,O,C,o,a]),r.a.createElement("div",{className:i.calcContainer,style:{width:"100%"}},A&&r.a.createElement(T.n,{calculator:"Cash On Cash",persist:a}),r.a.createElement(F.a,{className:Object(s.a)(i.margin,i.fullWidthInput),label:"Equity Needed:",variant:"outlined",value:O,onChange:function(){},name:"equity_needed",fullWidth:!0,disabled:!0,InputProps:{classes:{input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$")},InputLabelProps:{classes:{root:Object(s.a)(i.inputLabel,i.fullWidthLabel),shrink:"fullInputShrink"}}}),r.a.createElement(F.a,{className:Object(s.a)(i.margin,i.fullWidthInput),label:"First Year Net Cash Flow (NCF):",variant:"outlined",value:Object(w.c)(j),onChange:function(){},name:"first_year_cash_flow",fullWidth:!0,disabled:!0,InputProps:{classes:{input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$")},InputLabelProps:{classes:{root:Object(s.a)(i.inputLabel,i.longLabel,i.fullWidthLabel),shrink:"fullInputShrink"}}}))}var De=a(730);function ze(e,t){if(e.length){var a=e[0],n=e[e.length-1];return+parseFloat(100*(Math.pow(n/a,1/t)-1)).toFixed(3)||0}}var we=a(266),Me=Object($.a)((function(e){return Object(p.a)(Object(p.a)({},Object(be.a)(e)),{},{capitalEvent:{fontFamily:"Karla",margin:"16px 0",fontWeight:"bold",fontSize:"15px",textDecorationLine:"underline",color:"#10B8C7",opacity:function(e){return e.capitalEventEligible?.8:.4},cursor:function(e){return e.capitalEventEligible?"pointer":"text"},display:"inline-block"}})}));function We(e){var t=e.storeSliceName,a=e.persist,i=Object(c.d)(),o=Object(l.useState)(!1),p=Object(n.a)(o,2),m=p[0],b=p[1],O=Object(c.e)((function(e){return e[t].dirty})),j=Object(c.e)((function(e){return e[t][L.j.IRR]}),c.c),_=Object(c.e)((function(e){return e[t][L.j.CAP_RATE].first_year_noi})),f=Object(c.e)((function(e){return e[t][L.j.CAP_RATE].annual_expenses})),v=Object(c.e)((function(e){return e[t][L.j.CAP_RATE].potential_annual_gross_income})),E=Object(c.e)((function(e){return e[t][L.j.CAP_RATE].vacancy_as_percent})),h=Object(c.e)((function(e){return e[t][L.j.CASH_ON_CASH].equity_needed})),g=Object(c.e)((function(e){return e[t][L.j.EQUITY_NEEDED]})),C=g.loan_amount_dollar,y=g.total_capitalization,N=Object(c.e)((function(e){return e[t][L.j.MORTGAGE_AND_DSCR]}),c.c),A=Object(c.e)((function(e){return e[t].resultsValues.mortgage_post_io}),c.c),I=Object(c.e)((function(e){return e[t].resultsValues.mortgage_during_io}),c.c),S=N||{},k=S.interest_rate,P=S.init_loan_term_yrs,R=S.io_years,x=S.amortization_years,M=Object(c.e)((function(e){return e[t].irrSchedule}),c.c),W=Object(c.e)((function(e){return e[t].irrCapitalEvent}),c.c),U=W.hasCapitalEvent,Y=W.capitalEventType,G=W.capitalEventYear,V=W.capitalEventInterestRate,B=W.capitalEventAmortizationYears,K=W.capitalEventLoanAmount,q=W.capitalEventNetLoan,H=j||{},$=H.holding_period_yrs,Q=H.projected_gross_income_rate,Z=H.stabilized_vacancy,X=H.projected_annual_expense,J=H.projected_cap_rate_at_sale,ee=H.projected_closing_costs_at_sale,te=H.year_of_stabilization,ae=M||{},ne=ae.pgi,le=ae.stabilized_vacancies,re=ae.expenses,se=ae.noi,ce=ae.irr,ie=ae.grand_total_distribution,oe=ae.capitalEventGrandTotalDistFromSale,ue=ae.capitalEventIRR,pe=$&&$>1,be=Me({capitalEventEligible:pe}),de=Object(l.useState)(""),Oe=Object(n.a)(de,2),je=Oe[0],_e=Oe[1],fe=Object(l.useState)(""),ve=Object(n.a)(fe,2),Ee=ve[0],he=ve[1],ge=Object(l.useState)(""),Ce=Object(n.a)(ge,2),ye=Ce[0],Ne=Ce[1],Ie=Object(l.useCallback)((function(){d.a.track("ecalc_popup",{popup:"IRR Schedule"}),b(!0)}),[]);function Se(e){var t=e.pgi,n=e.stabilized_vacancies,l=e.expenses,r=Object(Ae.b)({loan_amount_dollar:C,interest_rate:k,amortization_years:x,holding_period_yrs:$,io_years:R}),s=A&&A.results.find((function(e){return"Annual"===e.name})).value,c=I&&I.results.find((function(e){return"Annual"===e.name})).value,o=r&&r.results,u=Object(we.a)({holding_period_yrs:$,projected_gross_income_rate:Q,stabilized_vacancy:Z,projected_annual_expense:X,projected_cap_rate_at_sale:J,projected_closing_costs_at_sale:ee,potential_annual_gross_income:v,vacancy_as_percent:E,annual_expenses:f,io_years:R,amortization_years:x,mortgage_balance_amount:o,annual_mortgage_post_io:s,annual_mortgage_during_io:c,equity_needed:h,pgi:t,stabilized_vacancies:n,expenses:l,year_of_stabilization:te,total_capitalization:y,hasCapitalEvent:U,capitalEventType:Y,capitalEventYear:G,capitalEventInterestRate:V,capitalEventAmortizationYears:B,capitalEventLoanAmount:K,capitalEventNetLoan:q});i(Object(z.r)(u,a))}function Te(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,l=t.name;i(Object(z.l)({calculator:L.j.IRR,name:l,value:Ue(l,n),persist:a})),i(Object(z.y)({name:"irr",persist:a})),O||i(Object(z.A)(a))}Object(l.useEffect)((function(){te&&$<te&&i(Object(z.l)({calculator:L.j.IRR,name:"year_of_stabilization",value:"",persist:a}))}),[te,$,i,a]),Object(l.useEffect)((function(){Se({pgi:[],stabilized_vacancies:le,expenses:re})}),[Q]),Object(l.useEffect)((function(){Se({pgi:ne,stabilized_vacancies:[],expenses:re})}),[Z,te]),Object(l.useEffect)((function(){Se({pgi:ne,stabilized_vacancies:le,expenses:[]})}),[X]),Object(l.useEffect)((function(){if(ne.length&&le.length&&re.length){var e=ze(ne.map((function(e){return e.amount})),$),t=ze(re.map((function(e){return e.amount})),$);_e(e),he(t)}var a=ze(se,$);Ne(a)}),[ne,le,re]),Object(l.useEffect)((function(){Se({pgi:ne,stabilized_vacancies:le,expenses:re})}),[$,J,ee,v,E,f,R,x,h,C,k,A,I,U,Y,G,V,B,K,q]);var Le=Object(l.useState)(!1),ke=Object(n.a)(Le,2),Pe=ke[0],Re=ke[1];Object(l.useEffect)((function(){Re(!(_&&h&&C&&k&&P&&x))}),[_,h,C,k,P,x]),Object(l.useEffect)((function(){m&&i(Object(z.x)(a))}),[m,i,a]),Object(l.useEffect)((function(){i(ce?ue?Object(z.a)({name:"irr",value:{label:"Internal Rate of Return",results:[{name:"With Capital Event",value:ue,displayFormat:"percent"},{name:"Without Capital Event",value:ce,displayFormat:"percent"}],showIRRSchedule:!0},persist:a}):Object(z.a)({name:"irr",value:{label:"IRR",results:ce,displayFormat:"percent",showIRRSchedule:!0},persist:a}):Object(z.t)({name:"irr",persist:a}))}),[ce,ue,i,a]),Object(l.useEffect)((function(){if(ie&&h){var e=function(e){var t=e.grand_total_distribution,a=e.equity_needed;return{label:"Equity Multiple",results:+parseFloat(Object(w.g)(t)/Object(w.g)(a)).toFixed(3),displayFormat:"times"}}({grand_total_distribution:U&&oe?oe:ie,equity_needed:h});i(Object(z.a)({name:"equity_multiple",value:e,persist:a}))}else i(Object(z.t)({name:"equity_multiple",persist:a}))}),[ie,U,oe,h,i,a]);var xe=Object(me.cb)();return r.a.createElement("div",{className:be.calcContainer,style:{width:"100%"}},Pe&&r.a.createElement(T.n,{calculator:"IRR",persist:a}),r.a.createElement(F.a,{select:!0,className:Object(s.a)(be.margin,be.fullWidthInput),style:{width:"100%"},label:"Holding Period in Years:",variant:"outlined",value:$,onChange:Te,name:"holding_period_yrs",fullWidth:!0,InputProps:{classes:{input:Object(s.a)(be.inputOverride,be.inputWithPadding)}},InputLabelProps:{classes:{root:Object(s.a)(be.inputLabel,be.fullWidthLabel),shrink:"fullInputShrink"},shrink:!0}},Ye.map((function(e){return r.a.createElement(De.a,{key:e,value:e},e)}))),r.a.createElement(F.a,{inputProps:{inputMode:"decimal"},className:Object(s.a)(be.margin,be.fullWidthInput),style:{width:"100%"},label:r.a.createElement("span",null,"Projected Annual ",r.a.createElement("strong",null,"Potential Gross Income ")," Growth Rate:"),variant:"outlined",value:je>0?je:Q,onChange:Te,name:"projected_gross_income_rate",InputProps:{style:{marginTop:xe?30:void 0},classes:{input:be.input},endAdornment:r.a.createElement(D.a,{position:"start",classes:{root:be.inputAdornment}},"%"),startAdornment:r.a.createElement(D.a,{position:"end"},r.a.createElement(me.H,{onClick:Ie,className:be.listIcon,style:{marginRight:15}}))},InputLabelProps:{classes:{root:Object(s.a)(be.inputLabel,be.extraLongLabel,be.fullWidthLabel),shrink:"fullInputShrink"}}}),r.a.createElement(F.a,{inputProps:{inputMode:"decimal"},className:Object(s.a)(be.margin,be.fullWidthInput),style:{width:"100%"},label:"Stabilized Vacancy:",variant:"outlined",value:Z,onChange:Te,name:"stabilized_vacancy",InputProps:{classes:{input:be.input},endAdornment:r.a.createElement(D.a,{position:"start",classes:{root:be.inputAdornment}},"%"),startAdornment:r.a.createElement(D.a,{position:"end"},r.a.createElement(me.H,{onClick:Ie,className:be.listIcon,style:{marginRight:15}}))},InputLabelProps:{classes:{root:Object(s.a)(be.inputLabel,be.fullWidthLabel),shrink:"fullInputShrink"}}}),r.a.createElement(F.a,{inputProps:{inputMode:"decimal"},className:Object(s.a)(be.margin,be.fullWidthInput),style:{width:"100%"},label:r.a.createElement("span",null,"Projected Annual ",r.a.createElement("strong",null,"Expense")," Growth Rate:"),variant:"outlined",value:Ee>0?Ee:X,onChange:Te,name:"projected_annual_expense",InputProps:{classes:{input:be.input},endAdornment:r.a.createElement(D.a,{position:"end",classes:{root:be.inputAdornment}},"%"),startAdornment:r.a.createElement(D.a,{position:"end"},r.a.createElement(me.H,{onClick:Ie,className:be.listIcon,style:{marginRight:15}}))},InputLabelProps:{classes:{root:Object(s.a)(be.inputLabel,be.oneLinerLongLabel,be.fullWidthLabel),shrink:"fullInputShrink"}}}),r.a.createElement(F.a,{className:Object(s.a)(be.margin,be.fullWidthInput),label:"Projected Annual NOI Growth Rate:",variant:"outlined",value:ye||"",onChange:function(){},name:"projected_annual_noi_growth_rate",fullWidth:!0,disabled:!0,InputProps:{classes:{input:be.inputWithPadding},endAdornment:r.a.createElement(D.a,{position:"end",classes:{root:be.inputAdornment}},"%")},InputLabelProps:{classes:{root:Object(s.a)(be.inputLabel,be.oneLinerLongLabel,be.fullWidthLabel),shrink:"fullInputShrink"},shrink:!0}}),r.a.createElement(F.a,{inputProps:{inputMode:"decimal"},className:Object(s.a)(be.margin,be.fullWidthInput),label:"Projected Cap Rate at Sale:",variant:"outlined",value:J,onChange:Te,name:"projected_cap_rate_at_sale",fullWidth:!0,InputProps:{classes:{input:be.inputWithPadding},endAdornment:r.a.createElement(D.a,{position:"end",classes:{root:be.inputAdornment}},"%")},InputLabelProps:{classes:{root:Object(s.a)(be.inputLabel,be.longLabel,be.fullWidthLabel),shrink:"fullInputShrink"},shrink:!0}}),r.a.createElement(F.a,{inputProps:{inputMode:"decimal"},className:Object(s.a)(be.margin,be.fullWidthInput),style:{width:"100%"},label:"Projected Closing Costs at Sale:",variant:"outlined",value:ee,onChange:Te,name:"projected_closing_costs_at_sale",InputProps:{classes:{input:be.inputWithPadding},endAdornment:r.a.createElement(D.a,{position:"end",classes:{root:be.inputAdornment}},"%")},InputLabelProps:{classes:{root:Object(s.a)(be.inputLabel,be.longLabel,be.fullWidthLabel),shrink:"fullInputShrink"},shrink:!0}}),$&&r.a.createElement(F.a,{select:!0,className:Object(s.a)(be.margin,be.fullWidthInput),style:{width:"100%"},label:"Year of Stabilization:",variant:"outlined",value:te,onChange:Te,name:"year_of_stabilization",fullWidth:!0,InputProps:{classes:{input:Object(s.a)(be.inputOverride,be.mobileInputWithPadding)}},InputLabelProps:{classes:{root:Object(s.a)(be.inputLabel,be.fullWidthLabel),shrink:"fullInputShrink"},shrink:!0}},Object(u.a)(Array(+$||10)).map((function(e,t){return r.a.createElement(De.a,{key:t,value:t+1},t+1)}))),r.a.createElement("div",{className:be.capitalEvent,onClick:pe?function(){i(U?Object(z.g)(a):Object(z.l)({calculator:L.j.IRR_CAPITAL_EVENT,name:"hasCapitalEvent",value:!U,persist:a}))}:null},U?"Remove":"Add"," Capital Event before Sale"),r.a.createElement(T.k,{storeSliceName:t,persist:a}),m&&r.a.createElement(T.l,{onClose:function(){return b(!1)},calculate:Se,storeSliceName:t}))}function Ue(e,t){switch(e){case"projected_gross_income_rate":case"stabilized_vacancy":case"projected_annual_expense":case"projected_closing_costs_at_sale":case"projected_cap_rate_at_sale":var a=new RegExp("^\\d*(\\.\\d{0,3})?$");return t.match(a)||(t=t.slice(0,-1)),t;default:return t}}var Ye=[1,2,3,4,5,6,7,8,9,10],Ge=new(a(267).Finance);function Ve(e,t){return(10*+e+10*+t)/10}function Be(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Number(((10*+e-10*+t-10*+a)/10).toFixed(8))}function Ke(e,t){return Number((+e*+t).toFixed(8))}function qe(e,t){return Number((+e/+t).toFixed(8))}var He=Object($.a)((function(e){return Object(p.a)({},Object(be.a)(e))}));function $e(e){var t=e.storeSliceName,a=e.persist,i=He(),o=Object(me.cb)(),m=Object(c.d)(),b=Object(c.e)((function(e){return e[t].dirty})),d=Object(c.e)((function(e){var a=e[t],n=a.equityWaterfall,l=a.cashOnCash.equity_needed,r=a.irrSchedule,s=r.net_cash_flow,c=void 0===s?[]:s,i=r.capitalEventNetCashFlow;return Object(p.a)(Object(p.a)({},n),{},{equityNeededDisplay:l,netCashFlow:c,capitalEventNetCashFlow:i})}),c.c),O=d.gpPercent,j=d.lpPercent,_=d.gpDollars,f=d.lpDollars,v=d.equityNeededDisplay,E=d.netCashFlow,h=d.hurdles,g=v&&"0"!==v?Ze(v):0,C=Object(l.useState)(!1),y=Object(n.a)(C,2),N=y[0],A=y[1],I=Object(l.useState)("Infinite"),S=Object(n.a)(I,2),k=S[0],P=S[1];function R(e){var t=Y(e);W({gpPercent:e,gpDollars:t,lpDollars:Ze(G(g,t)),lpPercent:Qe(G(100,e))},a)}function x(e){var t=Y(e);W({lpPercent:e,lpDollars:t,gpDollars:Ze(G(g,t)),gpPercent:Qe(G(100,e))},a)}function w(e){var t=U(e);W({gpDollars:e,lpDollars:Ze(G(g,e)),gpPercent:t,lpPercent:Qe(G(100,t))},a)}function M(e){var t=U(e);W({lpDollars:e,gpDollars:Ze(G(g,e)),lpPercent:t,gpPercent:Qe(G(100,t))},a)}function W(e,t){m(Object(z.m)({calculator:L.j.EQUITY_WATERFALL,valuesObj:e,persist:t}))}function U(e){return(100*+e/+g).toFixed(2)}function Y(e){return Ze(+e/100*+g)}function G(e,t){return(100*+e-100*+t)/100}function V(e){var t=e.target,n=t.name,l=Qe(t.value);switch(n){case"lpPercent":x(l);break;case"gpPercent":R(l);break;case"lpDollars":M(l);break;case"gpDollars":w(l)}m(Object(z.y)({name:"equityWaterfall",persist:a})),b||m(Object(z.A)(a))}function B(e,t){var n=e.target,l=n.name,r=Qe(n.value),s={startPercent:r,endPercent:"",promotePercent:""},c=Object(u.a)(h);"endPercent"===l&&(h.length-1!==t?(c=h.slice(0,t+1),r?(P("Infinite"),c.push(s)):P("")):(P("Infinite"),c.push(s))),c[t][l]=r,m(Object(z.l)({calculator:L.j.EQUITY_WATERFALL,name:"hurdles",value:c})),m(Object(z.y)({name:"equityWaterfall",persist:a}))}return Object(l.useEffect)((function(){g&&(O||j||_||f)&&(j?x(j):O?R(O):f?M(f):w(_)),g||(W({lpDollars:"",gpDollars:""},a),m(Object(z.t)({name:"lp_stats",persist:a})),m(Object(z.t)({name:"gp_stats",persist:a})))}),[g]),Object(l.useEffect)((function(){g&&E.length&&O&&j&&_&&f&&h.length&&function(e,t,a){var n=e.lpDollars,l=e.gpDollars,r=e.lpPercent,s=e.gpPercent,c=e.hurdles,i=e.netCashFlow,o=e.capitalEventNetCashFlow,p=[],m=[],b=o||i,d=Object(u.a)(b.slice(0,-1).map((function(e){return e.amount})));c.forEach((function(e,t){var a=e.endPercent,i=e.promotePercent;a=a?qe(a,100):0,i||(i=0);for(var o=+n,u=+l,b=Ke(1-qe(i,100),qe(r,100)),O=Ve(qe(i,100),Ke(1-qe(i,100),qe(s,100))),j=0;j<d.length;j++){var _=void 0,f=void 0;if(t<c.length-1&&c.length>1){var v=Ke(a,o),E=Ve(v,o);if(t>0&&(E=Be(E,p[j])),f=Math.min(E,Ke(b,d[j])),o=Be(Ve(o,v),p[j]?p[j]:0,f),0===t){var h=Ke(a,u);_=Math.min(Ve(h,u),Ke(O,d[j])),u=Be(Ve(u,h),_)}else _=Ke(qe(f,b),O)}else f=Ke(d[j],b),_=Ke(d[j],O);p[j]=p[j]?Ve(p[j],f):f,m[j]=m[j]?Ve(m[j],_):_,d[j]=Be(d[j],f,_)}}));try{var O=Ge.IRR.apply(Ge,[-l].concat(m)),j=Ge.IRR.apply(Ge,[-n].concat(p)),_=p.reduce((function(e,t){return Ve(e,t)})),f=m.reduce((function(e,t){return Ve(e,t)}));t(Object(z.a)({name:"gp_stats",value:{label:"Sponsor (GP)",results:[{name:"Total Contribution",value:l,displayFormat:"dollar"},{name:"IRR",value:O,displayFormat:"percent"},{name:"Total Distribution",value:f,displayFormat:"dollar"}]},persist:a})),t(Object(z.a)({name:"lp_stats",value:{label:"Sponsor (LP)",results:[{name:"Total Contribution",value:n,displayFormat:"dollar"},{name:"IRR",value:j,displayFormat:"percent"},{name:"Total Distribution",value:_,displayFormat:"dollar"}]},persist:a}))}catch(v){t(Object(z.t)({name:"lp_stats",persist:a})),t(Object(z.t)({name:"gp_stats",persist:a}))}}(d,m,a)}),[g,O,j,_,f,h,E,a]),Object(l.useEffect)((function(){A(!g||!E)}),[g,E]),r.a.createElement("div",{className:i.calcContainer},N&&r.a.createElement(T.n,{calculator:"Equity Waterfall",persist:a}),r.a.createElement(F.a,{className:Object(s.a)(i.margin,i.fullWidthInput),label:"Total Equity Needed:",variant:"outlined",value:v,onChange:function(){},fullWidth:!0,disabled:!0,InputProps:{startAdornment:r.a.createElement(D.a,{position:"end",classes:{root:i.inputAdornment}},"$"),classes:{input:i.inputWithPadding}},InputLabelProps:{classes:{root:Object(s.a)(i.inputLabel),shrink:"shrink"},shrink:!0}}),r.a.createElement("div",{className:i.lineInputsContainer},r.a.createElement(F.a,{inputProps:{inputMode:"decimal"},className:Object(s.a)(i.margin,i.smallInput),label:"Sponsor (GP) Contribution %:",variant:"outlined",value:O,onChange:V,name:"gpPercent",error:O>100,helperText:O>100?"Value may not be greater then 100":"",InputProps:{classes:{root:Object(s.a)({[i.wrappedLabelMargin]:o}),input:i.inputWithPadding},endAdornment:r.a.createElement(D.a,{position:"end",classes:{root:i.inputAdornment}},"%")},InputLabelProps:{classes:{root:Object(s.a)(i.inputLabel,{[i.longLabel]:!o}),shrink:"shrink"},shrink:!0}}),r.a.createElement("span",{className:Object(s.a)(i.inputsDivider,i.mobileMultilineLabelInputsDivider)}),r.a.createElement(F.a,{inputProps:{inputMode:"numeric",pattern:"[0-9]*"},className:Object(s.a)(i.margin,i.smallInput),label:"Sponsor (GP) Contribution $:",variant:"outlined",value:Xe(_),onChange:V,name:"gpDollars",InputProps:{classes:{root:Object(s.a)({[i.wrappedLabelMargin]:o}),input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$")},InputLabelProps:{classes:{root:Object(s.a)(i.inputLabel,{[i.longLabel]:!o}),shrink:"shrink"}}})),r.a.createElement("div",{className:i.lineInputsContainer},r.a.createElement(F.a,{inputProps:{inputMode:"decimal"},className:Object(s.a)(i.margin,i.smallInput),label:"Investor (LP) Contribution %:",variant:"outlined",value:j,onChange:V,name:"lpPercent",error:j>100,helperText:j>100?"Value may not be greater then 100":"",InputProps:{classes:{root:Object(s.a)({[i.wrappedLabelMargin]:o}),input:i.inputWithPadding},endAdornment:r.a.createElement(D.a,{position:"end",classes:{root:i.inputAdornment}},"%")},InputLabelProps:{classes:{root:Object(s.a)(i.inputLabel,{[i.longLabel]:!o}),shrink:"shrink"},shrink:!0}}),r.a.createElement("span",{className:Object(s.a)(i.inputsDivider,i.mobileMultilineLabelInputsDivider)}),r.a.createElement(F.a,{inputProps:{inputMode:"numeric",pattern:"[0-9]*"},className:Object(s.a)(i.margin,i.smallInput),label:"Investor (LP) Contribution $:",variant:"outlined",value:Xe(f),onChange:V,name:"lpDollars",InputProps:{classes:{root:Object(s.a)({[i.wrappedLabelMargin]:o}),input:i.input},startAdornment:r.a.createElement(D.a,{position:"start",classes:{root:i.inputAdornment}},"$")},InputLabelProps:{classes:{root:Object(s.a)(i.inputLabel,{[i.longLabel]:!o}),shrink:"shrink"}}})),h.map((function(e,t){var a=e.startPercent,n=e.endPercent,l=e.promotePercent;return r.a.createElement("div",{key:t},r.a.createElement("div",{className:i.hurdleTitle},"Hurdle ".concat(t+1)),r.a.createElement("div",{className:i.lineInputsContainer,style:{alignItems:"flex-start"}},r.a.createElement(F.a,{className:Object(s.a)(i.margin,i.smallInput),label:"Return From:",variant:"outlined",value:a,onChange:function(){},disabled:!0,InputProps:{endAdornment:r.a.createElement(D.a,{position:"end",classes:{root:i.inputAdornment}},"%"),classes:{input:i.inputWithPadding}},InputLabelProps:{classes:{root:Object(s.a)(i.inputLabel),shrink:"shrink"},shrink:!0}}),r.a.createElement("span",{className:i.inputsDivider,style:{height:0}}),r.a.createElement(F.a,{inputProps:{inputMode:"decimal"},className:Object(s.a)(i.margin,i.smallInput),label:"Return Up To:",variant:"outlined",value:n,onChange:function(e){return B(e,t)},name:"endPercent",placeholder:k,onBlur:function(){return h.length-1===t?P("Infinite"):null},onFocus:function(){return h.length-1===t?P(""):null},error:Boolean(n&&parseFloat(n)<parseFloat(a)),helperText:n&&parseFloat(n)<parseFloat(a)?"Value must be greater than Return From":"",InputProps:{endAdornment:r.a.createElement(D.a,{position:"end",classes:{root:i.inputAdornment}},"%"),classes:{input:i.inputWithPadding}},InputLabelProps:{classes:{root:Object(s.a)(i.inputLabel),shrink:"shrink"},shrink:!0}})),r.a.createElement(F.a,{inputProps:{inputMode:"decimal"},className:Object(s.a)(i.margin,i.fullWidthInput),label:"Promote to Sponsor (GP):",variant:"outlined",value:l,onChange:function(e){return B(e,t)},name:"promotePercent",fullWidth:!0,InputProps:{endAdornment:r.a.createElement(D.a,{position:"end",classes:{root:i.inputAdornment}},"%"),classes:{input:i.inputWithPadding}},InputLabelProps:{classes:{root:Object(s.a)(i.inputLabel,i.fullWidthLabel,i.longLabel),shrink:"fullInputShrink"},shrink:!0}}))})))}function Qe(e){var t="".concat(e).replace(/[^0-9.]/g,""),a=t.indexOf(".");return a>-1&&(t=t.replace(/(\.[^.]*)\./g,"$1").slice(0,a+3)),t}function Ze(e){var t="".concat(e).replace(/[^0-9.]/g,""),a=t.indexOf(".");return a>-1&&(t=(t="".concat(t,"00")).slice(0,a+3)),t}function Xe(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")}var Je=a(956),et=a(926),tt=a(359),at=Object($.a)((function(e){return{sideResults:{fontFamily:"Karla",top:130,right:115,width:424,maxWidth:function(e){return e.isMobileResults?"initial":"22%"},position:"fixed",background:"#00112B",borderRadius:5,display:"flex",flexDirection:"column",maxHeight:function(e){return e.isMobileResults?"initial":e.showSideRates?"calc(100vh - 150px)":"calc(100vh - 295px)"},overflowY:"auto",zIndex:1,scrollbarWidth:"none",msOverflowStyle:"none","&::-webkit-scrollbar":{display:"none"},[e.breakpoints.between("md",L.b)]:{right:85,width:299}},sideResultsDealDetails:{top:200},mobileResultsPage:{fontFamily:"Karla",position:"relative",maxHeight:"initial",height:"100%",top:"initial",right:"initial",width:"100%",paddingTop:20},resultsTitle:{fontStyle:"normal",fontWeight:"bold",fontSize:22,color:"#FFFFFF",padding:16,paddingBottom:0},tabFlex:{justifyContent:"flex-start",paddingLeft:18},tabRoot:{maxHeight:38,minHeight:"38px !important"},resultsTab:{minWidth:78.49,width:78.49,color:"#FFFFFF",opacity:.5,fontSize:15},resultsTabActive:{fontSize:15,color:"#FFFFFF"},resultsList:{justifyContent:"space-between",paddingLeft:16,paddingRight:16},listContainer:{maxHeight:645,overflowY:"auto",scrollbarWidth:"none",msOverflowStyle:"none","&::-webkit-scrollbar":{display:"none"}},resultsKeys:{fontStyle:"normal",fontWeight:"normal",fontSize:16,color:"#FFFFFF",opacity:.7,[e.breakpoints.down("xs")]:{fontSize:15}},resultsValues:{fontStyle:"normal",fontWeight:"normal",fontSize:20.2854,color:"#10B8C7",fontFamily:"Roboto Condensed",[e.breakpoints.down("xs")]:{fontSize:18}},resultDivider:{opacity:.2,background:"#FFFFFF",marginBottom:13},resultsSectionContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",position:"relative",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,padding:"8px 18px 8px 18px"},resultsSectionListItem:Object(p.a)(Object(p.a)({},nt),{},{justifyContent:"space-between",width:"100%"}),resultsSectionTitle:{fontStyle:"normal",fontWeight:"normal",fontSize:18,textTransform:"uppercase",color:"#FFFFFF",opacity:.9,[e.breakpoints.down("xs")]:{textAlign:"center",fontWeight:"bold"}},resultsSectionLink:{fontSize:14.6506,textDecorationLine:"underline",color:"#FFFFFF",opacity:.7,cursor:"pointer"},resultsSettingsIcon:{fontWeight:300,fontSize:14.3713,color:"#FFFFFF",opacity:.7,position:"absolute",top:0,right:15,cursor:"pointer"},brokerContainer:{height:175,width:"100%",background:"inherit",position:"relative",marginBottom:15},broker:{position:"absolute",bottom:0,width:"89%",height:165,background:"#FFFFFF",boxShadow:"0px 0px 15px rgba(0, 0, 0, 0.14)",borderRadius:5.28568,right:22},noResultsContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:150},subTitle:{fontStyle:"normal",fontWeight:"bold",fontSize:37,letterSpacing:"-0.04em",color:"#00112B",[e.breakpoints.down("xs")]:{fontSize:18,color:"#FFFFFF"}},thirdTitle:{fontStyle:"normal",fontWeight:"normal",fontSize:24,color:"#00112B",[e.breakpoints.down("xs")]:{fontSize:16,color:"#FFFFFF",opacity:.6}},noResultsSmallText:{fontSize:13,color:"#FFFFFF",opacity:.3,padding:"0px 10px 0px 10px"},noResults:{color:"#FFFFFF",background:"rgba(255, 255, 255, 0.2)",borderRadius:5,padding:"3px 15px",marginBottom:15,marginTop:10},threeDotsContainer:Object(p.a)(Object(p.a)({},nt),{},{justifyContent:"space-around",padding:"0px 10px 0px 10px"}),threeDots:{color:"#FFFFFF",fontSize:20},summaryText:{color:"#FFFFFF",fontFamily:"Roboto Condensed",fontStyle:"normal",fontWeight:"normal",fontSize:20,padding:"20px 28px",lineHeight:"175.4%"},summaryResultValue:{color:"#10B8C7"}}})),nt={display:"flex",alignItems:"center"};function lt(e){var t=e.isMobileResults,a=(e.setShowMobileResultsPage,e.storeSliceName),c=e.isDealDetails,o=e.persist,u=Object(i.a)(L.c),p=at({showSideRates:u,isMobileResults:t,isDealDetails:c}),m=Object(l.useState)(0),b=Object(n.a)(m,2),O=b[0],j=b[1],_=Object(l.useCallback)((function(e,t){d.a.track(0===t?"Summary Tab on Results Clicked":"Number Tab on Results Clicked"),j(t)}),[]);return r.a.createElement("div",{className:Object(s.a)(p.sideResults,{[p.sideResultsDealDetails]:c,[p.mobileResultsPage]:t})},t?r.a.createElement("div",{className:p.threeDotsContainer},r.a.createElement("div",{className:p.subTitle},"eCALC Results")):r.a.createElement("div",{className:p.resultsTitle},"Results"),r.a.createElement(Je.a,{value:O,onChange:_,TabIndicatorProps:{style:{color:"#10B8C7",height:1.10549}},classes:{flexContainer:p.tabFlex,root:p.tabRoot}},r.a.createElement(et.a,{label:"summary",classes:{root:p.resultsTab,selected:p.resultsTabActive}}),r.a.createElement(et.a,{label:"Numbers",classes:{root:p.resultsTab,selected:p.resultsTabActive},style:{marginLeft:30}})),0===O&&r.a.createElement(st,{storeSliceName:a}),1===O&&r.a.createElement(rt,{storeSliceName:a,isDealDetails:c,persist:o}))}function rt(e){var t=e.storeSliceName,a=(e.isDealDetails,e.persist),s=at(),i=Object(c.d)(),o=Object(T.u)(t),u=o.resultsCount,p=o.resultsValues,m=!!u>0,b=Object(l.useState)(!1),O=Object(n.a)(b,2),j=O[0],_=O[1],f=Object(l.useState)(!1),v=Object(n.a)(f,2),E=v[0],h=v[1],g=Object(l.useState)(!1),C=Object(n.a)(g,2),y=C[0],N=C[1],A=Object(l.useState)(!1),I=Object(n.a)(A,2),k=I[0],P=I[1],R=Object(c.e)((function(e){return e[t][L.j.IRR]}),c.c),x=Object(c.e)((function(e){return e[t][L.j.CAP_RATE].annual_expenses})),F=Object(c.e)((function(e){return e[t][L.j.CAP_RATE].potential_annual_gross_income})),D=Object(c.e)((function(e){return e[t][L.j.CAP_RATE].vacancy_as_percent})),w=Object(c.e)((function(e){return e[t][L.j.CASH_ON_CASH].equity_needed})),M=Object(c.e)((function(e){return e[t][L.j.EQUITY_NEEDED]})),W=M.loan_amount_dollar,U=M.total_capitalization,Y=Object(c.e)((function(e){return e[t][L.j.MORTGAGE_AND_DSCR]}),c.c),G=Object(c.e)((function(e){return e[t].resultsValues.mortgage_post_io}),c.c),V=Object(c.e)((function(e){return e[t].resultsValues.mortgage_during_io}),c.c),B=Y||{},H=B.interest_rate,$=B.io_years,Q=B.amortization_years,Z=Object(c.e)((function(e){return e[t].irrSchedule}),c.c),X=Object(c.e)((function(e){return e[t].irrCapitalEvent}),c.c),J=X.hasCapitalEvent,ee=X.capitalEventType,te=X.capitalEventYear,ae=X.capitalEventInterestRate,ne=X.capitalEventAmortizationYears,le=X.capitalEventLoanAmount,re=X.capitalEventNetLoan,se=R||{},ce=se.holding_period_yrs,ie=se.projected_gross_income_rate,oe=se.stabilized_vacancy,ue=se.projected_annual_expense,pe=se.projected_cap_rate_at_sale,be=se.projected_closing_costs_at_sale,de=se.year_of_stabilization,Oe=Z||{},je=Oe.pgi,_e=Oe.stabilized_vacancies,fe=Oe.expenses;return r.a.createElement("div",{className:s.listContainer},m&&Object.keys(p).length?r.a.createElement(K.a,null,Object.keys(p).map((function(e){var t=p[e]||{},a=t.label,n=t.results,c=t.displayFormat,i=t.showMaxLoan,o=t.showAmortizationSchedule,u=t.showIRRSchedule,m=t.showDebtYield;return n||n>=0?Array.isArray(n)?r.a.createElement(l.Fragment,{key:e},r.a.createElement(q.a,{alignItems:"center",className:s.resultsSectionContainer},!!i&&r.a.createElement(me.T,{className:s.resultsSettingsIcon,style:{top:20},onClick:function(){d.a.track("Max frm Dscr Modal Opened"),_(!0)}}),!!u&&r.a.createElement(me.T,{className:s.resultsSettingsIcon,style:{top:20},onClick:function(){return h(!0)}}),!!m&&r.a.createElement(me.T,{className:s.resultsSettingsIcon,style:{top:20},onClick:function(){d.a.track("Debt Yield Modal Opened"),N(!0)}}),r.a.createElement("div",{className:s.resultsSectionListItem,style:{marginBottom:7}},r.a.createElement("span",{className:s.resultsSectionTitle},a),o&&r.a.createElement("span",{className:s.resultsSectionLink,onClick:function(){d.a.track("amortization modal opened"),P(!0)}},"View Schedule")),n.map((function(e,t){var a=e||{},n=a.name,l=a.value,c=a.displayFormat;return r.a.createElement("div",{className:s.resultsSectionListItem,key:t},r.a.createElement("span",{className:s.resultsKeys},n),r.a.createElement("span",{className:s.resultsValues},ct(l,c)))}))),r.a.createElement(S.a,{className:s.resultDivider})):r.a.createElement(l.Fragment,{key:e},r.a.createElement(q.a,{alignItems:"center",className:s.resultsList,style:{paddingTop:i||u||m?15:void 0}},!!i&&r.a.createElement(me.T,{className:s.resultsSettingsIcon,onClick:function(){d.a.track("Max frm Dscr Modal Opened"),_(!0)}}),!!u&&r.a.createElement(me.T,{className:s.resultsSettingsIcon,onClick:function(){return h(!0)}}),!!m&&r.a.createElement(me.T,{className:s.resultsSettingsIcon,onClick:function(){d.a.track("Debt Yield Modal Opened"),N(!0)}}),r.a.createElement("span",{className:s.resultsKeys},a,":"),r.a.createElement("span",{className:s.resultsValues},ct(n,c))),r.a.createElement(S.a,{className:s.resultDivider})):null}))):r.a.createElement("div",{className:s.noResultsContainer},r.a.createElement("div",{className:s.noResults},"No Results Yet"),r.a.createElement("div",{className:s.noResultsSmallText},"Calculation results will show as you enter the fields.")),j&&r.a.createElement(T.m,{open:j,handleClose:function(){return _(!1)},storeSliceName:t,persist:a}),E&&r.a.createElement(T.l,{onClose:function(){return h(!1)},calculate:function(){var e=Object(Ae.b)({loan_amount_dollar:W,interest_rate:H,amortization_years:Q,holding_period_yrs:ce,io_years:$}),t=G&&G.results.find((function(e){return"Annual"===e.name})).value,n=V&&V.results.find((function(e){return"Annual"===e.name})).value,l=e&&e.results,r=Object(we.a)({holding_period_yrs:ce,projected_gross_income_rate:ie,stabilized_vacancy:oe,projected_annual_expense:ue,projected_cap_rate_at_sale:pe,projected_closing_costs_at_sale:be,potential_annual_gross_income:F,vacancy_as_percent:D,annual_expenses:x,io_years:$,amortization_years:Q,mortgage_balance_amount:l,annual_mortgage_post_io:t,annual_mortgage_during_io:n,equity_needed:w,pgi:je,stabilized_vacancies:_e,expenses:fe,year_of_stabilization:de,total_capitalization:U,hasCapitalEvent:J,capitalEventType:ee,capitalEventYear:te,capitalEventInterestRate:ae,capitalEventAmortizationYears:ne,capitalEventLoanAmount:le,capitalEventNetLoan:re});i(Object(z.r)(r,a))},storeSliceName:t}),y&&r.a.createElement(tt.a,{open:y,handleClose:function(){return N(!1)},storeSliceName:t,persist:a}),k&&r.a.createElement(T.a,{open:k,onClose:function(){return P(!1)},storeSliceName:t}))}function st(e){var t=e.storeSliceName,a=at(),n=Object(T.u)(t),s=n.resultsCount,c=n.resultsValues,i=n.resultsSummary,o=!!s>0,u=function(e,t){var n=e.summary,s=e.results,c=e.displayFormat;if(""!==s&&(s||s>=0))return r.a.createElement(l.Fragment,{key:t},r.a.createElement("span",{style:{opacity:.8}},n," "),r.a.createElement("span",{className:a.summaryResultValue},ct(s,c)),r.a.createElement("span",{style:{opacity:.8}},"."," "))};return r.a.createElement("div",{className:a.listContainer},o&&Object.keys(c).length?i.map((function(e,t){return r.a.createElement("p",{key:t,className:a.summaryText},Object.keys(e).map((function(t,a){return Array.isArray(e[t])?e[t].map((function(e,t){return u(e,"".concat(a).concat(t))})):u(e[t],a)})))})):r.a.createElement("div",{className:a.noResultsContainer},r.a.createElement("div",{className:a.noResults},"No Results Yet"),r.a.createElement("div",{className:a.noResultsSmallText},"Calculation results will show as you enter the fields.")))}function ct(e,t){if(!t||!e||"invalid entry"===e.toString().toLowerCase())return e;switch(t){case"dollar":return"$".concat(Object(w.c)(e));case"percent":return"".concat(e,"%");case"times":return"".concat(e,"x");default:return e}}var it=Object($.a)((function(e){return{container:{fontFamily:"Karla",margin:"25px auto",width:"90%",[e.breakpoints.down("xs")]:{width:"100%",margin:0}},mobileTitleContainer:Object(p.a)(Object(p.a)({},ot),{},{flexDirection:"column",justifyContent:"center",position:"fixed",width:function(e){return e.isTabletSlider&&!e.isTablet?"calc(100% - 224px)":"100%"},height:110,left:function(e){return e.isTabletSlider?void 0:0},right:0,top:function(e){return e.isTabletSlider&&!e.isTablet?e.hasToolbar?101:e.isDealDetails?0:44:e.hasToolbar?107:49},background:"#00112B",borderRadius:"0px 0px 5px 5px",zIndex:1,fontFamily:"Karla"}),calculatorsSection:{[e.breakpoints.between("md",L.b)]:{marginTop:0},[e.breakpoints.down("xs")]:{marginTop:110}},tabletCalculatorsSection:{marginTop:105},calculatorsSectionWithResults:{[e.breakpoints.down("xs")]:{marginTop:160}},tabletCalculatorsSectionWithResults:{marginTop:110},tabletCalculatorsSectionWithResultsDeal:{marginTop:120},ecalcContainer:{flex:"1 0 470px",marginLeft:75,maxWidth:470,[e.breakpoints.between("lg",L.b)]:{maxWidth:"calc(100% - 540px)",width:535,marginLeft:40,flex:"initial"},[e.breakpoints.only("md")]:{maxWidth:"calc(100% - 370px)"},[e.breakpoints.down("xs")]:{margin:0}},tabletEcalcContainer:{maxWidth:"90%",marginLeft:0,margin:"0px auto"},noRatesContainer:{maxWidth:640,paddingBottom:35},ecalcTitle:{color:"#000000",fontWeight:"bold",fontSize:33,marginBottom:10,[e.breakpoints.between("md",L.b)]:{fontSize:22.4865,marginBottom:5},[e.breakpoints.down("xs")]:{fontSize:15,color:"#FFFFFF",opacity:.8}},tabletEcalcTitle:{fontSize:15,color:"#FFFFFF",opacity:.8},subTitle:{fontStyle:"normal",fontWeight:"bold",fontSize:37,letterSpacing:"-0.04em",color:"#00112B",lineHeight:1,[e.breakpoints.between("md",L.b)]:{fontSize:25.4741},[e.breakpoints.down("xs")]:{fontSize:18,color:"#FFFFFF"}},tabletSubTitle:{fontSize:18,color:"#FFFFFF"},thirdTitle:{fontStyle:"normal",fontWeight:"normal",fontSize:24,color:"#00112B",[e.breakpoints.between("md",L.b)]:{fontSize:16.6808},[e.breakpoints.down("xs")]:{fontSize:16,color:"#FFFFFF",opacity:.6}},noResultsSmallText:{fontSize:10,color:"#FFFFFF",opacity:.3},noResults:{color:"#FFFFFF",background:"rgba(255, 255, 255, 0.2)",borderRadius:5,padding:"3px 15px",marginBottom:5,marginTop:10},threeDotsContainer:Object(p.a)(Object(p.a)({},ot),{},{justifyContent:"space-around",width:"100%",padding:"0px 10px 0px 10px"}),threeDots:{color:"#FFFFFF",fontSize:20},drawer:{maxHeight:"calc(100% - 64px)",paddingBottom:20,borderBottomLeftRadius:20,borderBottomRightRadius:20,overflowY:"hidden",background:"#00112B"},mobileClose:{minHeight:4,maxWidth:60,background:"#C1C1C1",textAlign:"center",width:60,margin:"0 auto"},expansionPanelDetails:{[e.breakpoints.down("xs")]:{padding:0}},calcListItemDetails:Object(p.a)(Object(p.a)({},ot),{},{flexDirection:"column",alignItems:"flex-start"}),calcListItem:Object(p.a)({width:"100%",height:75},ot),calcListItemTitle:{fontStyle:"normal",fontWeight:"bold",fontSize:24,color:"#00112B",[e.breakpoints.between("md",L.b)]:{fontSize:16.6808},[e.breakpoints.down("xs")]:{fontSize:16}},calcListItemText:{fontStyle:"normal",fontWeight:"normal",fontSize:18,color:"#646464",[e.breakpoints.between("md",L.b)]:{fontSize:12.5106},[e.breakpoints.down("xs")]:{fontSize:12}},calcListItemIcon:{color:"#10B8C7",fontSize:30,[e.breakpoints.between("md",L.b)]:{fontSize:24},[e.breakpoints.down("xs")]:{fontSize:20}},calcListItemIconContainer:{background:"#FFFFFF",boxShadow:"0px 0px 22.9942px rgba(0, 0, 0, 0.14)",width:56.72,height:56.72,marginRight:20,[e.breakpoints.between("md",L.b)]:{width:40.72,height:40.72},[e.breakpoints.down("xs")]:{width:37,height:37}},addIcon:{fontWeight:300,color:"#00112B",fontSize:30},divider:{opacity:.1,background:"#000000"},expansionPanel:{"&:before":{display:"none"}}}})),ot={display:"flex",alignItems:"center"},ut=j()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=Object.keys(e).reduce((function(t,a){return t[a]=e[a].results,t}),{});d.a.track("ecalc_result",Object(p.a)({purchase_price:t},a))}),300);function pt(e){var t=e.persist,a=e.isDealDetails,o=e.storeSliceName,p=e.hasToolbar,b=Object(i.a)(L.d),d=Object(i.a)(L.e),O=Object(me.cb)(),j=Object(c.d)(),f=!b&&!O,v=it({isTabletSlider:f,isTablet:d,hasToolbar:p,isDealDetails:a}),E=Object(l.useState)(!1),h=Object(n.a)(E,2),g=h[0],C=h[1],y=Object(c.e)((function(e){return e[o].openCalcs})),N=function(e){j(Object(z.B)(Array.isArray(y)?[].concat(Object(u.a)(y),[e]):[e],t))},A=function(e){Array.isArray(y)&&j(Object(z.B)(y.filter((function(t){return t!==e})),t))},I=Object(c.e)((function(e){return e[o].resultsValues}),c.c),S=Object(c.e)((function(e){return e[o][L.j.CAP_RATE].purchase_price})),k=Object(l.useRef)(!0);Object(m.a)((function(){k.current?k.current=!1:ut(I,S)}),[I]);var P=!!Object.keys(I).length;return r.a.createElement("div",{className:Object(s.a)(v.ecalcContainer,{[v.tabletEcalcContainer]:f,[v.noRatesContainer]:a})},!O&&b&&r.a.createElement("div",null,r.a.createElement("div",{className:Object(s.a)(v.ecalcTitle,{[v.tabletEcalcTitle]:f})},"eCALC"),r.a.createElement("div",{className:Object(s.a)(v.subTitle,{[v.tabletSubTitle]:f})},"The E Calculator"),r.a.createElement("div",{className:v.thirdTitle},"A full underwriting experience")),(O||!b)&&Array.isArray(y)&&!y.length&&!P&&r.a.createElement("div",{className:v.mobileTitleContainer},r.a.createElement("div",{className:Object(s.a)(v.ecalcTitle,{[v.tabletEcalcTitle]:f})},"eCALC"),r.a.createElement("div",{className:Object(s.a)(v.subTitle,{[v.tabletSubTitle]:f})},"The E Calculator"),r.a.createElement("div",{className:v.thirdTitle},"A full underwriting experience")),(O||!b)&&Array.isArray(y)&&!!y.length&&!P&&r.a.createElement("div",{className:v.mobileTitleContainer,style:{height:125}},r.a.createElement("div",{className:Object(s.a)(v.ecalcTitle,{[v.tabletEcalcTitle]:f}),style:{margin:0}},"eCALC"),r.a.createElement("div",{className:v.threeDotsContainer},r.a.createElement("span",null)," ",r.a.createElement("div",{className:Object(s.a)(v.subTitle,{[v.tabletSubTitle]:f}),style:{marginLeft:15}},"The E Calculator"),r.a.createElement("span",null)," "),r.a.createElement("div",{className:v.noResults},"No Results Yet"),r.a.createElement("div",{className:v.noResultsSmallText},"Calculation results will show as you enter the fields.")),(O||!b)&&P&&r.a.createElement(T.p,{setShowMobileResultsPage:C,isTabletSlider:!O,storeSliceName:o,isDealDetails:a,persist:t,hasToolbar:p}),r.a.createElement(_.a,{anchor:"top",open:g,onClose:function(){return C(!1)},onOpen:function(){return C(!0)},disableSwipeToOpen:!0,disableDiscovery:!0,classes:{paperAnchorTop:v.drawer}},r.a.createElement(lt,{isMobileResults:!0,setShowMobileResultsPage:C,storeSliceName:o,persist:t}),r.a.createElement("div",{className:v.mobileClose})),r.a.createElement("div",{className:Object(s.a)(v.calculatorsSection,{[v.tabletCalculatorsSection]:f,[v.calculatorsSectionWithResults]:O&&P,[v.tabletCalculatorsSectionWithResults]:f&&P,[v.tabletCalculatorsSectionWithResultsDeal]:f&&P&&a})},r.a.createElement(mt,{title:"Cap Rate",text:"Calculate the cap rate I am paying based on my underwriting",Icon:me.v,CalcComponent:Oe,calcId:"capRate",isExpanded:Array.isArray(y)&&y.includes("capRate"),addOpenCalc:N,removeOpenCalc:A,storeSliceName:o,persist:t}),r.a.createElement(mt,{title:"Equity Needed",text:"Calculate equity needed to close",Icon:me.N,CalcComponent:ge,calcId:"equityNeeded",isExpanded:Array.isArray(y)&&y.includes("equityNeeded"),addOpenCalc:N,removeOpenCalc:A,storeSliceName:o,persist:t}),r.a.createElement(mt,{title:"Mortgage and DSCR",text:"Calculate the mortgage payments and Debt Service Coverage Ratio",Icon:me.c,CalcComponent:Le,calcId:"mortgageDscr",isExpanded:Array.isArray(y)&&y.includes("mortgageDscr"),addOpenCalc:N,removeOpenCalc:A,storeSliceName:o,persist:t}),r.a.createElement(mt,{title:"Cash-on-Cash",text:"Calculate the first year\u2019s cash on cash return",Icon:me.J,CalcComponent:Fe,calcId:"cashOnCash",isExpanded:Array.isArray(y)&&y.includes("cashOnCash"),addOpenCalc:N,removeOpenCalc:A,storeSliceName:o,persist:t}),r.a.createElement(mt,{title:"IRR and Equity Multiplier",text:"Calculate the main metrics used by Syndicators and Investors",Icon:me.W,CalcComponent:We,calcId:"irr",isExpanded:Array.isArray(y)&&y.includes("irr"),addOpenCalc:N,removeOpenCalc:A,storeSliceName:o,persist:t}),r.a.createElement(mt,{title:"Equity Waterfall",text:"Calculate the Property IRR based equity waterfall returns to the GP and LP",Icon:me.Y,CalcComponent:$e,calcId:"equityWaterfall",isExpanded:Array.isArray(y)&&y.includes("equityWaterfall"),addOpenCalc:N,removeOpenCalc:A,storeSliceName:o,persist:t})))}function mt(e){var t=e.Icon,a=e.CalcComponent,s=e.title,c=e.text,i=e.calcId,o=e.isExpanded,u=e.addOpenCalc,p=e.removeOpenCalc,m=e.storeSliceName,b=e.persist,O=Object(l.useState)(o),j=Object(n.a)(O,2),_=j[0],E=j[1],h=it();Object(l.useEffect)((function(){E(o)}),[o]);var g=Object(l.useCallback)((function(){_?p(i):(d.a.track("ecalc_section_opened",{section:s}),u(i)),E((function(e){return!e}))}),[_,p,u,i,s]);return r.a.createElement(l.Fragment,null,r.a.createElement(f.a,{expanded:_,onChange:g,className:h.expansionPanel,elevation:0},r.a.createElement(v.a,{expandIcon:_?r.a.createElement(me.Q,{className:h.addIcon}):r.a.createElement(me.e,{className:h.addIcon}),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement("div",{className:h.calcListItem},r.a.createElement(A,{className:h.calcListItemIconContainer},r.a.createElement(t,{className:h.calcListItemIcon})),r.a.createElement("div",{className:h.calcListItemDetails},r.a.createElement("div",{className:h.calcListItemTitle},s),r.a.createElement("div",{className:h.calcListItemText},c)))),r.a.createElement(I.a,{classes:{root:h.expansionPanelDetails}},r.a.createElement(a,{storeSliceName:m,persist:b}))),r.a.createElement(S.a,{className:h.divider}))}var bt=a(50),dt=Object($.a)((function(e){return{cssReset:{fontSize:"initial",fontWeight:"normal",lineHeight:1.429},container:{fontFamily:"Karla",margin:"25px auto",width:"90%",[e.breakpoints.down("xs")]:{width:"100%",margin:0}},tabsContainer:{paddingLeft:60},resultsTab:{fontSize:18,[e.breakpoints.down("xs")]:{fontSize:15}},resultsTabActive:{fontSize:18},layout:{display:function(e){return e.showSideRates?"flex":"block"},alignItems:"flex-start",marginTop:25}}})),Ot=a(45);function jt(e){var t=e.isDealDetails,a=e.hasToolbar,u=e.handleSave,p=Object(i.a)(L.c),m=Object(i.a)(L.d),b=dt({showSideRates:p,isDealDetails:t}),d=Object(me.cb)(),O=Object(c.d)(),j=Object(l.useState)(),_=Object(n.a)(j,2),f=_[0],v=_[1],E=Object(Ot.parse)(window.location.search).hash_id,h=!!E;return Object(l.useEffect)((function(){v(t||h?"eCalcFormsNoPersist":"eCalcForm")}),[t,h]),Object(l.useEffect)((function(){h&&O(Object(z.p)({hash_id:E}))}),[h]),Object(l.useEffect)((function(){t||O(Object(bt.updateNavTitle)("eCALC"))}),[O,t]),f?r.a.createElement(l.Fragment,null,r.a.createElement(T.c,{storeSliceName:f,isDealDetails:t,persist:!t&&!h,isMobile:d,handleSave:u}),r.a.createElement(o.a,{className:Object(s.a)(b.cssReset,b.container),style:{paddingTop:d?void 0:20}},r.a.createElement("div",{className:b.layout},p&&!t&&r.a.createElement(T.h,null),r.a.createElement(pt,{persist:!t&&!h,isDealDetails:t,storeSliceName:f,hasToolbar:a}),!d&&m&&r.a.createElement(lt,{storeSliceName:f,isDealDetails:t,persist:!t&&!h}),!p&&!t&&!d&&r.a.createElement(T.f,null),!p&&!t&&d&&r.a.createElement(T.g,null)))):null}}}]);
//# sourceMappingURL=9.ce46c9cd.chunk.js.map