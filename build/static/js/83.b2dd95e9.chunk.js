(this["webpackJsonplt-app"]=this["webpackJsonplt-app"]||[]).push([[83],{962:function(e,t,a){"use strict";a.r(t);var n=a(9),o=a(8),i=a(12),s=a(11),l=a(0),c=a.n(l),r=a(6),d=a(23),p=a(270),m=a(17),h=a(26),f=a.n(h),u=a(87),y=a.n(u),g=function(e){return c.a.createElement(f.a,null,c.a.createElement(y.a,{lg:"3",md:"3",sm:"4",xs:"4"},c.a.createElement("p",{className:"profile-info-header"},"phone"===e.category?c.a.createElement("i",{className:"material-icons"},"phone"):"email"===e.category?c.a.createElement("i",{className:"material-icons"},"email"):"fax"===e.category?c.a.createElement("i",{className:"material-icons"},"print"):"",e.type)),c.a.createElement(y.a,{lg:"8",md:"8",sm:"7",xs:"7"},c.a.createElement("div",null,e.contact,c.a.createElement("i",{className:e.isPrimary?"material-icons main":"hidden"},"check_circle"),e.hide?c.a.createElement("p",{className:"show",onClick:function(){return e.showHideContact(e.cpId,e.category,0)}},"Show"):null)),c.a.createElement(y.a,{md:"1",sm:"1",xs:"1"},c.a.createElement("div",{className:"profile-page-dropdown"},c.a.createElement("i",{className:"material-icons"},"more_vert"),c.a.createElement("div",{className:"profile-dropdown-content"},"4"!==e.typeCode&&"9"!==e.typeCode?c.a.createElement("div",{href:"#",className:e.isPrimary?"disabled-main-link":"",onClick:function(){return e.setAsMain(e.cpId,e.category)}},c.a.createElement("i",{className:"material-icons main-dropdown"},"check_circle"),"Set as main"):"",c.a.createElement("div",{href:"#",className:e.hide?"disabled-main-link":"",onClick:function(){return e.showHideContact(e.cpId,e.category,1)}},c.a.createElement("img",{src:"/images/icons/eye-off.png",alt:"eye-off"}),"Hide from directory"),c.a.createElement("div",{href:"#",onClick:function(){e.deleteContact(e.cpId)}},c.a.createElement("i",{className:"material-icons profile-dropdown-delete"},"delete"),"Delete")))))},b=a(34),E=a.n(b),_=a(88),v=a(72),C=a.n(v),x=a(38),O=a.n(x),k=a(46),N=a.n(k),M=a(73),H=a.n(M),S=a(40),j=a.n(S),B=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={selectBoxValue:"",textBoxValue:"",toggleOn:!1,errorMessage:"",formValid:!1},o.selectTypeOnChange=o.selectTypeOnChange.bind(Object(m.a)(o)),o.textBoxOnChange=o.textBoxOnChange.bind(Object(m.a)(o)),o.textBoxOnBlur=o.textBoxOnBlur.bind(Object(m.a)(o)),o.toggleChangeHandler=o.toggleChangeHandler.bind(Object(m.a)(o)),o.submitContact=o.submitContact.bind(Object(m.a)(o)),o.closeModal=o.closeModal.bind(Object(m.a)(o)),o.validateEmail=o.validateEmail.bind(Object(m.a)(o)),o.validatePhone=o.validatePhone.bind(Object(m.a)(o)),o}return Object(o.a)(a,[{key:"validatePhone",value:function(e){return/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/.test(e)}},{key:"validateEmail",value:function(e){return/[^@]+@[^@]+\.[^@]+/.test(e)}},{key:"selectTypeOnChange",value:function(e){this.setState({selectBoxValue:e})}},{key:"textBoxOnChange",value:function(e){this.setState({textBoxValue:e.target.value})}},{key:"textBoxOnBlur",value:function(e){if("phone"===this.props.type){var t=this.validatePhone(e.target.value);t||this.setState({formValid:!1,errorMessage:"Not a valid phone number"}),t&&this.setState({formValid:!0,errorMessage:""})}else if("email"===this.props.type){var a=this.validateEmail(e.target.value);a||this.setState({formValid:!1,errorMessage:"Not a valid email"}),a&&this.setState({formValid:!0,errorMessage:""})}else if("fax"===this.props.type){this.setState({textBoxValue:e.target.value});var n=this.validatePhone(e.target.value);n||this.setState({formValid:!1,errorMessage:"Not a valid phone number"}),n&&this.setState({formValid:!0,errorMessage:""})}}},{key:"toggleChangeHandler",value:function(e){this.setState({toggleOn:e.target.checked})}},{key:"closeModal",value:function(e){e.preventDefault(),this.resetModal()}},{key:"submitContact",value:function(e){e.preventDefault();var t=null;"fax"===this.props.type||"phone"===this.props.type?t=this.state.textBoxValue.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"):"email"===this.props.type&&(t=this.state.textBoxValue.replace("\\s+","")),this.props.addContact(this.state.selectBoxValue||{fax:4,email:13,phone:1}[this.props.type],t,this.state.toggleOn),this.resetModal()}},{key:"resetModal",value:function(){this.setState({selectBoxValue:"",textBoxValue:"",toggleOn:!1,errorMessage:"",formValid:!1}),this.props.onRequestClose()}},{key:"render",value:function(){var e=null,t=null;return this.props.type&&(e={fax:[{label:"Office",code:4},{label:"Home",code:9}],email:[{label:"Work",code:13},{label:"Personal",code:15}],phone:[{label:"Office",code:1},{label:"Company",code:7},{label:"Home",code:8},{label:"Cell",code:10}]}[this.props.type].map((function(e,t){return c.a.createElement(N.a,{key:t,value:e.code,label:e.label})}))),"fax"===this.props.type?t=c.a.createElement(j.a,{label:"Fax Number",hint:"Enter your number",value:this.state.textBoxValue,onChange:this.textBoxOnChange,onBlur:this.textBoxOnBlur}):"phone"===this.props.type?t=c.a.createElement(j.a,{label:"Phone Number",hint:"Enter your number",value:this.state.textBoxValue,onChange:this.textBoxOnChange,onBlur:this.textBoxOnBlur}):"email"===this.props.type&&(t=c.a.createElement(j.a,{label:"Email Address",hint:"Enter your email",value:this.state.textBoxValue,onChange:this.textBoxOnChange,onBlur:this.textBoxOnBlur})),c.a.createElement(C.a,{className:"add-contact-modal",isOpen:this.props.isOpen,onRequestClose:this.props.onRequestClose,style:{content:{margin:"auto"}},ariaHideApp:!1,contentLabel:"Modal",shouldCloseOnOverlayClick:!0},c.a.createElement(O.a,{className:"add-contact-modal-form"},c.a.createElement(f.a,{className:"add-contact-modal-header"},c.a.createElement("p",null,{fax:"Add New Fax",email:"Add New Email",phone:"Add New Number"}[this.props.type])),c.a.createElement(f.a,{className:"add-contact-form-info"},c.a.createElement(H.a,{label:"Type",onChange:this.selectTypeOnChange},e),c.a.createElement("div",null,t,c.a.createElement("span",{className:"help-block"},this.state.errorMessage)),c.a.createElement("div",{className:"toggle-group"},c.a.createElement("div",{className:"toggle-switch"},c.a.createElement("input",{type:"checkbox",id:"unchecked1",className:"cbx hidden",onChange:this.toggleChangeHandler}),c.a.createElement("label",{htmlFor:"unchecked1",className:"lbl"})),c.a.createElement("p",null,"Hide from directory")),c.a.createElement("div",{className:"add-contact-modal-buttons"},this.state.formValid?c.a.createElement(E.a,{variant:"flat",className:"save-btn",onClick:this.submitContact},"Save"):c.a.createElement(E.a,{variant:"flat",className:"save-btn",disabled:!0,onClick:this.submitContact},"Save"),c.a.createElement(E.a,{variant:"flat",className:"cancel-btn",onClick:this.closeModal},"Cancel")))))}}]),a}(c.a.Component),P=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return c.a.createElement(C.a,{className:"confirmation-modal",ariaHideApp:!1,contentLabel:"Modal",isOpen:this.props.isOpen,onAfterOpen:this.props.onAfterOpen,onRequestClose:this.props.onRequestClose,shouldCloseOnOverlayClick:!1},c.a.createElement("p",{className:"bold-text confirmation-modal-header"},"Hide your full profile from directory?"),this.props.userData&&this.props.userData.is_sales_broker?c.a.createElement("p",{className:"small-text accent-text-dark"},c.a.createElement("span",{className:"bold-text"},"Important: "),"Sales brokers, please be aware that your choice to hide your profile will cause your contact information to be hidden when users search for properties that are associated with you."):"",c.a.createElement("div",{className:"confirmation-modal-btns"},c.a.createElement(E.a,{variant:"flat",onClick:this.props.onRequestClose.bind(this,!1)},"Cancel"),c.a.createElement(E.a,{variant:"flat",onClick:this.props.onRequestClose.bind(this,!0)},"Hide")))}}]),a}(c.a.Component),w=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={phone_contact_info:[],email_contact_info:[],fax_contact_info:[],addContactHidden:!0,modalOpen:!1,isFaxModal:!1,isEmailModal:!1,isPhoneModal:!1,modalType:null,confirmHideProfileModalOpen:!1},o.handleToggle=o.handleToggle.bind(Object(m.a)(o)),o.openModal=o.openModal.bind(Object(m.a)(o)),o.openFaxModal=o.openFaxModal.bind(Object(m.a)(o)),o.openEmailModal=o.openEmailModal.bind(Object(m.a)(o)),o.openPhoneModal=o.openPhoneModal.bind(Object(m.a)(o)),o.closeModal=o.closeModal.bind(Object(m.a)(o)),o.addContactClick=o.addContactClick.bind(Object(m.a)(o)),o.confirmHideProfile=o.confirmHideProfile.bind(Object(m.a)(o)),o}return Object(o.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({phone_contact_info:this.props.profile.phoneInfo.map((function(e){return{cp_id:e.cpId,contact_type:parseInt(e.contactType,10),description:e.value,hide_from_directory:e.directoryHide?1:0,is_primary:e.isPrimary}}))||[],email_contact_info:this.props.profile.emailInfo.map((function(e){return{cp_id:e.cpId,contact_type:parseInt(e.contactType,10),description:e.value,hide_from_directory:e.directoryHide?1:0,is_primary:e.isPrimary}}))||[],fax_contact_info:this.props.profile.faxInfo.map((function(e){return{cp_id:e.cpId,contact_type:parseInt(e.contactType,10),description:e.value,hide_from_directory:e.directoryHide?1:0,is_primary:e.isPrimary}}))||[]})}},{key:"openModal",value:function(){this.setState({modalOpen:!0})}},{key:"openFaxModal",value:function(){this.setState({modalOpen:!0,modalType:"fax"})}},{key:"openEmailModal",value:function(){this.setState({modalOpen:!0,modalType:"email"})}},{key:"openPhoneModal",value:function(){this.setState({modalOpen:!0,modalType:"phone"})}},{key:"closeModal",value:function(){this.setState({addContactHidden:!0,modalOpen:!1,isFaxModal:!1,isEmailModal:!1,isPhoneModal:!1,modalType:""})}},{key:"handleToggle",value:function(){0===this.props.directoryStatus?this.setState({confirmHideProfileModalOpen:!0}):this.props.toggleDirectoryHide(0)}},{key:"confirmHideProfile",value:function(e){e&&this.props.toggleDirectoryHide(1),this.setState({confirmHideProfileModalOpen:!1})}},{key:"setAsMain",value:function(e,t){switch(t){case"phone":var a=this.state.phone_contact_info;a.forEach((function(e){return e.is_primary=!1})),a.find((function(t){return t.cp_id===e})).is_primary=1,this.setState({phone_contact_info:a});break;case"email":var n=this.state.email_contact_info;n.forEach((function(e){return e.is_primary=!1})),n.find((function(t){return t.cp_id===e})).is_primary=1,this.setState({email_contact_info:n});break;case"fax":var o=this.state.fax_contact_info;o.forEach((function(e){return e.is_primary=!1})),o.find((function(t){return t.cp_id===e})).is_primary=1,this.setState({fax_contact_info:o})}this.props.updateContact(this.props.userData.contact_id,this.state.phone_contact_info,this.state.email_contact_info,this.state.fax_contact_info)}},{key:"showHideContact",value:function(e,t,a){switch(t){case"phone":var n=this.state.phone_contact_info;n.find((function(t){return t.cp_id===e})).hide_from_directory=a,this.setState({phone_contact_info:n});break;case"email":var o=this.state.email_contact_info;o.find((function(t){return t.cp_id===e})).hide_from_directory=a,this.setState({email_contact_info:o});break;case"fax":var i=this.state.fax_contact_info;i.find((function(t){return t.cp_id===e})).hide_from_directory=a,this.setState({fax_contact_info:i})}this.props.updateContact(this.props.userData.contact_id,this.state.phone_contact_info,this.state.email_contact_info,this.state.fax_contact_info)}},{key:"addContactClick",value:function(){this.setState({addContactHidden:!this.state.addContactHidden})}},{key:"render",value:function(){var e=this,t=null;this.props.toast&&this.props.toast.show&&(t=c.a.createElement(_.a,{closeToast:this.props.closeToast,delay:6e3},c.a.createElement("div",{className:"success-message"},c.a.createElement("p",null,this.props.toast.message),c.a.createElement(E.a,{variant:"flat",onClick:this.props.closeToast},this.props.toast.success?"Done":"Dismiss"))));var a,n={1:"Office",4:"Office",7:"Company",8:"Home",9:"Home",10:"Cell",13:"Work",15:"Personal"},o=this.props.profile.fullName.match(/\b(\w)/g);return a=o?o.join(""):"",c.a.createElement(f.a,null,c.a.createElement(y.a,{md:"12"},c.a.createElement("div",{className:"profile-page"},t,c.a.createElement("div",{className:"panel mui-panel profile-header-card"},c.a.createElement("div",{className:"profile-initials"},c.a.createElement("p",null,a)),c.a.createElement("div",null,c.a.createElement("p",{className:"page-header"},this.props.profile.fullName),c.a.createElement("p",{className:"small-title"},this.props.profile.corporateTitle,this.props.profile.corporateTitle&&this.props.profile.companyName?c.a.createElement("span",null," \u2022 "):"",this.props.profile.companyName))),c.a.createElement(f.a,{className:"profile-page-columns"},c.a.createElement(y.a,{lg:"7",md:"12"},c.a.createElement("p",{className:"profile-section-title"},"Personal Information"),c.a.createElement("div",{className:"panel mui-panel personal-info-panel"},this.state.phone_contact_info.map((function(t){return c.a.createElement(g,{category:"phone",key:t.cp_id,typeCode:t.contact_type,type:n[t.contact_type],contact:t.description,isPrimary:t.is_primary,hide:t.hide_from_directory,cpId:t.cp_id,setAsMain:e.setAsMain.bind(e),showHideContact:e.showHideContact.bind(e),deleteContact:e.props.deleteContact})})),this.state.email_contact_info.map((function(t){return c.a.createElement(g,{category:"email",key:t.cp_id,typeCode:t.contact_type,type:n[t.contact_type],contact:t.description,isPrimary:t.is_primary,hide:t.hide_from_directory,cpId:t.cp_id,setAsMain:e.setAsMain.bind(e),showHideContact:e.showHideContact.bind(e),deleteContact:e.props.deleteContact})})),this.state.fax_contact_info.map((function(t){return c.a.createElement(g,{category:"fax",key:t.cp_id,typeCode:t.contact_type,type:n[t.contact_type],contact:t.description,isPrimary:t.is_primary,hide:t.hide_from_directory,cpId:t.cp_id,setAsMain:e.setAsMain.bind(e),showHideContact:e.showHideContact.bind(e),deleteContact:e.props.deleteContact})})),c.a.createElement(f.a,null,c.a.createElement(y.a,{lg:"3",md:"3",sm:"4",xs:"4"},c.a.createElement("p",{className:"profile-info-header"},c.a.createElement("i",{className:"material-icons"},"location_on"),"Address")),c.a.createElement(y.a,{lg:"8",md:"8",sm:"7",xs:"7"},c.a.createElement("div",null,this.props.profile.address))))),c.a.createElement(y.a,{lg:"5",md:"12"},c.a.createElement("p",{className:"profile-section-title"},"Settings"),c.a.createElement("div",{className:"panel mui-panel profile-settings-panel"},c.a.createElement(f.a,null,c.a.createElement(y.a,{lg:"12"},c.a.createElement("p",{className:"profile-info-header no-padding-bottom"},"Hide full profile from directory"),c.a.createElement("div",{className:"row press"},c.a.createElement("input",{type:"checkbox",id:"unchecked",className:"cbx hidden",onChange:this.handleToggle,checked:Number(this.props.directoryStatus)}),c.a.createElement("label",{htmlFor:"unchecked",className:"lbl"})))),c.a.createElement("p",{className:"settings-footer"},"To ensure you are properly marketed and maintain maximum exposure when searched, your information should be updated and visible.")))),c.a.createElement("div",{className:"add-info-dropdown"},c.a.createElement("img",{src:"/images/icons/add-circle.png",className:this.state.addContactHidden?"add-circle-icon":"hidden",onClick:this.addContactClick,alt:"add-circle"}),c.a.createElement("img",{src:"/images/icons/close-circle.png",className:this.state.addContactHidden?"hidden":"close-circle-icon",onClick:this.addContactClick,alt:"close-circle"}),c.a.createElement("div",{className:this.state.addContactHidden?"hidden":"add-info-dropdown-content"},c.a.createElement("div",{onClick:this.openFaxModal},c.a.createElement("img",{src:"/images/icons/fax5-small.png",className:"fax-icon",alt:"fax"})),c.a.createElement("div",{onClick:this.openEmailModal},c.a.createElement("i",{className:"material-icons email-icon"},"mail_outline")),c.a.createElement("div",{onClick:this.openPhoneModal},c.a.createElement("i",{className:"material-icons phone-icon"},"phone")))),c.a.createElement(B,{isOpen:this.state.modalOpen,onRequestClose:this.closeModal,onAfterOpen:function(){},isFax:this.state.isFaxModal,isEmail:this.state.isEmailModal,isPhone:this.state.isFaxModal,type:this.state.modalType,addContact:this.props.addContact}),c.a.createElement(P,{userData:this.props.userData,isOpen:this.state.confirmHideProfileModalOpen,onRequestClose:this.confirmHideProfile,onAfterOpen:function(){}}))))}}]),a}(c.a.Component),T=a(50),I=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.navActions.updateNavTitle("Profile"),this.props.actions.getProfile()}},{key:"render",value:function(){return c.a.createElement("div",null,this.props.profile.loading?"":c.a.createElement(w,{profile:this.props.profile,toast:this.props.profile.toast,directoryStatus:this.props.profile.directoryStatus,emailInfo:this.props.profile.emailInfo,faxInfo:this.props.profile.faxInfo,contactInfoLoading:this.props.profile.contactInfoLoading,toggleDirectoryHide:this.props.actions.toggleDirectoryHide,closeToast:this.props.actions.closeToast,updateContact:this.props.actions.updateContact,deleteContact:this.props.actions.deleteContact,addContact:this.props.actions.addContact,userData:JSON.parse(localStorage.getItem("data"))}),c.a.createElement(C.a,{className:"loading-modal",isOpen:this.props.profile.loading,ariaHideApp:!1,contentLabel:"Modal",shouldCloseOnOverlayClick:!1},c.a.createElement("div",{className:this.props.profile.loading?"centered-spinner":"hidden"},c.a.createElement("img",{src:"/images/icons/spin.svg",className:"loading-spinner",alt:"loading spinner"}))))}}]),a}(c.a.Component);t.default=Object(r.b)((function(e){return{profile:e.profile}}),(function(e){return{navActions:Object(d.b)(T,e),actions:Object(d.b)(p,e)}}))(I)}}]);
//# sourceMappingURL=83.b2dd95e9.chunk.js.map