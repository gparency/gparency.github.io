(this["webpackJsonplt-app"]=this["webpackJsonplt-app"]||[]).push([[8],{1001:function(e,a,t){"use strict";t.r(a);var s=t(9),n=t(8),o=t(12),l=t(11),i=t(0),c=t.n(i),r=t(6),d=t(72),p=t.n(d),h=t(88),m=t(34),u=t.n(m),D=t(23),v=t(166),g=t(17),N=t(26),k=t.n(N),M=t(73),b=t.n(M),f=t(46),E=t.n(f),C=t(2),O=t(39),y=t.n(O),w=(t(843),t(844)),A=t.n(w),S=t(749),j=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).state={note:"",dueDate:null,assignee:0,assignToMe:!0,dueDateModalOpen:!1,showAssignModal:!1,showDeleteModal:!1,showMarkDoneModal:!1,showUnsavedChangesModal:!1},n.close=n.close.bind(Object(g.a)(n)),n.closeDueDateModal=n.closeDueDateModal.bind(Object(g.a)(n)),n.openAssignModal=n.openAssignModal.bind(Object(g.a)(n)),n.closeAssignModal=n.closeAssignModal.bind(Object(g.a)(n)),n.openConfirmDeleteModal=n.openConfirmDeleteModal.bind(Object(g.a)(n)),n.closeConfirmDeleteModal=n.closeConfirmDeleteModal.bind(Object(g.a)(n)),n.deleteDueDate=n.deleteDueDate.bind(Object(g.a)(n)),n.deleteNote=n.deleteNote.bind(Object(g.a)(n)),n.markNoteDone=n.markNoteDone.bind(Object(g.a)(n)),n.openDueDateModal=n.openDueDateModal.bind(Object(g.a)(n)),n.saveNote=n.saveNote.bind(Object(g.a)(n)),n.saveNoteAndMarkDone=n.saveNoteAndMarkDone.bind(Object(g.a)(n)),n.submitDealNote=n.submitDealNote.bind(Object(g.a)(n)),n.submitDueDate=n.submitDueDate.bind(Object(g.a)(n)),n.noteInputChange=n.noteInputChange.bind(Object(g.a)(n)),n.confirmMarkNoteDone=n.confirmMarkNoteDone.bind(Object(g.a)(n)),n.closeUnsavedChangesModal=n.closeUnsavedChangesModal.bind(Object(g.a)(n)),n.openConfirmMarkDoneModal=n.openConfirmMarkDoneModal.bind(Object(g.a)(n)),n.closeConfirmMarkDoneModal=n.closeConfirmMarkDoneModal.bind(Object(g.a)(n)),n.updateNoteReview=n.updateNoteReview.bind(Object(g.a)(n)),n.datePickerChange=n.datePickerChange.bind(Object(g.a)(n)),n}return Object(n.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.note||this.state.dueDate||this.setState({note:e.notes?e.notes:"",dueDate:e.dueDate?e.dueDate:null})}},{key:"componentWillUnmount",value:function(){this.setState({note:"",assignee:0,assignToMe:!0,dueDate:null,dueDateModalOpen:!1,showDeleteModal:!1,showMarkDoneModal:!1,showUnsavedChangesModal:!1})}},{key:"saveNote",value:function(){this.props.addOrUpdateNote(this.props.dealId,this.props.noteId,this.state.note,y()(this.state.dueDate).isValid()?this.state.dueDate:null)}},{key:"submitDealNote",value:function(){this.saveNote(),this.updateNoteReview(),this.close()}},{key:"close",value:function(){this.props.clearNote(),C.f.goBack()}},{key:"openConfirmMarkDoneModal",value:function(){this.setState({showMarkDoneModal:!0})}},{key:"closeConfirmMarkDoneModal",value:function(){this.setState({showMarkDoneModal:!1})}},{key:"confirmMarkNoteDone",value:function(){this.state.note!==this.props.notes?this.setState({showMarkDoneModal:!1,showUnsavedChangesModal:!0}):this.markNoteDone()}},{key:"closeUnsavedChangesModal",value:function(){this.setState({showUnsavedChangesModal:!1})}},{key:"saveNoteAndMarkDone",value:function(){this.saveNote(),this.markNoteDone()}},{key:"markNoteDone",value:function(){this.setState({showMarkDoneModal:!1}),this.props.markNoteDone(this.props.noteId,this.props.dealId),this.updateNoteReview(),this.close()}},{key:"assignToMeChange",value:function(){this.state.assignee>0&&!this.state.assignToMe&&this.setState({assignee:0}),this.setState({assignToMe:!this.state.assignToMe})}},{key:"openAssignModal",value:function(){this.setState({showAssignModal:!0})}},{key:"assigneeChange",value:function(e){e.target.value>0?this.setState({assignToMe:!1}):this.setState({assignToMe:!0}),this.setState({assignee:""===e.target.value?0:e.target.value})}},{key:"assignNote",value:function(){this.props.assignNote(this.props.noteId,0===this.state.assignee?null:this.state.assignee),this.closeAssignModal()}},{key:"closeAssignModal",value:function(){this.setState({showAssignModal:!1})}},{key:"closeConfirmDeleteModal",value:function(){this.setState({showDeleteModal:!1})}},{key:"openConfirmDeleteModal",value:function(){this.setState({showDeleteModal:!0})}},{key:"deleteNote",value:function(){this.setState({showDeleteModal:!1}),this.props.deleteNote(this.props.noteId,this.props.dealId),this.updateNoteReview(),this.close()}},{key:"noteInputChange",value:function(e){this.setState({note:e.target.value})}},{key:"openDueDateModal",value:function(){this.setState({dueDateModalOpen:!0})}},{key:"closeDueDateModal",value:function(){this.setState({dueDateModalOpen:!1,dueDate:this.props.dueDate})}},{key:"datePickerChange",value:function(e){this.setState({dueDate:y()(e).format("YYYY-MM-DD HH:mm:ss").toString()})}},{key:"deleteDueDate",value:function(){this.setState({dueDate:null})}},{key:"submitDueDate",value:function(){this.props.addOrUpdateDueDate(this.props.noteId,y()(this.state.dueDate).isValid()?this.state.dueDate:null),this.updateNoteReview(),this.setState({dueDateModalOpen:!1})}},{key:"updateNoteReview",value:function(){this.props.qtsPlacer&&this.props.updateNoteReviewed(this.props.dealId)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,this.props.loading?c.a.createElement(p.a,{className:"loading-modal",isOpen:this.props.loading,ariaHideApp:!1,contentLabel:"Modal",shouldCloseOnOverlayClick:!1},c.a.createElement("div",{className:this.props.loading?"centered-spinner":"hidden"},c.a.createElement("img",{src:"/images/icons/spin.svg",alt:"loading-spinner",className:"loading-spinner"}))):c.a.createElement("div",null,c.a.createElement(k.a,{className:"sub-header"},c.a.createElement("div",{className:"sub-header-close"},c.a.createElement("i",{className:"material-icons",onClick:this.close},"close")),c.a.createElement("p",{className:"white page-title"},this.props.noteId>=1?"Edit":"Add"," Note"),c.a.createElement("div",{className:"note-details-actions"},this.props.noteId>=1?c.a.createElement("div",null,c.a.createElement("i",{className:"material-icons",onClick:this.openAssignModal},"person"),c.a.createElement("i",{className:"material-icons",onClick:this.openConfirmDeleteModal},"delete"),c.a.createElement("i",{className:"material-icons",onClick:this.openConfirmMarkDoneModal},"check"),c.a.createElement("i",{className:"material-icons",onClick:this.openDueDateModal},"access_time")):"",c.a.createElement(u.a,{variant:"flat",className:"note-save-btn",onClick:this.submitDealNote},"Save"))),c.a.createElement("div",{className:"note-details sub-header-padding"},c.a.createElement("textarea",{className:"deal-details-note-textarea",placeholder:"Note...",onChange:this.noteInputChange,value:this.state.note}),c.a.createElement(p.a,{className:"date-time-modal",isOpen:this.state.dueDateModalOpen,ariaHideApp:!1,contentLabel:"Modal",shouldCloseOnOverlayClick:!0},c.a.createElement("div",{className:"modal-header"},c.a.createElement("p",{className:"bold-text"},"Date and Time")),c.a.createElement("div",{className:"date-time"},c.a.createElement(A.a,{value:y()(this.state.dueDate)&&y()(this.state.dueDate).isValid()?y()(new Date(this.state.dueDate)).format("MM/DD/YYYY h:mm A"):"",onChange:this.datePickerChange,inputProps:{placeholder:"Select Date"}}),c.a.createElement("i",{className:"material-icons date-time-clear",onClick:this.deleteDueDate},"close")),c.a.createElement("div",{className:"modal-btns"},c.a.createElement(u.a,{variant:"flat",onClick:this.closeDueDateModal},"CANCEL"),c.a.createElement(u.a,{variant:"flat",onClick:this.submitDueDate},"SAVE"))),c.a.createElement(S.a,{isOpen:this.state.showDeleteModal,message:"Are you sure you want to delete?",close:this.closeConfirmDeleteModal,confirm:this.deleteNote}),c.a.createElement(p.a,{className:"delete-modal",isOpen:this.state.showUnsavedChangesModal,ariaHideApp:!1,contentLabel:"Modal",shouldCloseOnOverlayClick:!1},c.a.createElement("p",{className:"bold-text"},"This note has some unsaved changes!"),c.a.createElement("div",{className:"modal-btns"},c.a.createElement(u.a,{variant:"flat",onClick:this.closeUnsavedChangesModal},"CANCEL"),c.a.createElement(u.a,{variant:"flat",onClick:this.markNoteDone},"DISCARD"),c.a.createElement(u.a,{variant:"flat",onClick:this.saveNoteAndMarkDone},"SAVE"))),c.a.createElement(S.a,{isOpen:this.state.showMarkDoneModal,message:"Are you sure you want to mark this note as done?",close:this.closeConfirmMarkDoneModal,confirm:this.confirmMarkNoteDone}),c.a.createElement(p.a,{className:"assign-modal",isOpen:this.state.showAssignModal,ariaHideApp:!1,contentLabel:"Modal",onAfterOpen:function(){},shouldCloseOnOverlayClick:!0},c.a.createElement("p",{className:"bold-text"},"Assign to"),c.a.createElement("div",{className:"rkmd-checkbox checkbox-ripple"},c.a.createElement("label",{className:"input-checkbox checkbox-lightBlue"},c.a.createElement("input",{type:"checkbox",id:"me",checked:this.state.assignToMe,onChange:function(){return e.assignToMeChange()}}),c.a.createElement("span",{className:"checkbox"}),c.a.createElement("span",{className:"ripple"})),c.a.createElement("p",{htmlFor:"me",className:"label"},"Assign to me")),c.a.createElement(b.a,{className:"".concat(0===this.state.assignee?"placeholder":""," assignee-select"),value:this.state.assignee,onChange:this.assigneeChange.bind(this)},c.a.createElement(E.a,{className:"hidden",label:"Assignee",value:0}),c.a.createElement(E.a,{label:"Please Select...",value:""}),this.props.brokers&&this.props.brokers.filter((function(a){return a.member_id!==e.props.user_data.member_id})).map((function(e,a){return c.a.createElement(E.a,{key:a,label:e.full_name,value:e.member_id})}))),c.a.createElement("div",{className:"modal-btns"},c.a.createElement(u.a,{variant:"flat",onClick:this.closeAssignModal.bind(this)},"CANCEL"),c.a.createElement(u.a,{variant:"flat",onClick:this.assignNote.bind(this)},"YES"))),c.a.createElement(p.a,{className:"loading-modal",isOpen:this.props.loading,ariaHideApp:!1,contentLabel:"Modal",shouldCloseOnOverlayClick:!1},c.a.createElement("div",{className:this.props.loading?"centered-spinner":"hidden"},c.a.createElement("img",{src:"/images/icons/spin.svg",className:"loading-spinner",alt:"loading spinner"}))))))}}]),t}(c.a.Component),I=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(n.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.noteId&&this.props.actions.getNoteById(this.props.match.params.noteId),this.props.actions.getDealById(this.props.match.params.dealId),this.props.actions.getBrokersByDeal(this.props.match.params.dealId)}},{key:"render",value:function(){var e=this.props.dealDetails.note?this.props.dealDetails.note[0]:null,a=this.props.dealDetails.deal?this.props.dealDetails.deal:null,t=null;return this.props.dealDetails.showSuccessToast&&(t=c.a.createElement(h.a,{closeToast:this.props.actions.closeDealNoteSuccessToast,delay:6e3},c.a.createElement("div",{className:"success-message"},c.a.createElement("p",null,this.props.dealDetails.message),c.a.createElement(u.a,{variant:"flat",onClick:this.props.actions.closeDealNoteSuccessToast},"Done")))),this.props.dealDetails.showErrorToast&&(t=c.a.createElement(h.a,{closeToast:this.props.actions.closeDealNoteErrorToast,delay:6e3},c.a.createElement("div",{className:"success-message"},c.a.createElement("p",null,this.props.dealDetails.message),c.a.createElement(u.a,{variant:"flat",onClick:this.props.actions.closeDealNoteErrorToast},"Dismiss")))),this.props.dealDetails.toast.show&&(t=c.a.createElement(h.a,{closeToast:this.props.actions.closeToast,delay:6e3},c.a.createElement("div",{className:"success-message"},c.a.createElement("p",null,this.props.dealDetails.toast.message),c.a.createElement(u.a,{variant:"flat",onClick:this.props.actions.closeToast},this.props.dealDetails.toast.success?"Done":"Dismiss")))),c.a.createElement("div",null,this.props.dealDetails.loading?c.a.createElement(p.a,{className:"comps-loading-modal",ariaHideApp:!1,contentLabel:"modal",isOpen:this.props.dealDetails.loading,shouldCloseOnOverlayClick:!1},c.a.createElement("div",{className:this.props.dealDetails.loading?"centered-spinner":"hidden"},c.a.createElement("img",{src:"/images/icons/spin.svg",className:"loading-spinner",alt:"loading spinner"}))):c.a.createElement("div",null,c.a.createElement(j,{noteId:this.props.match.params.noteId?parseInt(this.props.match.params.noteId,10):null,dealId:this.props.match.params.dealId?parseInt(this.props.match.params.dealId,10):null,notes:e?e.notes:"",dueDate:e?e.due_date:null,qtsPlacer:!!a&&a.qts_placer,user_data:JSON.parse(localStorage.getItem("data")),brokers:this.props.dealDetails.brokers,loading:this.props.dealDetails.loading,clearNote:this.props.actions.clearNote,assignNote:this.props.actions.assignNote,markNoteDone:this.props.actions.markNoteAsDone,deleteNote:this.props.actions.deleteDealNote,addOrUpdateNote:this.props.actions.addOrUpdateNote,addOrUpdateDueDate:this.props.actions.addOrUpdateNoteDueDate,updateNoteReviewed:this.props.actions.updateNoteReviewed}),t))}}]),t}(c.a.Component);a.default=Object(r.b)((function(e){return{dealDetails:e.dealDetails}}),(function(e){return{actions:Object(D.b)(v,e)}}))(I)},749:function(e,a,t){"use strict";var s=t(9),n=t(8),o=t(12),l=t(11),i=t(0),c=t.n(i),r=t(72),d=t.n(r),p=t(34),h=t.n(p),m=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(n.a)(t,[{key:"render",value:function(){return c.a.createElement(d.a,{className:"delete-modal",isOpen:this.props.isOpen,ariaHideApp:!1,contentLabel:"Modal",shouldCloseOnOverlayClick:!0},c.a.createElement("p",{className:"bold-text"},this.props.message),c.a.createElement("div",{className:"modal-btns"},c.a.createElement(h.a,{variant:"flat",onClick:this.props.close},"CANCEL"),c.a.createElement(h.a,{variant:"flat",onClick:this.props.confirm},this.props.confirmBtnText?this.props.confirmBtnText:"YES")))}}]),t}(c.a.Component);a.a=m}}]);
//# sourceMappingURL=8.164b296d.chunk.js.map