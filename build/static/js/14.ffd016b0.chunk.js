(this["webpackJsonplt-app"]=this["webpackJsonplt-app"]||[]).push([[14],{1003:function(e,t,a){"use strict";a.r(t);var n=a(9),o=a(8),l=a(17),i=a(12),s=a(11),r=a(0),c=a.n(r),p=a(6),d=a(23),u=a(3),m=a(45),h=a(2),f=a(797),v=a(72),g=a.n(v),b=a(34),w=a.n(b),E=a(88),k=a(754),_=a.n(k),y=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).compsClick=o.compsClick.bind(Object(l.a)(o)),o}return Object(o.a)(a,[{key:"dealClick",value:function(e,t,a,n,o){this.props.setPageAndScrollPos("/broker-deals/pw",window.scrollY),h.f.go("/broker-deal/".concat(e,"/").concat(t,"/").concat(o,"?").concat(Object(m.stringify)(Object(u.a)(Object(u.a)({},Object(m.parse)(window.location.search)),{},{violations:a,additional_properties:n,previous_page:window.location.pathname+window.location.search}))))}},{key:"addDealNotesClick",value:function(e,t,a,n,o){o.stopPropagation(),h.f.go("/broker-deal/".concat(e,"/").concat(t,"/notes/add?").concat(Object(m.stringify)({violations:a,additional_properties:n})))}},{key:"compsClick",value:function(e,t,a,n,o){o.stopPropagation(),sessionStorage.setItem("comps_inNYC",e),this.props.setPageAndScrollPos("/broker-deals/pw",window.scrollY),this.props.submitCompsSearch("".concat(t," ").concat(a),n)}},{key:"render",value:function(){var e=this,t="";this.props.toast.show&&(t=c.a.createElement(E.a,{closeToast:this.props.closeToast,delay:6e3},c.a.createElement("div",{className:"success-message"},c.a.createElement("p",null,this.props.toast.message),c.a.createElement(w.a,{variant:"flat",onClick:this.props.closeToast},this.props.toast.success?"Done":"Dismiss"))));var a=0;return c.a.createElement("div",null,c.a.createElement("div",null,this.props.suggestions&&this.props.suggestions.map((function(t,n){return c.a.createElement(_.a,{height:200,offset:100,once:!0,key:n},c.a.createElement(f.a,{key:a++,deal:t,contact:e.props.contact,changeExpectedIPDate:e.props.changeExpectedIPDate,updateStar:e.props.updateStar,updateDealReview:e.props.updateDealReview,clickFunction:e.dealClick.bind(e),loadingContact:e.props.loadingContact,addDealNoteClick:e.addDealNotesClick.bind(e),compsClick:e.compsClick,updateRating:e.props.updateRating,getFullContactInfo:e.props.getFullContactInfo}))})),";",t),c.a.createElement(g.a,{className:"loading-modal",ariaHideApp:!1,contentLabel:"Modal",isOpen:this.props.loading,shouldCloseOnOverlayClick:!1},c.a.createElement("div",{className:this.props.loading?"centered-spinner":"hidden"},c.a.createElement("img",{src:"/images/icons/spin.svg",className:"loading-spinner",alt:"loading spinner"}))),c.a.createElement("div",{className:!this.props.loading&&(this.props.noPWDeals||this.props.suggestions&&this.props.suggestions.length<1)?"":"hidden"},c.a.createElement("div",null,c.a.createElement("div",{className:"grey-circle"},c.a.createElement("i",{className:"material-icons"},"warning")),c.a.createElement("h2",{className:"no-results"},"No PW Deals"))))}}]),a}(c.a.Component),N=a(167),O=a(50),C=a(164),R=a(142),D=a(113),P=Object(R.j)(D.a,D.a.PW),x=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).updateStar=o.updateStar.bind(Object(l.a)(o)),o.updateSearch=o.updateSearch.bind(Object(l.a)(o)),o.changeExpectedIPDate=o.changeExpectedIPDate.bind(Object(l.a)(o)),o.updateDealReview=o.updateDealReview.bind(Object(l.a)(o)),o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.comps.previousScrollPos&&this.props.comps.previousScrollPos.length&&window.scrollTo(0,this.props.comps.previousScrollPos[this.props.comps.previousScrollPos.length-1]),this.props.compsActions.resetScrollPosition(),this.props.dealsActions.loadPWDeals()}},{key:"updateStar",value:function(e,t,a){a.stopPropagation(),this.props.dealsActions.updateStar(e,t,P)}},{key:"updateSearch",value:function(e){this.props.dealsActions.updateSearch(e,P)}},{key:"changeExpectedIPDate",value:function(e,t){this.props.dealsActions.updateExpectedIPDate(e,t,P)}},{key:"updateDealReview",value:function(e,t,a,n){this.props.dealsActions.updateDealReviewed(e,t,a,n)}},{key:"updateRating",value:function(e,t){this.props.dealsActions.updateRating(e,t,P)}},{key:"render",value:function(){return c.a.createElement(y,{suggestions:this.props.pwDeals.suggestions,contact:this.props.pwDeals.contact,updateSearch:this.updateSearch,loading:this.props.pwDeals.loading,loadingContact:this.props.pwDeals.loadingContact,noDeals:this.props.pwDeals.noPWDeals,updateStar:this.updateStar,changeExpectedIPDate:this.changeExpectedIPDate,closeToast:this.props.dealsActions.closeToast,toast:this.props.pwDeals.toast,updateDealReview:this.updateDealReview,updateRating:this.updateRating.bind(this),getFullContactInfo:this.props.dealsActions.getFullContactInfo,setPageAndScrollPos:this.props.compsActions.setPageAndScrollPos,submitCompsSearch:this.props.compsActions.submitCompsSearch})}}]),a}(c.a.Component);t.default=Object(p.b)((function(e){return{pwDeals:e.pwDeals,comps:e.comps}}),(function(e){return{dealsActions:Object(d.b)(N,e),navigationTitleActions:Object(d.b)(O,e),compsActions:Object(d.b)(C,e)}}))(x)},754:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forceCheck=t.lazyload=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),l=u(o),i=u(a(32)),s=u(a(13)),r=a(755),c=u(a(756)),p=u(a(757)),d=u(a(758));function u(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=0,g=0,b=0,w=0,E="data-lazyload-listened",k=[],_=[],y=!1;try{var N=Object.defineProperty({},"passive",{get:function(){y=!0}});window.addEventListener("test",null,N)}catch(M){}var O=!!y&&{capture:!1,passive:!0},C=function(e){var t=i.default.findDOMNode(e);if(t instanceof HTMLElement){var a=(0,c.default)(t);(e.props.overflow&&a!==t.ownerDocument&&a!==document&&a!==document.documentElement?function(e,t){var a=i.default.findDOMNode(e),n=void 0,o=void 0,l=void 0,s=void 0;try{var r=t.getBoundingClientRect();n=r.top,o=r.left,l=r.height,s=r.width}catch(M){n=v,o=g,l=w,s=b}var c=window.innerHeight||document.documentElement.clientHeight,p=window.innerWidth||document.documentElement.clientWidth,d=Math.max(n,0),u=Math.max(o,0),m=Math.min(c,n+l)-d,h=Math.min(p,o+s)-u,f=void 0,E=void 0,k=void 0,_=void 0;try{var y=a.getBoundingClientRect();f=y.top,E=y.left,k=y.height,_=y.width}catch(M){f=v,E=g,k=w,_=b}var N=f-d,O=E-u,C=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return N-C[0]<=m&&N+k+C[1]>=0&&O-C[0]<=h&&O+_+C[1]>=0}(e,a):function(e){var t=i.default.findDOMNode(e);if(!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))return!1;var a=void 0,n=void 0;try{var o=t.getBoundingClientRect();a=o.top,n=o.height}catch(M){a=v,n=w}var l=window.innerHeight||document.documentElement.clientHeight,s=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return a-s[0]<=l&&a+n+s[1]>=0}(e))?e.visible||(e.props.once&&_.push(e),e.visible=!0,e.forceUpdate()):e.props.once&&e.visible||(e.visible=!1,e.props.unmountIfInvisible&&e.forceUpdate())}},R=function(){for(var e=0;e<k.length;++e){var t=k[e];C(t)}_.forEach((function(e){var t=k.indexOf(e);-1!==t&&k.splice(t,1)})),_=[]},D=void 0,P=null,x=function(e){function t(e){m(this,t);var a=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.visible=!1,a}return f(t,e),n(t,[{key:"componentDidMount",value:function(){var e=window,t=this.props.scrollContainer;t&&"string"===typeof t&&(e=e.document.querySelector(t));var a=void 0!==this.props.debounce&&"throttle"===D||"debounce"===D&&void 0===this.props.debounce;if(a&&((0,r.off)(e,"scroll",P,O),(0,r.off)(window,"resize",P,O),P=null),P||(void 0!==this.props.debounce?(P=(0,p.default)(R,"number"===typeof this.props.debounce?this.props.debounce:300),D="debounce"):void 0!==this.props.throttle?(P=(0,d.default)(R,"number"===typeof this.props.throttle?this.props.throttle:300),D="throttle"):P=R),this.props.overflow){var n=(0,c.default)(i.default.findDOMNode(this));if(n&&"function"===typeof n.getAttribute){var o=+n.getAttribute(E)+1;1===o&&n.addEventListener("scroll",P,O),n.setAttribute(E,o)}}else if(0===k.length||a){var l=this.props,s=l.scroll,u=l.resize;s&&(0,r.on)(e,"scroll",P,O),u&&(0,r.on)(window,"resize",P,O)}k.push(this),C(this)}},{key:"shouldComponentUpdate",value:function(){return this.visible}},{key:"componentWillUnmount",value:function(){if(this.props.overflow){var e=(0,c.default)(i.default.findDOMNode(this));if(e&&"function"===typeof e.getAttribute){var t=+e.getAttribute(E)-1;0===t?(e.removeEventListener("scroll",P,O),e.removeAttribute(E)):e.setAttribute(E,t)}}var a=k.indexOf(this);-1!==a&&k.splice(a,1),0===k.length&&"undefined"!==typeof window&&((0,r.off)(window,"resize",P,O),(0,r.off)(window,"scroll",P,O))}},{key:"render",value:function(){return this.visible?this.props.children:this.props.placeholder?this.props.placeholder:l.default.createElement("div",{style:{height:this.props.height},className:"lazyload-placeholder"})}}]),t}(o.Component);x.propTypes={once:s.default.bool,height:s.default.oneOfType([s.default.number,s.default.string]),offset:s.default.oneOfType([s.default.number,s.default.arrayOf(s.default.number)]),overflow:s.default.bool,resize:s.default.bool,scroll:s.default.bool,children:s.default.node,throttle:s.default.oneOfType([s.default.number,s.default.bool]),debounce:s.default.oneOfType([s.default.number,s.default.bool]),placeholder:s.default.node,scrollContainer:s.default.oneOfType([s.default.string,s.default.object]),unmountIfInvisible:s.default.bool},x.defaultProps={once:!1,offset:0,overflow:!1,resize:!1,scroll:!0,unmountIfInvisible:!1};var j=function(e){return e.displayName||e.name||"Component"};t.lazyload=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return function(a){function o(){m(this,o);var e=h(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return e.displayName="LazyLoad"+j(t),e}return f(o,a),n(o,[{key:"render",value:function(){return l.default.createElement(x,e,l.default.createElement(t,this.props))}}]),o}(o.Component)}},t.default=x,t.forceCheck=R},755:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,a,n){n=n||!1,e.addEventListener?e.addEventListener(t,a,n):e.attachEvent&&e.attachEvent("on"+t,(function(t){a.call(e,t||window.event)}))},t.off=function(e,t,a,n){n=n||!1,e.removeEventListener?e.removeEventListener(t,a,n):e.detachEvent&&e.detachEvent("on"+t,a)}},756:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof HTMLElement))return document.documentElement;for(var t="absolute"===e.style.position,a=/(scroll|auto)/,n=e;n;){if(!n.parentNode)return e.ownerDocument||document.documentElement;var o=window.getComputedStyle(n),l=o.position,i=o.overflow,s=o["overflow-x"],r=o["overflow-y"];if("static"===l&&t)n=n.parentNode;else{if(a.test(i)&&a.test(s)&&a.test(r))return n;n=n.parentNode}}return e.ownerDocument||e.documentElement||document.documentElement}},757:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var n=void 0,o=void 0,l=void 0,i=void 0,s=void 0,r=function r(){var c=+new Date-i;c<t&&c>=0?n=setTimeout(r,t-c):(n=null,a||(s=e.apply(l,o),n||(l=null,o=null)))};return function(){l=this,o=arguments,i=+new Date;var c=a&&!n;return n||(n=setTimeout(r,t)),c&&(s=e.apply(l,o),l=null,o=null),s}}},758:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var n,o;return t||(t=250),function(){var l=a||this,i=+new Date,s=arguments;n&&i<n+t?(clearTimeout(o),o=setTimeout((function(){n=i,e.apply(l,s)}),t)):(n=i,e.apply(l,s))}}},779:function(e,t,a){"use strict";var n=a(9),o=a(8),l=a(17),i=a(12),s=a(11),r=a(0),c=a.n(r),p=a(72),d=a.n(p),u=a(38),m=a.n(u),h=a(34),f=a.n(h),v=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={rating:o.props.deal_rating},o.onRadioChange=o.onRadioChange.bind(Object(l.a)(o)),o}return Object(o.a)(a,[{key:"onRadioChange",value:function(e){this.setState({rating:e.currentTarget.value?parseInt(e.currentTarget.value,10):0})}},{key:"render",value:function(){var e=this;return c.a.createElement(d.a,{className:"deal-rating-modal",ariaHideApp:!1,contentLabel:"Modal",isOpen:this.props.isOpen,onRequestClose:function(t){return e.props.updateRating(e.state.rating,t)},onAfterOpen:this.props.onAfterOpen,style:{content:{margin:"auto"}},shouldCloseOnOverlayClick:!0},c.a.createElement(m.a,{className:"deal-rating-modal-form"},c.a.createElement("i",{className:"material-icons modal-exit",onClick:function(t){return e.props.updateRating(e.state.rating,t)}},"close"),c.a.createElement("h4",{className:"change-rating-header"},"Forecast"),c.a.createElement("div",{className:"deal-ratings-container"},c.a.createElement("input",{className:"radio-input",type:"radio",name:"1",id:"radio1",checked:1===this.state.rating,onChange:this.onRadioChange,value:1}),c.a.createElement("label",{className:"radio-label label-one",htmlFor:"radio1"},"1"),c.a.createElement("input",{className:"radio-input",type:"radio",name:"2",id:"radio2",checked:2===this.state.rating,onChange:this.onRadioChange,value:2}),c.a.createElement("label",{className:"radio-label label-two",htmlFor:"radio2"},"2"),c.a.createElement("input",{className:"radio-input",type:"radio",name:"3",id:"radio3",checked:3===this.state.rating,onChange:this.onRadioChange,value:3}),c.a.createElement("label",{className:"radio-label label-three",htmlFor:"radio3"},"3")),c.a.createElement("div",null,c.a.createElement(f.a,{variant:"flat",className:"deal-rating-modal-done",onClick:function(t){return e.props.updateRating(e.state.rating,t)}},"Done"))))}}]),a}(c.a.Component);t.a=v},780:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(9),o=a(8),l=a(12),i=a(11),s=a(0),r=a.n(s),c=a(72),p=a.n(c),d=a(38),u=a.n(d),m=a(34),h=a.n(m),f=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={check_all:!1,forecast_reviewed:null,ip_date_reviewed:null,notes_reviewed:null},o}return Object(o.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({check_all:e.allReviewed,forecast_reviewed:e.forecast_reviewed,ip_date_reviewed:e.ip_date_reviewed,notes_reviewed:e.notes_reviewed})}},{key:"checkHandler",value:function(e){var t=this;e.stopPropagation(),"check_all"===e.target.id?e.target.checked?this.setState({check_all:!0,forecast_reviewed:null===this.props.forecast_reviewed?"touched":this.props.forecast_reviewed,ip_date_reviewed:null===this.props.ip_date_reviewed?"touched":this.props.ip_date_reviewed,notes_reviewed:null===this.props.notes_reviewed?"touched":this.props.notes_reviewed}):this.setState({check_all:!1,forecast_reviewed:null!=this.props.forecast_reviewed?this.props.forecast_reviewed:null,ip_date_reviewed:null!=this.props.ip_date_reviewed?this.props.ip_date_reviewed:null,notes_reviewed:null!=this.props.notes_reviewed?this.props.notes_reviewed:null}):this.setState({[e.target.id]:!0===e.target.checked?"touched":null},(function(){var e=null!=t.state.forecast_reviewed&&null!=t.state.ip_date_reviewed&&null!=t.state.notes_reviewed;t.setState({check_all:e})}))}},{key:"updateDealReview",value:function(e){this.props.updateDealReview(this.state.forecast_reviewed,this.state.ip_date_reviewed,this.state.notes_reviewed),this.props.onRequestClose(e)}},{key:"cancel",value:function(e){this.setState({check_all:!1,forecast_reviewed:this.props.forecast_reviewed,ip_date_reviewed:this.props.ip_date_reviewed,notes_reviewed:this.props.notes_reviewed}),this.props.onRequestClose(e)}},{key:"render",value:function(){var e=this;return r.a.createElement(p.a,{className:"deal-rating-modal deal-review-modal",ariaHideApp:!1,contentLabel:"Modal",isOpen:this.props.isOpen,onRequestClose:function(t){return e.props.onRequestClose(t)},onAfterOpen:this.props.onAfterOpen,shouldCloseOnOverlayClick:!0},r.a.createElement(u.a,null,r.a.createElement("i",{className:"material-icons modal-exit",onClick:function(t){return e.props.onRequestClose(t)}},"close"),r.a.createElement("h4",{className:"change-rating-header"},"Review"),r.a.createElement("div",{className:"rkmd-checkbox checkbox-ripple"},r.a.createElement("label",{className:"input-checkbox checkbox-lightBlue"},r.a.createElement("input",{type:"checkbox",id:"check_all",checked:this.state.check_all,onChange:function(t){return e.checkHandler(t)},disabled:this.props.allReviewed}),r.a.createElement("span",{className:"checkbox"}),r.a.createElement("span",{className:"ripple"})),r.a.createElement("p",{htmlFor:"check_all",className:"label"},"Check All")),r.a.createElement("div",{className:"rkmd-checkbox checkbox-ripple"},r.a.createElement("label",{className:"input-checkbox checkbox-lightBlue"},r.a.createElement("input",{type:"checkbox",id:"forecast_reviewed",checked:null!=this.state.forecast_reviewed,onChange:function(t){return e.checkHandler(t)},disabled:null!=this.props.forecast_reviewed}),r.a.createElement("span",{className:"checkbox"}),r.a.createElement("span",{className:"ripple"})),r.a.createElement("p",{htmlFor:"forecast_reviewed",className:"label"},"Forecast"),r.a.createElement("p",{className:"bold-text review-modal-detail"},this.props.forecast)),r.a.createElement("div",{className:"rkmd-checkbox checkbox-ripple"},r.a.createElement("label",{className:"input-checkbox checkbox-lightBlue"},r.a.createElement("input",{type:"checkbox",id:"ip_date_reviewed",checked:null!=this.state.ip_date_reviewed,onChange:function(t){return e.checkHandler(t)},disabled:null!=this.props.ip_date_reviewed}),r.a.createElement("span",{className:"checkbox"}),r.a.createElement("span",{className:"ripple"})),r.a.createElement("p",{htmlFor:"ip_date_reviewed",className:"label"},"Expected IP Date"),r.a.createElement("p",{className:"bold-text review-modal-detail"},this.props.ip_date)),r.a.createElement("div",{className:"rkmd-checkbox checkbox-ripple"},r.a.createElement("label",{className:"input-checkbox checkbox-lightBlue"},r.a.createElement("input",{type:"checkbox",id:"notes_reviewed",checked:null!=this.state.notes_reviewed,onChange:function(t){return e.checkHandler(t)},disabled:null!=this.props.notes_reviewed}),r.a.createElement("span",{className:"checkbox"}),r.a.createElement("span",{className:"ripple"})),r.a.createElement("p",{htmlFor:"notes_reviewed",className:"label"},"Last Updated Note"),r.a.createElement("p",{className:"review-modal-note"},this.props.notes)),r.a.createElement("div",{className:"modal-btns"},r.a.createElement(h.a,{variant:"flat",onClick:function(t){return e.cancel(t)}},"Cancel"),r.a.createElement(h.a,{variant:"flat",onClick:function(t){return e.updateDealReview(t)},disabled:this.props.allReviewed},"Save"))))}}]),a}(r.a.Component)},797:function(e,t,a){"use strict";var n=a(10),o=a.n(n),l=a(19),i=a(9),s=a(8),r=a(17),c=a(12),p=a(11),d=a(0),u=a.n(d),m=a(26),h=a.n(m),f=a(87),v=a.n(f),g=a(210),b=a.n(g),w=a(165),E=a(779),k=a(780),_=a(65),y=a(39),N=a.n(y),O=a(2),C=a(113),R=a(25),D=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).dealClick=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"property-details";e.stopPropagation();var a=e.target.offsetParent.className;if(!a.includes("Modal")&&!a.includes("react-date-picker")&&!a.includes("checkbox")){var o=n.props.deal,l=o.status_string,i=o.deal_id,s=o.total_violations,r=o.additional_properties;n.props.clickFunction(l||"PW",i,s,r,t)}},n.state={modalOpen:!1,modalRatingOpen:!1,modalReviewOpen:!1,datePickerOpen:!1,showMoreBrokers:!1},n.ref=u.a.createRef(),n.openModal=n.openModal.bind(Object(r.a)(n)),n.closeModal=n.closeModal.bind(Object(r.a)(n)),n.openRatingModal=n.openRatingModal.bind(Object(r.a)(n)),n.updateRating=n.updateRating.bind(Object(r.a)(n)),n.openReviewModal=n.openReviewModal.bind(Object(r.a)(n)),n.closeReviewModal=n.closeReviewModal.bind(Object(r.a)(n)),n.updateDealReview=n.updateDealReview.bind(Object(r.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.deal.deal_id===Object(R.a)("deal_id")&&this.ref.current.scrollIntoView({block:"center",inline:"center"})}},{key:"updateRating",value:function(){var e=Object(l.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.stopPropagation(),this.setState({modalRatingOpen:!1}),e.next=4,this.props.updateRating(this.props.deal.deal_id,t);case 4:this.updateDealReview("updated",this.props.deal.ip_date_reviewed,this.props.deal.notes_reviewed);case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"openModal",value:function(e){e.stopPropagation(),this.props.deal.contact_id&&(this.props.getFullContactInfo(this.props.deal.contact_id),this.setState({modalOpen:!0}))}},{key:"openRatingModal",value:function(e){e.stopPropagation(),this.setState({modalRatingOpen:!0})}},{key:"getRatingColor",value:function(e){return 0===e?"circle-background green-circle":1===e?"circle-background yellow-circle":2===e?"circle-background pink-circle":3===e?"circle-background orange-circle":void 0}},{key:"afterOpenModal",value:function(){}},{key:"closeModal",value:function(e){e.stopPropagation(),this.setState({modalOpen:!1})}},{key:"openReviewModal",value:function(e){e.stopPropagation(),this.setState({modalReviewOpen:!0})}},{key:"closeReviewModal",value:function(e){e.stopPropagation(),this.setState({modalReviewOpen:!1})}},{key:"updateDealReview",value:function(e,t,a){this.props.deal.qts_placer&&this.props.updateDealReview(this.props.deal.deal_id,e,t,a)}},{key:"changeExpectedIPDate",value:function(e){this.props.changeExpectedIPDate(this.props.deal.deal_id,e),this.updateDealReview(this.props.deal.forecast_reviewed,"updated",this.props.deal.notes_reviewed)}},{key:"showDatePicker",value:function(e){e.stopPropagation(),this.setState({datePickerOpen:!0})}},{key:"showMoreBrokersToggle",value:function(e){e.stopPropagation(),this.setState({showMoreBrokers:!this.state.showMoreBrokers})}},{key:"render",value:function(){var e=this,t=this.props,a=t.deal,n=a.deal_id,o=a.deal_status,l=a.status_string,i=a.property_type_id,s=a.broker_starred,r=a.deal_name,c=a.city_state,p=a.property_type,d=a.property_address,m=a.additional_properties,f=a.full_name,g=a.contact_id,y=a.expected_inprocess_date,R=a.loan_amount,D=a.brokers,P=a.notes,x=a.last_notes_by,j=a.notes_date,M=a.notes_due_date,S=a.note_count,A=a.deal_rating,I=a.forecast_reviewed,T=a.ip_date_reviewed,L=a.notes_reviewed,F=a.qts_placer,B=a.TotalComps,H=a.total_complaints,q=a.total_violations,W=a.inNYC,z=t.contact,U=t.loadingContact,V=t.isSearchPage,Y="",J="",G=0,K=0;return D&&D.forEach((function(e){e.broker_name&&(e.broker_roles.includes("Originator")?(G>=1&&(Y+=", "),Y+=e.broker_name,G++):(K>=1&&(J+=", "),J+=e.broker_name,K++))})),u.a.createElement("div",{ref:this.ref,className:"pw-deal"},u.a.createElement("div",{className:"panel mui-panel",onClick:function(t){return e.dealClick(t)}},u.a.createElement(h.a,{className:"panel-heading"},u.a.createElement(v.a,{md:"10",sm:"10",xs:"9",key:n},u.a.createElement("div",{className:"deal-name"},u.a.createElement("p",{className:"panel-info-value property-title"},u.a.createElement("b",null,u.a.createElement("span",null,r||"")),u.a.createElement("span",{className:"deal-id"},"ID ",n),(!V||o===C.a.PW)&&u.a.createElement("span",{onClick:function(t){return e.openRatingModal(t)},className:this.getRatingColor.bind(this)(A)},A),V&&u.a.createElement("span",{className:"deal-status-tag"},l)))),u.a.createElement(v.a,{md:"2",sm:"2",xs:"3"},u.a.createElement("div",{onClick:function(t){return e.props.updateStar(n,s,t)},className:"deal-star"},u.a.createElement("p",null,1===s?u.a.createElement("span",{className:"ip-quote-star"},u.a.createElement("i",{className:"material-icons star-icon-orange"},"star")):u.a.createElement("span",{className:"ip-quote-star"},u.a.createElement("i",{className:"material-icons star-icon-gray"},"star")))),!V&&F&&u.a.createElement("div",{className:"r-icon",onClick:function(t){return e.openReviewModal(t)}},null!=I&&null!=T&&null!=L?u.a.createElement("img",{src:"/images/icons/review-icon-green.png",alt:"review-icon-green"}):u.a.createElement("img",{src:"/images/icons/review-icon-gray.png",alt:"review-icon-gray"})))),u.a.createElement(h.a,{className:"panel-body"},u.a.createElement(h.a,null,u.a.createElement(v.a,{md:"4"},u.a.createElement("div",null,u.a.createElement("p",{className:"small-title deal-info-title"},"Address"),u.a.createElement("p",{className:"panel-info-value"},d||""),u.a.createElement("p",{className:"panel-info-value"},c||"")),u.a.createElement("div",null,u.a.createElement("p",{className:"panel-info-value"},u.a.createElement("i",{className:"orange-text orange-text-hover pointer"},0===m?null:1===m?"1 other property":m+" other properties")))),u.a.createElement(v.a,{onClick:function(t){return e.openModal(t)},md:"2"},u.a.createElement("p",{className:"small-title deal-info-title"},"Name of Client"),u.a.createElement("p",{className:g?"panel-info-value client-name":"panel-info-value"},f||"N/A")),u.a.createElement(v.a,{md:"2"},u.a.createElement("p",{className:"small-title deal-info-title"},"Expected IP Date"),u.a.createElement("div",{className:"expected-ip"},o===C.a.CL?u.a.createElement("p",{className:"panel-info-value client-name"},y||"N/A"):null!==y&&N()(y).isValid()||this.state.datePickerOpen?u.a.createElement(_.a,{allowClear:!1,dateValue:y,update:function(t){return e.changeExpectedIPDate(t)}}):u.a.createElement("p",{className:"panel-info-value client-name",onClick:function(t){return e.showDatePicker(t)}},"+ add date"))),u.a.createElement(v.a,{md:"2"},u.a.createElement("div",null,u.a.createElement("p",{className:"small-title deal-info-title"},"Property Type"),u.a.createElement("p",{className:"panel-info-value"},p||"N/A"))),u.a.createElement(v.a,{md:"2"},u.a.createElement("div",null,u.a.createElement("p",{className:"small-title deal-info-title"},"Loan Amount"),u.a.createElement("p",{className:"panel-info-value"},R||"N/A")))),u.a.createElement(h.a,{className:"brokers-container"},u.a.createElement("p",{className:"small-title deal-info-title"},"Brokers"),u.a.createElement("p",{className:"bold-text"},Y),u.a.createElement("div",{className:"brokers-list"},u.a.createElement("p",{className:"xs-text"},J.length>150&&!this.state.showMoreBrokers?J.substring(0,J.substring(0,150).lastIndexOf(", "))+"...":J,J.length>150?u.a.createElement("span",{className:"orange-text",onClick:function(t){return e.showMoreBrokersToggle(t)}},this.state.showMoreBrokers?"Show Less":"Show More"):""))),u.a.createElement(h.a,{className:"note-container"},u.a.createElement(v.a,{md:"10",key:n},u.a.createElement("div",null,null!=P?u.a.createElement("div",null,u.a.createElement("p",{className:"small-title deal-info-title notes-title"},u.a.createElement("i",null,x," on ",j)),u.a.createElement("p",{className:"note"},P)):" "))),N()(M).isValid()?u.a.createElement(h.a,null,u.a.createElement("p",{className:"small-title notes-title"},"Remind me about this on"),u.a.createElement("div",{className:"remind-me"},u.a.createElement("p",null,u.a.createElement("i",{className:"material-icons"},"date_range"),N()(M).format("L")),u.a.createElement("p",null,u.a.createElement("i",{className:"material-icons"},"access_time"),N()(M).format("LT")))):" ",this.state.modalOpen&&u.a.createElement(w.a,{isOpen:!0,onRequestClose:this.closeModal,onAfterOpen:this.afterOpenModal,contact:z,name:f,key:n,noContact:Object(O.w)(z),loading:U}),u.a.createElement(E.a,{isOpen:this.state.modalRatingOpen,onAfterOpen:this.afterOpenModal,deal_rating:A,updateRating:this.updateRating}),u.a.createElement(k.a,{allReviewed:I&&T&&L,forecast:A,forecast_reviewed:I,ip_date:y,ip_date_reviewed:T,notes:P,notes_reviewed:L,isOpen:this.state.modalReviewOpen,onRequestClose:this.closeReviewModal,updateDealReview:this.updateDealReview}),u.a.createElement(b.a,null),u.a.createElement(h.a,{className:"note-options"},o!==C.a.CL&&u.a.createElement("p",{className:"orange-text xs-text inline-block",onClick:function(t){return e.props.addDealNoteClick("PW",n,q,m,t)}},u.a.createElement("i",{className:"material-icons icon-left medium-text middle"},"add"),u.a.createElement("i",null,"Add Note")),u.a.createElement("div",{className:"view-all",onClick:function(t){return e.dealClick(t,"notes")}},u.a.createElement("p",null,"View All Notes"),u.a.createElement("p",null,S))),u.a.createElement(b.a,null)),u.a.createElement(h.a,{className:"comps-row"},u.a.createElement("div",{onClick:function(t){return e.props.compsClick(W,d,c,i,t)}},u.a.createElement("div",{className:null!==q?"border-right":""},u.a.createElement("p",{className:"violation-value comps"},Object(O.q)(B),u.a.createElement("span",null,"Comps")))),u.a.createElement("div",{className:null!==q?"comps-row-violations":"hidden",onClick:function(t){return e.dealClick(t,"violations")}},u.a.createElement("div",null,u.a.createElement("p",{className:"violation-value"},q,u.a.createElement("span",null,"Violations"))),u.a.createElement("div",null,u.a.createElement("p",{className:"violation-value"},H,u.a.createElement("span",null,"Complaints")))))))}}]),a}(u.a.Component);t.a=D}}]);
//# sourceMappingURL=14.ffd016b0.chunk.js.map