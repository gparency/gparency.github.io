(this["webpackJsonplt-app"]=this["webpackJsonplt-app"]||[]).push([[79],{983:function(e,t,a){"use strict";a.r(t);var s=a(9),o=a(8),n=a(12),i=a(11),l=a(0),r=a.n(l),p=a(6),c=a(23),m=a(269),d=a(164),h=a(2),u=a(26),v=a.n(u),g=a(72),E=a.n(g),f=a(87),y=a.n(f),b=a(34),_=a.n(b),k=a(210),N=a.n(k),C=a(38),w=a.n(C),O=a(257),S=a.n(O),D=a(32),P=a(165),M=function(e){Object(n.a)(a,e);var t=Object(i.a)(a);function a(e){var o;return Object(s.a)(this,a),(o=t.call(this,e)).state={brokerModalOpen:!1,passModalOpen:!1,quote_id:"",note:"",broker_name:""},o}return Object(o.a)(a,[{key:"quoteLoan",value:function(e){e.stopPropagation(),this.props.setPageAndScrollPos(window.location.pathname,window.scrollY),h.f.go("/quote-form/1/".concat(this.props.item.quote_id,"/").concat(encodeURIComponent(window.location.pathname)))}},{key:"passLoanDialog",value:function(e){e.stopPropagation(),this.setState({passModalOpen:!0,quote_id:this.props.item.quote_id})}},{key:"closePassDialog",value:function(e){e.preventDefault(),this.setState({passModalOpen:!1,quote_id:"",note:""})}},{key:"submitPassDialog",value:function(e){e.preventDefault(),this.state.note?(this.props.passDeal(this.state.quote_id,this.state.note),this.setState({passModalOpen:!1,quote_id:"",note:""})):this.setState({noteRequired:!0})}},{key:"setNote",value:function(e){var t=Object(D.findDOMNode)(e.target),a=t.selectionStart;this.setState({note:e.target.value,noteRequired:!e.target.value},(function(){t.setSelectionRange(a,a)}))}},{key:"openBrokerModal",value:function(e,t,a){a.stopPropagation(),this.props.getFullContactInfo(e),this.setState({brokerModalOpen:!0,broker_name:t})}},{key:"closeBrokerModal",value:function(){this.setState({brokerModalOpen:!1})}},{key:"removeMeFromLoan",value:function(e){e.stopPropagation(),this.props.removeBanker(this.props.item.rb_id,this.props.item.claim_id)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"loan"},r.a.createElement("div",{className:"panel mui-panel",key:this.props.item.deal_id,onClick:this.props.navToDealDetails.bind(this,this.props.item.deal_id,this.props.item.properties[0].in_nyc,this.props.item.total_violations,this.props.item.additional_properties,this.props.item.deal_status,"write-up")},r.a.createElement(v.a,{className:"panel-heading"},r.a.createElement(y.a,{md:"11",sm:"11",xs:"11"},r.a.createElement("p",{className:"panel-info-value property-title"},this.props.item.properties[0].property_address,this.props.item.first_look?r.a.createElement("span",{className:"tag primary-tag first-look-tag inline-block"},"First Look"):"")),r.a.createElement(y.a,{md:"1",sm:"1",xs:"1"},r.a.createElement("img",{alt:"street-view-square-loan",src:"/images/icons/street-view-square.png",className:"street-view-square-loans",onClick:function(t){t.stopPropagation(),e.props.openStreetView(e.props.item.latitude,e.props.item.longitude,e.props.item.properties[0].property_address,e.props.item.properties[0].city_state_zip)}}))),r.a.createElement(v.a,null,r.a.createElement(y.a,{md:"3"},r.a.createElement("p",{className:"small-title deal-info-title"},"Address"),r.a.createElement("p",{className:"panel-info-value"},this.props.item.properties[0].city_state_zip),r.a.createElement("p",{className:"panel-info-value"},"lt"===this.props.item.source?r.a.createElement("i",{className:"orange-text orange-text-hover pointer",onClick:this.props.navToDealDetails.bind(this,this.props.item.deal_id,this.props.item.properties[0].in_nyc,this.props.item.total_violations,this.props.item.additional_properties,this.props.item.deal_status,"property-details")},0===this.props.item.additional_properties?"":1===this.props.item.additional_properties?"1 other property":this.props.item.additional_properties+" other properties"):"")),r.a.createElement(y.a,{md:"3"},r.a.createElement("p",{className:"small-title deal-info-title"},"Property Type"),r.a.createElement("p",{className:"panel-info-value"},this.props.item.properties[0].property_type?this.props.item.properties[0].property_type:"--")),r.a.createElement(y.a,{md:"3"},r.a.createElement("p",{className:"small-title deal-info-title"},"Deal Status"),r.a.createElement("p",{className:"panel-info-value inline-block"},this.props.item.status?this.props.item.status:"--"),"Missing Quote"===this.props.item.status?r.a.createElement("div",{className:"loan-inline-btns"},r.a.createElement(_.a,{className:"mui-btn mui-btn--raised loan-quote-button text-center",onClick:function(t){return e.quoteLoan(t)}},"Quote"),r.a.createElement(_.a,{className:"mui-btn mui-btn--raised loan-pass-button text-center",onClick:function(t){return e.passLoanDialog(t)}},"Pass")):""),r.a.createElement(y.a,{md:"3"},r.a.createElement("div",null,r.a.createElement("p",{className:"small-title deal-info-title"},"1"===this.props.item.deal_status||"2"===this.props.item.deal_status?"Expected Closing Date":"5"===this.props.item.deal_status?"Closed Date":""),r.a.createElement("p",{className:"panel-info-value"},"1"===this.props.item.deal_status?"N/A":this.props.item.expected_closing_date?this.props.item.expected_closing_date:"--")))),r.a.createElement(v.a,null,r.a.createElement(y.a,{md:"3"},r.a.createElement("p",{className:"small-title deal-info-title"},"Loan Amount"),r.a.createElement("p",{className:"panel-info-value"},this.props.item.loan_amount?this.props.item.loan_amount:"--")),r.a.createElement(y.a,{md:"3"},r.a.createElement("p",{className:"small-title deal-info-title"},"Units / Square Feet"),r.a.createElement("p",{className:"panel-info-value"},this.props.item.total_units||"-"," /"," ",this.props.item.total_area||"-")),"lt"===this.props.item.source?r.a.createElement(y.a,{md:"3"},r.a.createElement("p",{className:"small-title deal-info-title"},"Client Name"),r.a.createElement("p",{className:"panel-info-value"},this.props.item.client_name?this.props.item.client_name:"--")):"",r.a.createElement(y.a,{md:"3"},r.a.createElement("p",{className:"small-title deal-info-title"},"Brokers"),r.a.createElement("div",{className:"loan-brokers"},this.props.item.brokers&&this.props.item.brokers.map((function(t,a){return r.a.createElement("span",{key:a},r.a.createElement("p",{onClick:function(a){return e.openBrokerModal(t.member_contact_id,t.broker_name,a)}},t.broker_name,r.a.createElement("i",{className:"material-icons icon-right medium-text middle"},"open_in_new")))}))))),r.a.createElement(v.a,{style:{marginBottom:"10px"}}),r.a.createElement(v.a,null,r.a.createElement(N.a,{style:{marginTop:"20px"}}),"lt"===this.props.item.source?r.a.createElement(v.a,null,r.a.createElement(y.a,{md:"12",className:"comps-row"},r.a.createElement("div",{onClick:this.props.navToComps.bind(this,this.props.item.properties[0].in_nyc,this.props.item.properties[0].property_address,this.props.item.properties[0].city_state_zip,this.props.item.properties[0].property_type_id)},r.a.createElement("div",null,r.a.createElement("div",{className:this.props.item.properties[0].in_nyc&&null!==this.props.item.total_violations?"border-right":""},r.a.createElement("p",{className:"violation-value comps"},this.props.item.total_comps?Object(h.q)(this.props.item.total_comps):"0",r.a.createElement("span",null,"Comps"))))),r.a.createElement("div",null,r.a.createElement("div",{className:this.props.item.properties[0].in_nyc&&null!==this.props.item.total_violations?"comps-row-violations":"hidden",onClick:this.props.navToDealDetails.bind(this,this.props.item.deal_id,this.props.item.properties[0].in_nyc,this.props.item.total_violations,this.props.item.additional_properties,this.props.item.deal_status,"violations")},r.a.createElement("div",null,r.a.createElement("p",{className:"violation-value"},this.props.item.total_violations,r.a.createElement("span",null,"Violations"))),r.a.createElement("div",null,r.a.createElement("p",{className:"violation-value"},this.props.item.total_complaints,r.a.createElement("span",null,"Complaints"))))))):r.a.createElement("div",{onClick:function(t){return e.removeMeFromLoan(t)},className:"remove-from-loan"},r.a.createElement("p",null,"Remove me from this loan")))),r.a.createElement(E.a,{className:"note-modal",isOpen:this.state.passModalOpen,ariaHideApp:!1,contentLabel:"Modal",onAfterOpen:function(){},onRequestClose:this.closePassDialog.bind(this),shouldCloseOnOverlayClick:!0},r.a.createElement(w.a,{className:"modal-form"},r.a.createElement("p",{className:"add-note-modal"},"Reason for passing "),r.a.createElement(S.a,{rows:1,value:this.state.note?this.state.note:"",require:!0,onChange:this.setNote.bind(this),className:"add-note-textarea"}),this.state.noteRequired?r.a.createElement("span",{className:"error-block"},"Required"):"",r.a.createElement("div",{className:"add-note-buttons"},r.a.createElement(_.a,{variant:"flat",onClick:this.closePassDialog.bind(this)},"CANCEL"),r.a.createElement(_.a,{variant:"flat",onClick:this.submitPassDialog.bind(this)},"PASS")))),r.a.createElement(P.a,{isOpen:this.state.brokerModalOpen,onRequestClose:this.closeBrokerModal.bind(this),onAfterOpen:function(){},contact:this.props.contact,name:this.state.broker_name,noContact:this.props.noContact,loading:this.props.loadingContact}))}}]),a}(r.a.Component),L=a(73),T=a.n(L),j=a(46),A=a.n(j),q=a(80),I=a(258),B=window.google,x=function(e){Object(n.a)(a,e);var t=Object(i.a)(a);function a(e){var o;return Object(s.a)(this,a),(o=t.call(this,e)).updateFilter=function(e){var t=window.location.search||"";if(t.includes("filter=")){var a=t.indexOf("filter=")-1;t=t.slice(0,a)}e.target.value&&(t+=""===t?"?":"&",t+="".concat(Object(q.a)({filter:e.target.value}))),h.f.go(window.location.pathname+t)},o.state={employeeId:""},o}return Object(o.a)(a,[{key:"navToComps",value:function(e,t,a,s,o){o.stopPropagation(),sessionStorage.setItem("comps_inNYC",e),this.props.setPageAndScrollPos("/loans/my-loans",window.scrollY),this.props.submitCompsSearch("".concat(t," ").concat(a),s)}},{key:"navToDealDetails",value:function(e,t,a,s,o,n,i){if(i.stopPropagation(),null!==e||a>=0||s>0){this.props.setPageAndScrollPos("/loans/my-loans",window.scrollY);var l={deal_id:e,in_nyc:t,violations:a,additional_properties:s,deal_status:o};window.location.search&&(l.previous_page=window.location.pathname+window.location.search),h.f.go("/my-loans-dd/".concat(n,"?").concat(Object(q.a)(l)))}else this.props.showNoDataToast("There is no violations or deal details on this loan.")}},{key:"openStreetView",value:function(e,t,a,s){var o=this;(new B.maps.StreetViewService).getPanorama({location:{lat:parseFloat(e),lng:parseFloat(t)},radius:50},(function(n,i){"OK"===i?(o.props.setPageAndScrollPos("/loans/my-loans",window.scrollY),h.f.go("/comp-sv?".concat(Object(q.a)({latitude:e,longitude:t,address:a+" "+s})))):o.props.showNoDataToast("No street view available for this property.")}))}},{key:"changeEmployee",value:function(e){this.setState({employeeId:e.target.value},(function(){"Mine"!==this.state.employeeId?this.props.getMyLoansById(this.state.employeeId,this.props.search):this.props.loadMyLoans()}))}},{key:"render",value:function(){var e=this,t=this.props.loans.map((function(t,a){return r.a.createElement(M,{key:a,item:t,contact:e.props.contact,noContact:e.props.noContact,loadingContact:e.props.loadingContact,passDeal:e.props.passDeal,getFullContactInfo:e.props.getFullContactInfo,navToDealDetails:e.navToDealDetails.bind(e),openStreetView:e.openStreetView.bind(e),setPageAndScrollPos:e.props.setPageAndScrollPos,removeBanker:e.props.removeBanker,navToComps:e.navToComps.bind(e)})}));return r.a.createElement("div",null,this.props.loading?r.a.createElement(E.a,{className:"loading-modal",isOpen:!0,ariaHideApp:!1,contentLabel:"Modal",shouldCloseOnOverlayClick:!1},r.a.createElement("div",{className:"centered-spinner"},r.a.createElement("img",{src:"/images/icons/spin.svg",className:"loading-spinner",alt:"loading spinner"}))):r.a.createElement(v.a,null,r.a.createElement(v.a,{className:"my-loans-selects"},JSON.parse(localStorage.getItem("data")).bank_president&&this.props.loans?r.a.createElement("div",{className:"custom-select"},r.a.createElement(T.a,{onChange:this.changeEmployee.bind(this),value:this.state.employeeId},this.props.employees&&this.props.employees.map((function(e,t){return r.a.createElement(A.a,{key:t,value:e.id,label:e.name})})),this.props.employeeMessage?this.props.employeeMessage:"")):"",r.a.createElement("div",{className:"custom-select"},r.a.createElement(T.a,{onChange:this.updateFilter,value:this.props.filter||""},r.a.createElement(A.a,{label:"All Deal Statuses",value:0}),r.a.createElement(A.a,{label:"Missing Quote",value:1}),r.a.createElement(A.a,{label:"Quoted",value:2}),r.a.createElement(A.a,{label:"Under Application",value:3}),r.a.createElement(A.a,{label:"Closed",value:4})))),t.length?r.a.createElement("div",null,t,r.a.createElement(I.a,{currentPage:this.props.currentPage,totalPages:this.props.pages})):r.a.createElement("div",{className:this.props.noLoans?"":"hidden"},r.a.createElement("div",null,r.a.createElement("div",{className:"grey-circle"},r.a.createElement("i",{className:"material-icons"},"warning")),r.a.createElement("h2",{className:"no-results"},this.props.message)))))}}]),a}(r.a.Component),F=a(88),R=a(25),V=function(e){Object(n.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(s.a)(this,a);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={scrolled:!1,filter:"",page:null},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e,t,a=this,s=this.props.location.search?Object(R.a)("page"):null,o=this.props.location.search?parseInt(Object(R.a)("filter"),10):null;this.setState({page:s,filter:o}),(null===(e=this.props.comps)||void 0===e||null===(t=e.previousScrollPos)||void 0===t?void 0:t[0])?(setTimeout((function(){window.scrollTo(0,a.props.comps.previousScrollPos[a.props.comps.previousScrollPos.length-1])}),100),setTimeout((function(){a.props.compsActions.resetScrollPosition()}),1e3),this.setState({scrolled:!0})):(this.loadMyLoans(s,this.props.loans.search,o),JSON.parse(localStorage.getItem("data")).bank_president&&this.props.actions.getBankPresidentEmployee())}},{key:"componentDidUpdate",value:function(e,t){if(this.props.location.search!==e.location.search||this.props.loans.search!==e.loans.search){var a=this.props.location.search?Object(R.a)("page"):null,s=this.props.location.search?parseInt(Object(R.a)("filter"),10):null;this.setState({page:a,filter:s}),this.loadMyLoans(a,this.props.loans.search,s)}}},{key:"loadMyLoans",value:function(e,t,a){this.props.actions.loadMyLoans(this.props.loans.employeeId,t,a,e||1)}},{key:"render",value:function(){var e=null;return this.props.loans.successToast&&(e=r.a.createElement(F.a,{closeToast:this.props.actions.closeLoanToast,delay:6e3},r.a.createElement("div",{className:"success-message"},r.a.createElement("p",null,this.props.loans.message),r.a.createElement(_.a,{variant:"flat",onClick:this.props.actions.closeLoanToast},"Done")))),this.props.loans.noDataToast&&(e=r.a.createElement(F.a,{closeToast:this.props.actions.closeNoDataToast,delay:6e3},r.a.createElement("div",{className:"success-message"},r.a.createElement("p",null,this.props.loans.message),r.a.createElement(_.a,{variant:"flat",onClick:this.props.actions.closeNoDataToast},"Done")))),r.a.createElement("div",null,e,r.a.createElement(x,{pages:this.props.loans.pages,search:this.props.loans.search,contact:this.props.loans.contact,noContact:this.props.loans.noContact,loadingContact:this.props.loans.loadingContact,loans:this.props.loans.myLoans,noLoans:this.props.loans.noLoans,message:this.props.loans.message,loading:this.props.loans.loading,currentPage:this.state.page||1,submitCompsSearch:this.props.compsActions.submitCompsSearch,getFullContactInfo:this.props.actions.getFullContactInfo,showNoDataToast:this.props.actions.showNoDataToast,passDeal:this.props.actions.passDeal,setPageAndScrollPos:this.props.compsActions.setPageAndScrollPos,employees:this.props.loans.employees,employeeMessage:this.props.loans.employeeMessage,getMyLoansById:this.props.actions.getMyLoansById,loadMyLoans:this.props.actions.loadMyLoans,removeBanker:this.props.actions.removeBankerFromMyLoans,filter:this.state.filter}))}}]),a}(r.a.Component);t.default=Object(p.b)((function(e){return{loans:e.loans,comps:e.comps}}),(function(e){return{actions:Object(c.b)(m,e),compsActions:Object(c.b)(d,e)}}))(V)}}]);
//# sourceMappingURL=79.046accfb.chunk.js.map